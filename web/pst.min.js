var pst=function(t,e){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=r(window);
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function o(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))}function i(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function u(t,e,r){return t(r={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&r.path)}},r.exports),r.exports}function c(t){if(t.__esModule)return t;var e=Object.defineProperty({},"__esModule",{value:!0});return Object.keys(t).forEach((function(r){var n=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,n.get?n:{enumerable:!0,get:function(){return t[r]}})})),e}var f=u((function(t){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator,i=Math.ceil,a=Math.floor,s="[BigNumber Error] ",u=s+"Number primitive has more than 15 significant digits: ",c=1e14,f=14,l=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],d=1e7,p=1e9;function g(t){var e=0|t;return t>0||t===e?e:e-1}function w(t){for(var e,r,n=1,o=t.length,i=t[0]+"";n<o;){for(e=t[n++]+"",r=f-e.length;r--;e="0"+e);i+=e}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function y(t,e){var r,n,o=t.c,i=e.c,a=t.s,s=e.s,u=t.e,c=e.e;if(!a||!s)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-s:a;if(a!=s)return a;if(r=a<0,n=u==c,!o||!i)return n?0:!o^r?1:-1;if(!n)return u>c^r?1:-1;for(s=(u=o.length)<(c=i.length)?u:c,a=0;a<s;a++)if(o[a]!=i[a])return o[a]>i[a]^r?1:-1;return u==c?0:u>c^r?1:-1}function m(t,e,r,n){if(t<e||t>r||t!==a(t))throw Error(s+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function v(t){var e=t.c.length-1;return g(t.e/f)==e&&t.c[e]%2!=0}function b(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function E(t,e,r){var n,o;if(e<0){for(o=r+".";++e;o+=r);t=o+t}else if(++e>(n=t.length)){for(o=r,e-=n;--e;o+=r);t+=o}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}(r=function t(e){var r,T,_,x,A,O,S,N,U,B,C=G.prototype={constructor:G,toString:null,valueOf:null},R=new G(1),k=20,P=4,I=-7,j=21,D=-1e7,L=1e7,M=!1,q=1,F=0,$={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz";function G(t,e){var r,o,i,s,c,h,d,p,g=this;if(!(g instanceof G))return new G(t,e);if(null==e){if(t&&!0===t._isBigNumber)return g.s=t.s,void(!t.c||t.e>L?g.c=g.e=null:t.e<D?g.c=[g.e=0]:(g.e=t.e,g.c=t.c.slice()));if((h="number"==typeof t)&&0*t==0){if(g.s=1/t<0?(t=-t,-1):1,t===~~t){for(s=0,c=t;c>=10;c/=10,s++);return void(s>L?g.c=g.e=null:(g.e=s,g.c=[t]))}p=String(t)}else{if(!n.test(p=String(t)))return _(g,p,h);g.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(s=p.indexOf("."))>-1&&(p=p.replace(".","")),(c=p.search(/e/i))>0?(s<0&&(s=c),s+=+p.slice(c+1),p=p.substring(0,c)):s<0&&(s=p.length)}else{if(m(e,2,H.length,"Base"),10==e)return W(g=new G(t),k+g.e+1,P);if(p=String(t),h="number"==typeof t){if(0*t!=0)return _(g,p,h,e);if(g.s=1/t<0?(p=p.slice(1),-1):1,G.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(u+t)}else g.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=H.slice(0,e),s=c=0,d=p.length;c<d;c++)if(r.indexOf(o=p.charAt(c))<0){if("."==o){if(c>s){s=d;continue}}else if(!i&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){i=!0,c=-1,s=0;continue}return _(g,String(t),h,e)}h=!1,(s=(p=T(p,e,10,g.s)).indexOf("."))>-1?p=p.replace(".",""):s=p.length}for(c=0;48===p.charCodeAt(c);c++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(c,++d)){if(d-=c,h&&G.DEBUG&&d>15&&(t>l||t!==a(t)))throw Error(u+g.s*t);if((s=s-c-1)>L)g.c=g.e=null;else if(s<D)g.c=[g.e=0];else{if(g.e=s,g.c=[],c=(s+1)%f,s<0&&(c+=f),c<d){for(c&&g.c.push(+p.slice(0,c)),d-=f;c<d;)g.c.push(+p.slice(c,c+=f));c=f-(p=p.slice(c)).length}else c-=d;for(;c--;p+="0");g.c.push(+p)}}else g.c=[g.e=0]}function K(t,e,r,n){var o,i,a,s,u;if(null==r?r=P:m(r,0,8),!t.c)return t.toString();if(o=t.c[0],a=t.e,null==e)u=w(t.c),u=1==n||2==n&&(a<=I||a>=j)?b(u,a):E(u,a,"0");else if(i=(t=W(new G(t),e,r)).e,s=(u=w(t.c)).length,1==n||2==n&&(e<=i||i<=I)){for(;s<e;u+="0",s++);u=b(u,i)}else if(e-=a,u=E(u,i,"0"),i+1>s){if(--e>0)for(u+=".";e--;u+="0");}else if((e+=i-s)>0)for(i+1==s&&(u+=".");e--;u+="0");return t.s<0&&o?"-"+u:u}function z(t,e){for(var r,n=1,o=new G(t[0]);n<t.length;n++){if(!(r=new G(t[n])).s){o=r;break}e.call(o,r)&&(o=r)}return o}function V(t,e,r){for(var n=1,o=e.length;!e[--o];e.pop());for(o=e[0];o>=10;o/=10,n++);return(r=n+r*f-1)>L?t.c=t.e=null:r<D?t.c=[t.e=0]:(t.e=r,t.c=e),t}function W(t,e,r,n){var o,s,u,l,d,p,g,w=t.c,y=h;if(w){t:{for(o=1,l=w[0];l>=10;l/=10,o++);if((s=e-o)<0)s+=f,u=e,g=(d=w[p=0])/y[o-u-1]%10|0;else if((p=i((s+1)/f))>=w.length){if(!n)break t;for(;w.length<=p;w.push(0));d=g=0,o=1,u=(s%=f)-f+1}else{for(d=l=w[p],o=1;l>=10;l/=10,o++);g=(u=(s%=f)-f+o)<0?0:d/y[o-u-1]%10|0}if(n=n||e<0||null!=w[p+1]||(u<0?d:d%y[o-u-1]),n=r<4?(g||n)&&(0==r||r==(t.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(s>0?u>0?d/y[o-u]:0:w[p-1])%10&1||r==(t.s<0?8:7)),e<1||!w[0])return w.length=0,n?(e-=t.e+1,w[0]=y[(f-e%f)%f],t.e=-e||0):w[0]=t.e=0,t;if(0==s?(w.length=p,l=1,p--):(w.length=p+1,l=y[f-s],w[p]=u>0?a(d/y[o-u]%y[u])*l:0),n)for(;;){if(0==p){for(s=1,u=w[0];u>=10;u/=10,s++);for(u=w[0]+=l,l=1;u>=10;u/=10,l++);s!=l&&(t.e++,w[0]==c&&(w[0]=1));break}if(w[p]+=l,w[p]!=c)break;w[p--]=0,l=1}for(s=w.length;0===w[--s];w.pop());}t.e>L?t.c=t.e=null:t.e<D&&(t.c=[t.e=0])}return t}function J(t){var e,r=t.e;return null===r?t.toString():(e=w(t.c),e=r<=I||r>=j?b(e,r):E(e,r,"0"),t.s<0?"-"+e:e)}return G.clone=t,G.ROUND_UP=0,G.ROUND_DOWN=1,G.ROUND_CEIL=2,G.ROUND_FLOOR=3,G.ROUND_HALF_UP=4,G.ROUND_HALF_DOWN=5,G.ROUND_HALF_EVEN=6,G.ROUND_HALF_CEIL=7,G.ROUND_HALF_FLOOR=8,G.EUCLID=9,G.config=G.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(s+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(m(r=t[e],0,p,e),k=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(m(r=t[e],0,8,e),P=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(m(r[0],-p,0,e),m(r[1],0,p,e),I=r[0],j=r[1]):(m(r,-p,p,e),I=-(j=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if((r=t[e])&&r.pop)m(r[0],-p,-1,e),m(r[1],1,p,e),D=r[0],L=r[1];else{if(m(r,-p,p,e),!r)throw Error(s+e+" cannot be zero: "+r);D=-(L=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(s+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw M=!r,Error(s+"crypto unavailable");M=r}else M=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(m(r=t[e],0,9,e),q=r),t.hasOwnProperty(e="POW_PRECISION")&&(m(r=t[e],0,p,e),F=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(s+e+" not an object: "+r);$=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.$|[+-.\s]|(.).*\1/.test(r))throw Error(s+e+" invalid: "+r);H=r}}return{DECIMAL_PLACES:k,ROUNDING_MODE:P,EXPONENTIAL_AT:[I,j],RANGE:[D,L],CRYPTO:M,MODULO_MODE:q,POW_PRECISION:F,FORMAT:$,ALPHABET:H}},G.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!G.DEBUG)return!0;var e,r,n=t.c,o=t.e,i=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===i||-1===i)&&o>=-p&&o<=p&&o===a(o)){if(0===n[0]){if(0===o&&1===n.length)return!0;break t}if((e=(o+1)%f)<1&&(e+=f),String(n[0]).length==e){for(e=0;e<n.length;e++)if((r=n[e])<0||r>=c||r!==a(r))break t;if(0!==r)return!0}}}else if(null===n&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(s+"Invalid BigNumber: "+t)},G.maximum=G.max=function(){return z(arguments,C.lt)},G.minimum=G.min=function(){return z(arguments,C.gt)},G.random=(x=9007199254740992,A=Math.random()*x&2097151?function(){return a(Math.random()*x)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,r,n,o,u,c=0,l=[],d=new G(R);if(null==t?t=k:m(t,0,p),o=i(t/f),M)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(o*=2));c<o;)(u=131072*e[c]+(e[c+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),e[c]=r[0],e[c+1]=r[1]):(l.push(u%1e14),c+=2);c=o/2}else{if(!crypto.randomBytes)throw M=!1,Error(s+"crypto unavailable");for(e=crypto.randomBytes(o*=7);c<o;)(u=281474976710656*(31&e[c])+1099511627776*e[c+1]+4294967296*e[c+2]+16777216*e[c+3]+(e[c+4]<<16)+(e[c+5]<<8)+e[c+6])>=9e15?crypto.randomBytes(7).copy(e,c):(l.push(u%1e14),c+=7);c=o/7}if(!M)for(;c<o;)(u=A())<9e15&&(l[c++]=u%1e14);for(o=l[--c],t%=f,o&&t&&(u=h[f-t],l[c]=a(o/u)*u);0===l[c];l.pop(),c--);if(c<0)l=[n=0];else{for(n=-1;0===l[0];l.splice(0,1),n-=f);for(c=1,u=l[0];u>=10;u/=10,c++);c<f&&(n-=f-c)}return d.e=n,d.c=l,d}),G.sum=function(){for(var t=1,e=arguments,r=new G(e[0]);t<e.length;)r=r.plus(e[t++]);return r},T=function(){var t="0123456789";function e(t,e,r,n){for(var o,i,a=[0],s=0,u=t.length;s<u;){for(i=a.length;i--;a[i]*=e);for(a[0]+=n.indexOf(t.charAt(s++)),o=0;o<a.length;o++)a[o]>r-1&&(null==a[o+1]&&(a[o+1]=0),a[o+1]+=a[o]/r|0,a[o]%=r)}return a.reverse()}return function(n,o,i,a,s){var u,c,f,l,h,d,p,g,y=n.indexOf("."),m=k,v=P;for(y>=0&&(l=F,F=0,n=n.replace(".",""),d=(g=new G(o)).pow(n.length-y),F=l,g.c=e(E(w(d.c),d.e,"0"),10,i,t),g.e=g.c.length),f=l=(p=e(n,o,i,s?(u=H,t):(u=t,H))).length;0==p[--l];p.pop());if(!p[0])return u.charAt(0);if(y<0?--f:(d.c=p,d.e=f,d.s=a,p=(d=r(d,g,m,v,i)).c,h=d.r,f=d.e),y=p[c=f+m+1],l=i/2,h=h||c<0||null!=p[c+1],h=v<4?(null!=y||h)&&(0==v||v==(d.s<0?3:2)):y>l||y==l&&(4==v||h||6==v&&1&p[c-1]||v==(d.s<0?8:7)),c<1||!p[0])n=h?E(u.charAt(1),-m,u.charAt(0)):u.charAt(0);else{if(p.length=c,h)for(--i;++p[--c]>i;)p[c]=0,c||(++f,p=[1].concat(p));for(l=p.length;!p[--l];);for(y=0,n="";y<=l;n+=u.charAt(p[y++]));n=E(n,f,u.charAt(0))}return n}}(),r=function(){function t(t,e,r){var n,o,i,a,s=0,u=t.length,c=e%d,f=e/d|0;for(t=t.slice();u--;)s=((o=c*(i=t[u]%d)+(n=f*i+(a=t[u]/d|0)*c)%d*d+s)/r|0)+(n/d|0)+f*a,t[u]=o%r;return s&&(t=[s].concat(t)),t}function e(t,e,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(t[o]!=e[o]){i=t[o]>e[o]?1:-1;break}return i}function r(t,e,r,n){for(var o=0;r--;)t[r]-=o,o=t[r]<e[r]?1:0,t[r]=o*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,o,i,s,u){var l,h,d,p,w,y,m,v,b,E,T,_,x,A,O,S,N,U=n.s==o.s?1:-1,B=n.c,C=o.c;if(!(B&&B[0]&&C&&C[0]))return new G(n.s&&o.s&&(B?!C||B[0]!=C[0]:C)?B&&0==B[0]||!C?0*U:U/0:NaN);for(b=(v=new G(U)).c=[],U=i+(h=n.e-o.e)+1,u||(u=c,h=g(n.e/f)-g(o.e/f),U=U/f|0),d=0;C[d]==(B[d]||0);d++);if(C[d]>(B[d]||0)&&h--,U<0)b.push(1),p=!0;else{for(A=B.length,S=C.length,d=0,U+=2,(w=a(u/(C[0]+1)))>1&&(C=t(C,w,u),B=t(B,w,u),S=C.length,A=B.length),x=S,T=(E=B.slice(0,S)).length;T<S;E[T++]=0);N=C.slice(),N=[0].concat(N),O=C[0],C[1]>=u/2&&O++;do{if(w=0,(l=e(C,E,S,T))<0){if(_=E[0],S!=T&&(_=_*u+(E[1]||0)),(w=a(_/O))>1)for(w>=u&&(w=u-1),m=(y=t(C,w,u)).length,T=E.length;1==e(y,E,m,T);)w--,r(y,S<m?N:C,m,u),m=y.length,l=1;else 0==w&&(l=w=1),m=(y=C.slice()).length;if(m<T&&(y=[0].concat(y)),r(E,y,T,u),T=E.length,-1==l)for(;e(C,E,S,T)<1;)w++,r(E,S<T?N:C,T,u),T=E.length}else 0===l&&(w++,E=[0]);b[d++]=w,E[0]?E[T++]=B[x]||0:(E=[B[x]],T=1)}while((x++<A||null!=E[0])&&U--);p=null!=E[0],b[0]||b.splice(0,1)}if(u==c){for(d=1,U=b[0];U>=10;U/=10,d++);W(v,i+(v.e=d+h*f-1)+1,s,p)}else v.e=h,v.r=+p;return v}}(),O=/^(-?)0([xbo])(?=\w[\w.]*$)/i,S=/^([^.]+)\.$/,N=/^\.([^.]+)$/,U=/^-?(Infinity|NaN)$/,B=/^\s*\+(?=[\w.])|^\s+|\s+$/g,_=function(t,e,r,n){var o,i=r?e:e.replace(B,"");if(U.test(i))t.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(O,(function(t,e,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=o?t:e})),n&&(o=n,i=i.replace(S,"$1").replace(N,"0.$1")),e!=i))return new G(i,o);if(G.DEBUG)throw Error(s+"Not a"+(n?" base "+n:"")+" number: "+e);t.s=null}t.c=t.e=null},C.absoluteValue=C.abs=function(){var t=new G(this);return t.s<0&&(t.s=1),t},C.comparedTo=function(t,e){return y(this,new G(t,e))},C.decimalPlaces=C.dp=function(t,e){var r,n,o,i=this;if(null!=t)return m(t,0,p),null==e?e=P:m(e,0,8),W(new G(i),t+i.e+1,e);if(!(r=i.c))return null;if(n=((o=r.length-1)-g(this.e/f))*f,o=r[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},C.dividedBy=C.div=function(t,e){return r(this,new G(t,e),k,P)},C.dividedToIntegerBy=C.idiv=function(t,e){return r(this,new G(t,e),0,1)},C.exponentiatedBy=C.pow=function(t,e){var r,n,o,u,c,l,h,d,p=this;if((t=new G(t)).c&&!t.isInteger())throw Error(s+"Exponent not an integer: "+J(t));if(null!=e&&(e=new G(e)),c=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return d=new G(Math.pow(+J(p),c?2-v(t):+J(t))),e?d.mod(e):d;if(l=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new G(NaN);(n=!l&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||c&&p.c[1]>=24e7:p.c[0]<8e13||c&&p.c[0]<=9999975e7)))return u=p.s<0&&v(t)?-0:0,p.e>-1&&(u=1/u),new G(l?1/u:u);F&&(u=i(F/f+2))}for(c?(r=new G(.5),l&&(t.s=1),h=v(t)):h=(o=Math.abs(+J(t)))%2,d=new G(R);;){if(h){if(!(d=d.times(p)).c)break;u?d.c.length>u&&(d.c.length=u):n&&(d=d.mod(e))}if(o){if(0===(o=a(o/2)))break;h=o%2}else if(W(t=t.times(r),t.e+1,1),t.e>14)h=v(t);else{if(0===(o=+J(t)))break;h=o%2}p=p.times(p),u?p.c&&p.c.length>u&&(p.c.length=u):n&&(p=p.mod(e))}return n?d:(l&&(d=R.div(d)),e?d.mod(e):u?W(d,F,P,undefined):d)},C.integerValue=function(t){var e=new G(this);return null==t?t=P:m(t,0,8),W(e,e.e+1,t)},C.isEqualTo=C.eq=function(t,e){return 0===y(this,new G(t,e))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(t,e){return y(this,new G(t,e))>0},C.isGreaterThanOrEqualTo=C.gte=function(t,e){return 1===(e=y(this,new G(t,e)))||0===e},C.isInteger=function(){return!!this.c&&g(this.e/f)>this.c.length-2},C.isLessThan=C.lt=function(t,e){return y(this,new G(t,e))<0},C.isLessThanOrEqualTo=C.lte=function(t,e){return-1===(e=y(this,new G(t,e)))||0===e},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(t,e){var r,n,o,i,a=this,s=a.s;if(e=(t=new G(t,e)).s,!s||!e)return new G(NaN);if(s!=e)return t.s=-e,a.plus(t);var u=a.e/f,l=t.e/f,h=a.c,d=t.c;if(!u||!l){if(!h||!d)return h?(t.s=-e,t):new G(d?a:NaN);if(!h[0]||!d[0])return d[0]?(t.s=-e,t):new G(h[0]?a:3==P?-0:0)}if(u=g(u),l=g(l),h=h.slice(),s=u-l){for((i=s<0)?(s=-s,o=h):(l=u,o=d),o.reverse(),e=s;e--;o.push(0));o.reverse()}else for(n=(i=(s=h.length)<(e=d.length))?s:e,s=e=0;e<n;e++)if(h[e]!=d[e]){i=h[e]<d[e];break}if(i&&(o=h,h=d,d=o,t.s=-t.s),(e=(n=d.length)-(r=h.length))>0)for(;e--;h[r++]=0);for(e=c-1;n>s;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=e);--h[r],h[n]+=c}h[n]-=d[n]}for(;0==h[0];h.splice(0,1),--l);return h[0]?V(t,h,l):(t.s=3==P?-1:1,t.c=[t.e=0],t)},C.modulo=C.mod=function(t,e){var n,o,i=this;return t=new G(t,e),!i.c||!t.s||t.c&&!t.c[0]?new G(NaN):!t.c||i.c&&!i.c[0]?new G(i):(9==q?(o=t.s,t.s=1,n=r(i,t,0,3),t.s=o,n.s*=o):n=r(i,t,0,q),(t=i.minus(n.times(t))).c[0]||1!=q||(t.s=i.s),t)},C.multipliedBy=C.times=function(t,e){var r,n,o,i,a,s,u,l,h,p,w,y,m,v,b,E=this,T=E.c,_=(t=new G(t,e)).c;if(!(T&&_&&T[0]&&_[0]))return!E.s||!t.s||T&&!T[0]&&!_||_&&!_[0]&&!T?t.c=t.e=t.s=null:(t.s*=E.s,T&&_?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=g(E.e/f)+g(t.e/f),t.s*=E.s,(u=T.length)<(p=_.length)&&(m=T,T=_,_=m,o=u,u=p,p=o),o=u+p,m=[];o--;m.push(0));for(v=c,b=d,o=p;--o>=0;){for(r=0,w=_[o]%b,y=_[o]/b|0,i=o+(a=u);i>o;)r=((l=w*(l=T[--a]%b)+(s=y*l+(h=T[a]/b|0)*w)%b*b+m[i]+r)/v|0)+(s/b|0)+y*h,m[i--]=l%v;m[i]=r}return r?++n:m.splice(0,1),V(t,m,n)},C.negated=function(){var t=new G(this);return t.s=-t.s||null,t},C.plus=function(t,e){var r,n=this,o=n.s;if(e=(t=new G(t,e)).s,!o||!e)return new G(NaN);if(o!=e)return t.s=-e,n.minus(t);var i=n.e/f,a=t.e/f,s=n.c,u=t.c;if(!i||!a){if(!s||!u)return new G(o/0);if(!s[0]||!u[0])return u[0]?t:new G(s[0]?n:0*o)}if(i=g(i),a=g(a),s=s.slice(),o=i-a){for(o>0?(a=i,r=u):(o=-o,r=s),r.reverse();o--;r.push(0));r.reverse()}for((o=s.length)-(e=u.length)<0&&(r=u,u=s,s=r,e=o),o=0;e;)o=(s[--e]=s[e]+u[e]+o)/c|0,s[e]=c===s[e]?0:s[e]%c;return o&&(s=[o].concat(s),++a),V(t,s,a)},C.precision=C.sd=function(t,e){var r,n,o,i=this;if(null!=t&&t!==!!t)return m(t,1,p),null==e?e=P:m(e,0,8),W(new G(i),t,e);if(!(r=i.c))return null;if(n=(o=r.length-1)*f+1,o=r[o]){for(;o%10==0;o/=10,n--);for(o=r[0];o>=10;o/=10,n++);}return t&&i.e+1>n&&(n=i.e+1),n},C.shiftedBy=function(t){return m(t,-9007199254740991,l),this.times("1e"+t)},C.squareRoot=C.sqrt=function(){var t,e,n,o,i,a=this,s=a.c,u=a.s,c=a.e,f=k+4,l=new G("0.5");if(1!==u||!s||!s[0])return new G(!u||u<0&&(!s||s[0])?NaN:s?a:1/0);if(0==(u=Math.sqrt(+J(a)))||u==1/0?(((e=w(s)).length+c)%2==0&&(e+="0"),u=Math.sqrt(+e),c=g((c+1)/2)-(c<0||c%2),n=new G(e=u==1/0?"1e"+c:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+c)):n=new G(u+""),n.c[0])for((u=(c=n.e)+f)<3&&(u=0);;)if(i=n,n=l.times(i.plus(r(a,i,f,1))),w(i.c).slice(0,u)===(e=w(n.c)).slice(0,u)){if(n.e<c&&--u,"9999"!=(e=e.slice(u-3,u+1))&&(o||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(W(n,n.e+k+2,1),t=!n.times(n).eq(a));break}if(!o&&(W(i,i.e+k+2,0),i.times(i).eq(a))){n=i;break}f+=4,u+=4,o=1}return W(n,n.e+k+1,P,t)},C.toExponential=function(t,e){return null!=t&&(m(t,0,p),t++),K(this,t,e,1)},C.toFixed=function(t,e){return null!=t&&(m(t,0,p),t=t+this.e+1),K(this,t,e)},C.toFormat=function(t,e,r){var n,o=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=$;else if("object"!=typeof r)throw Error(s+"Argument not an object: "+r);if(n=o.toFixed(t,e),o.c){var i,a=n.split("."),u=+r.groupSize,c=+r.secondaryGroupSize,f=r.groupSeparator||"",l=a[0],h=a[1],d=o.s<0,p=d?l.slice(1):l,g=p.length;if(c&&(i=u,u=c,c=i,g-=i),u>0&&g>0){for(i=g%u||u,l=p.substr(0,i);i<g;i+=u)l+=f+p.substr(i,u);c>0&&(l+=f+p.slice(i)),d&&(l="-"+l)}n=h?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):l}return(r.prefix||"")+n+(r.suffix||"")},C.toFraction=function(t){var e,n,o,i,a,u,c,l,d,p,g,y,m=this,v=m.c;if(null!=t&&(!(c=new G(t)).isInteger()&&(c.c||1!==c.s)||c.lt(R)))throw Error(s+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+J(c));if(!v)return new G(m);for(e=new G(R),d=n=new G(R),o=l=new G(R),y=w(v),a=e.e=y.length-m.e-1,e.c[0]=h[(u=a%f)<0?f+u:u],t=!t||c.comparedTo(e)>0?a>0?e:d:c,u=L,L=1/0,c=new G(y),l.c[0]=0;p=r(c,e,0,1),1!=(i=n.plus(p.times(o))).comparedTo(t);)n=o,o=i,d=l.plus(p.times(i=d)),l=i,e=c.minus(p.times(i=e)),c=i;return i=r(t.minus(n),o,0,1),l=l.plus(i.times(d)),n=n.plus(i.times(o)),l.s=d.s=m.s,g=r(d,o,a*=2,P).minus(m).abs().comparedTo(r(l,n,a,P).minus(m).abs())<1?[d,o]:[l,n],L=u,g},C.toNumber=function(){return+J(this)},C.toPrecision=function(t,e){return null!=t&&m(t,1,p),K(this,t,e,2)},C.toString=function(t){var e,r=this,n=r.s,o=r.e;return null===o?n?(e="Infinity",n<0&&(e="-"+e)):e="NaN":(null==t?e=o<=I||o>=j?b(w(r.c),o):E(w(r.c),o,"0"):10===t?e=E(w((r=W(new G(r),k+o+1,P)).c),r.e,"0"):(m(t,2,H.length,"Base"),e=T(E(w(r.c),o,"0"),10,t,n,!0)),n<0&&r.c[0]&&(e="-"+e)),e},C.valueOf=C.toJSON=function(){return J(this)},C._isBigNumber=!0,o&&(C[Symbol.toStringTag]="BigNumber",C[Symbol.for("nodejs.util.inspect.custom")]=C.valueOf),null!=e&&G.set(e),G}()).default=r.BigNumber=r,t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(a)})),l=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){this.BigNum=(t,e)=>new(f.BigNumber.clone({DECIMAL_PLACES:e}))(t)}winstonToAr(t,{formatted:e=!1,decimals:r=12,trim:n=!0}={}){let o=this.stringToBigNum(t,r).shiftedBy(-12);return e?o.toFormat(r):o.toFixed(r)}arToWinston(t,{formatted:e=!1}={}){let r=this.stringToBigNum(t).shiftedBy(12);return e?r.toFormat():r.toFixed(0)}compare(t,e){let r=this.stringToBigNum(t),n=this.stringToBigNum(e);return r.comparedTo(n)}isEqual(t,e){return 0===this.compare(t,e)}isLessThan(t,e){let r=this.stringToBigNum(t),n=this.stringToBigNum(e);return r.isLessThan(n)}isGreaterThan(t,e){let r=this.stringToBigNum(t),n=this.stringToBigNum(e);return r.isGreaterThan(n)}add(t,e){let r=this.stringToBigNum(t);this.stringToBigNum(e);return r.plus(e).toFixed(0)}sub(t,e){let r=this.stringToBigNum(t);this.stringToBigNum(e);return r.minus(e).toFixed(0)}stringToBigNum(t,e=12){return this.BigNum(t,e)}}})),h=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}},d=Object.prototype.toString;function p(t){return"[object Array]"===d.call(t)}function g(t){return void 0===t}function w(t){return null!==t&&"object"==typeof t}function y(t){if("[object Object]"!==d.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function m(t){return"[object Function]"===d.call(t)}function v(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),p(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var b={isArray:p,isArrayBuffer:function(t){return"[object ArrayBuffer]"===d.call(t)},isBuffer:function(t){return null!==t&&!g(t)&&null!==t.constructor&&!g(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:w,isPlainObject:y,isUndefined:g,isDate:function(t){return"[object Date]"===d.call(t)},isFile:function(t){return"[object File]"===d.call(t)},isBlob:function(t){return"[object Blob]"===d.call(t)},isFunction:m,isStream:function(t){return w(t)&&m(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:v,merge:function t(){var e={};function r(r,n){y(e[n])&&y(r)?e[n]=t(e[n],r):y(r)?e[n]=t({},r):p(r)?e[n]=r.slice():e[n]=r}for(var n=0,o=arguments.length;n<o;n++)v(arguments[n],r);return e},extend:function(t,e,r){return v(e,(function(e,n){t[n]=r&&"function"==typeof e?h(e,r):e})),t},trim:function(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}};function E(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var T=function(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(b.isURLSearchParams(e))n=e.toString();else{var o=[];b.forEach(e,(function(t,e){null!=t&&(b.isArray(t)?e+="[]":t=[t],b.forEach(t,(function(t){b.isDate(t)?t=t.toISOString():b.isObject(t)&&(t=JSON.stringify(t)),o.push(E(e)+"="+E(t))})))})),n=o.join("&")}if(n){var i=t.indexOf("#");-1!==i&&(t=t.slice(0,i)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t};function _(){this.handlers=[]}_.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},_.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},_.prototype.forEach=function(t){b.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var x=_,A=function(t,e,r){return b.forEach(r,(function(r){t=r(t,e)})),t},O=function(t){return!(!t||!t.__CANCEL__)},S=function(t,e){b.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))},N=function(t,e,r,n,o){return function(t,e,r,n,o){return t.config=e,r&&(t.code=r),t.request=n,t.response=o,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}(new Error(t),e,r,n,o)},U=b.isStandardBrowserEnv()?{write:function(t,e,r,n,o,i){var a=[];a.push(t+"="+encodeURIComponent(e)),b.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),b.isString(n)&&a.push("path="+n),b.isString(o)&&a.push("domain="+o),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}},B=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"],C=b.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function n(t){var n=t;return e&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return t=n(window.location.href),function(e){var r=b.isString(e)?n(e):e;return r.protocol===t.protocol&&r.host===t.host}}():function(){return!0},R=function(t){return new Promise((function(e,r){var n=t.data,o=t.headers;b.isFormData(n)&&delete o["Content-Type"];var i=new XMLHttpRequest;if(t.auth){var a=t.auth.username||"",s=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.Authorization="Basic "+btoa(a+":"+s)}var u,c,f=(u=t.baseURL,c=t.url,u&&!/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(c)?function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}(u,c):c);if(i.open(t.method.toUpperCase(),T(f,t.params,t.paramsSerializer),!0),i.timeout=t.timeout,i.onreadystatechange=function(){if(i&&4===i.readyState&&(0!==i.status||i.responseURL&&0===i.responseURL.indexOf("file:"))){var n="getAllResponseHeaders"in i?function(t){var e,r,n,o={};return t?(b.forEach(t.split("\n"),(function(t){if(n=t.indexOf(":"),e=b.trim(t.substr(0,n)).toLowerCase(),r=b.trim(t.substr(n+1)),e){if(o[e]&&B.indexOf(e)>=0)return;o[e]="set-cookie"===e?(o[e]?o[e]:[]).concat([r]):o[e]?o[e]+", "+r:r}})),o):o}(i.getAllResponseHeaders()):null,o={data:t.responseType&&"text"!==t.responseType?i.response:i.responseText,status:i.status,statusText:i.statusText,headers:n,config:t,request:i};!function(t,e,r){var n=r.config.validateStatus;r.status&&n&&!n(r.status)?e(N("Request failed with status code "+r.status,r.config,null,r.request,r)):t(r)}(e,r,o),i=null}},i.onabort=function(){i&&(r(N("Request aborted",t,"ECONNABORTED",i)),i=null)},i.onerror=function(){r(N("Network Error",t,null,i)),i=null},i.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),r(N(e,t,"ECONNABORTED",i)),i=null},b.isStandardBrowserEnv()){var l=(t.withCredentials||C(f))&&t.xsrfCookieName?U.read(t.xsrfCookieName):void 0;l&&(o[t.xsrfHeaderName]=l)}if("setRequestHeader"in i&&b.forEach(o,(function(t,e){void 0===n&&"content-type"===e.toLowerCase()?delete o[e]:i.setRequestHeader(e,t)})),b.isUndefined(t.withCredentials)||(i.withCredentials=!!t.withCredentials),t.responseType)try{i.responseType=t.responseType}catch(e){if("json"!==t.responseType)throw e}"function"==typeof t.onDownloadProgress&&i.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&i.upload&&i.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){i&&(i.abort(),r(t),i=null)})),n||(n=null),i.send(n)}))},k={"Content-Type":"application/x-www-form-urlencoded"};function P(t,e){!b.isUndefined(t)&&b.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var I,j={adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(I=R),I),transformRequest:[function(t,e){return S(e,"Accept"),S(e,"Content-Type"),b.isFormData(t)||b.isArrayBuffer(t)||b.isBuffer(t)||b.isStream(t)||b.isFile(t)||b.isBlob(t)?t:b.isArrayBufferView(t)?t.buffer:b.isURLSearchParams(t)?(P(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):b.isObject(t)?(P(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(t){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300}};j.headers={common:{Accept:"application/json, text/plain, */*"}},b.forEach(["delete","get","head"],(function(t){j.headers[t]={}})),b.forEach(["post","put","patch"],(function(t){j.headers[t]=b.merge(k)}));var D=j;function L(t){t.cancelToken&&t.cancelToken.throwIfRequested()}var M=function(t){return L(t),t.headers=t.headers||{},t.data=A(t.data,t.headers,t.transformRequest),t.headers=b.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),b.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||D.adapter)(t).then((function(e){return L(t),e.data=A(e.data,e.headers,t.transformResponse),e}),(function(e){return O(e)||(L(t),e&&e.response&&(e.response.data=A(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},q=function(t,e){e=e||{};var r={},n=["url","method","data"],o=["headers","auth","proxy","params"],i=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function s(t,e){return b.isPlainObject(t)&&b.isPlainObject(e)?b.merge(t,e):b.isPlainObject(e)?b.merge({},e):b.isArray(e)?e.slice():e}function u(n){b.isUndefined(e[n])?b.isUndefined(t[n])||(r[n]=s(void 0,t[n])):r[n]=s(t[n],e[n])}b.forEach(n,(function(t){b.isUndefined(e[t])||(r[t]=s(void 0,e[t]))})),b.forEach(o,u),b.forEach(i,(function(n){b.isUndefined(e[n])?b.isUndefined(t[n])||(r[n]=s(void 0,t[n])):r[n]=s(void 0,e[n])})),b.forEach(a,(function(n){n in e?r[n]=s(t[n],e[n]):n in t&&(r[n]=s(void 0,t[n]))}));var c=n.concat(o).concat(i).concat(a),f=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===c.indexOf(t)}));return b.forEach(f,u),r};function F(t){this.defaults=t,this.interceptors={request:new x,response:new x}}F.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=q(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[M,void 0],r=Promise.resolve(t);for(this.interceptors.request.forEach((function(t){e.unshift(t.fulfilled,t.rejected)})),this.interceptors.response.forEach((function(t){e.push(t.fulfilled,t.rejected)}));e.length;)r=r.then(e.shift(),e.shift());return r},F.prototype.getUri=function(t){return t=q(this.defaults,t),T(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},b.forEach(["delete","get","head","options"],(function(t){F.prototype[t]=function(e,r){return this.request(q(r||{},{method:t,url:e,data:(r||{}).data}))}})),b.forEach(["post","put","patch"],(function(t){F.prototype[t]=function(e,r,n){return this.request(q(n||{},{method:t,url:e,data:r}))}}));var $=F;function H(t){this.message=t}H.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},H.prototype.__CANCEL__=!0;var G=H;function K(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var r=this;t((function(t){r.reason||(r.reason=new G(t),e(r.reason))}))}K.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},K.source=function(){var t;return{token:new K((function(e){t=e})),cancel:t}};var z=K;function V(t){var e=new $(t),r=h($.prototype.request,e);return b.extend(r,$.prototype,e),b.extend(r,e),r}var W=V(D);W.Axios=$,W.create=function(t){return V(q(W.defaults,t))},W.Cancel=G,W.CancelToken=z,W.isCancel=O,W.all=function(t){return Promise.all(t)},W.spread=function(t){return function(e){return t.apply(null,e)}},W.isAxiosError=function(t){return"object"==typeof t&&!0===t.isAxiosError};var J=W,X=W;J.default=X;for(var Z=J,Y=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(t)}applyConfig(t){this.config=this.mergeDefaults(t)}getConfig(){return this.config}mergeDefaults(t){const e=t.protocol||"http",r=t.port||("https"===e?443:80);return{host:t.host||"127.0.0.1",protocol:e,port:r,timeout:t.timeout||2e4,logging:t.logging||!1,logger:t.logger||console.log}}async get(t,e){try{return await this.request().get(t,e)}catch(t){if(t.response&&t.response.status)return t.response;throw t}}async post(t,e,r){try{return await this.request().post(t,e,r)}catch(t){if(t.response&&t.response.status)return t.response;throw t}}request(){let t=Z.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:536870912});return this.config.logging&&(t.interceptors.request.use((t=>(this.config.logger(`Requesting: ${t.baseURL}/${t.url}`),t))),t.interceptors.response.use((t=>(this.config.logger(`Response:   ${t.config.url} - ${t.status}`),t)))),t}}})),Q=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.api=t}getInfo(){return this.api.get("info").then((t=>t.data))}getPeers(){return this.api.get("peers").then((t=>t.data))}}})),tt=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getError=void 0;class r extends Error{constructor(t,e={}){e.message?super(e.message):super(),this.type=t,this.response=e.response}getType(){return this.type}}e.default=r,e.getError=function(t){let e=t.data;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(t){}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch(t){}return e?e.error||e:t.statusText||"unknown"}})),et=function(t){var e=ft(t),r=e[0],n=e[1];return 3*(r+n)/4-n},rt=function(t){var e,r,n=ft(t),o=n[0],i=n[1],a=new at(function(t,e,r){return 3*(e+r)/4-r}(0,o,i)),s=0,u=i>0?o-4:o;for(r=0;r<u;r+=4)e=it[t.charCodeAt(r)]<<18|it[t.charCodeAt(r+1)]<<12|it[t.charCodeAt(r+2)]<<6|it[t.charCodeAt(r+3)],a[s++]=e>>16&255,a[s++]=e>>8&255,a[s++]=255&e;2===i&&(e=it[t.charCodeAt(r)]<<2|it[t.charCodeAt(r+1)]>>4,a[s++]=255&e);1===i&&(e=it[t.charCodeAt(r)]<<10|it[t.charCodeAt(r+1)]<<4|it[t.charCodeAt(r+2)]>>2,a[s++]=e>>8&255,a[s++]=255&e);return a},nt=function(t){for(var e,r=t.length,n=r%3,o=[],i=16383,a=0,s=r-n;a<s;a+=i)o.push(lt(t,a,a+i>s?s:a+i));1===n?(e=t[r-1],o.push(ot[e>>2]+ot[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],o.push(ot[e>>10]+ot[e>>4&63]+ot[e<<2&63]+"="));return o.join("")},ot=[],it=[],at="undefined"!=typeof Uint8Array?Uint8Array:Array,st="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",ut=0,ct=st.length;ut<ct;++ut)ot[ut]=st[ut],it[st.charCodeAt(ut)]=ut;function ft(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function lt(t,e,r){for(var n,o,i=[],a=e;a<r;a+=3)n=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),i.push(ot[(o=n)>>18&63]+ot[o>>12&63]+ot[o>>6&63]+ot[63&o]);return i.join("")}it["-".charCodeAt(0)]=62,it["_".charCodeAt(0)]=63;var ht={byteLength:et,toByteArray:rt,fromByteArray:nt},dt=u((function(t,e){function r(t){if("undefined"==typeof TextEncoder){return(new(0,n.default.TextEncoder)).encode(t)}return(new TextEncoder).encode(t)}function o(t){return new Uint8Array(ht.toByteArray(u(t)))}function i(t){return ht.fromByteArray(new Uint8Array(t))}function a(t){return s(i(t))}function s(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function u(t){let e;return e=(t=t.replace(/\-/g,"+").replace(/\_/g,"/")).length%4==0?0:4-t.length%4,t.concat("=".repeat(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.b64UrlDecode=e.b64UrlEncode=e.bufferTob64Url=e.bufferTob64=e.b64UrlToBuffer=e.stringToB64Url=e.stringToBuffer=e.bufferToString=e.b64UrlToString=e.concatBuffers=void 0,e.concatBuffers=function(t){let e=0;for(let r=0;r<t.length;r++)e+=t[r].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let e=1;e<t.length;e++)r.set(new Uint8Array(t[e]),n),n+=t[e].byteLength;return r},e.b64UrlToString=function(t){let e=o(t);if("undefined"==typeof TextDecoder){return new(0,n.default.TextDecoder)("utf-8",{fatal:!0}).decode(e)}return new TextDecoder("utf-8",{fatal:!0}).decode(e)},e.bufferToString=function(t){if("undefined"==typeof TextDecoder){return new(0,n.default.TextDecoder)("utf-8",{fatal:!0}).decode(t)}return new TextDecoder("utf-8",{fatal:!0}).decode(t)},e.stringToBuffer=r,e.stringToB64Url=function(t){return a(r(t))},e.b64UrlToBuffer=o,e.bufferTob64=i,e.bufferTob64Url=a,e.b64UrlEncode=s,e.b64UrlDecode=u})),pt=u((function(t,e){async function r(t){if(Array.isArray(t)){const e=Tt.default.utils.concatBuffers([Tt.default.utils.stringToBuffer("list"),Tt.default.utils.stringToBuffer(t.length.toString())]);return await n(t,await Tt.default.crypto.hash(e,"SHA-384"))}const e=Tt.default.utils.concatBuffers([Tt.default.utils.stringToBuffer("blob"),Tt.default.utils.stringToBuffer(t.byteLength.toString())]),r=Tt.default.utils.concatBuffers([await Tt.default.crypto.hash(e,"SHA-384"),await Tt.default.crypto.hash(t,"SHA-384")]);return await Tt.default.crypto.hash(r,"SHA-384")}async function n(t,e){if(t.length<1)return e;const o=Tt.default.utils.concatBuffers([e,await r(t[0])]),i=await Tt.default.crypto.hash(o,"SHA-384");return await n(t.slice(1),i)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r})),gt=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.debug=e.validatePath=e.arrayCompare=e.bufferToInt=e.intToBuffer=e.arrayFlatten=e.generateProofs=e.buildLayers=e.generateTransactionChunks=e.generateTree=e.computeRootHash=e.generateLeaves=e.chunkData=e.MIN_CHUNK_SIZE=e.MAX_CHUNK_SIZE=void 0,e.MAX_CHUNK_SIZE=262144,e.MIN_CHUNK_SIZE=32768;const r=32;async function o(t){let r=[],n=t,o=0;for(;n.byteLength>=e.MAX_CHUNK_SIZE;){let t=e.MAX_CHUNK_SIZE,i=n.byteLength-e.MAX_CHUNK_SIZE;i>0&&i<e.MIN_CHUNK_SIZE&&(t=Math.ceil(n.byteLength/2));const a=n.slice(0,t),s=await Tt.default.crypto.hash(a);o+=a.byteLength,r.push({dataHash:s,minByteRange:o-a.byteLength,maxByteRange:o}),n=n.slice(t)}return r.push({dataHash:await Tt.default.crypto.hash(n),minByteRange:o,maxByteRange:o+n.byteLength}),r}async function i(t){return Promise.all(t.map((async({dataHash:t,minByteRange:e,maxByteRange:r})=>({type:"leaf",id:await h(await Promise.all([h(t),h(d(r))])),dataHash:t,minByteRange:e,maxByteRange:r}))))}async function a(t){return await s(await i(await o(t)))}async function s(t,e=0){if(t.length<2){return await l(t[0],t[1])}const r=[];for(let e=0;e<t.length;e+=2)r.push(await l(t[e],t[e+1]));return s(r,e+1)}function u(t){const e=c(t);return Array.isArray(e)?f(e):[e]}function c(t,e=new Uint8Array,r=0){if("leaf"==t.type)return{offset:t.maxByteRange-1,proof:dt.concatBuffers([e,t.dataHash,d(t.maxByteRange)])};if("branch"==t.type){const n=dt.concatBuffers([e,t.leftChild.id,t.rightChild.id,d(t.byteRange)]);return[c(t.leftChild,n,r+1),c(t.rightChild,n,r+1)]}throw new Error("Unexpected node type")}function f(t){const e=[];return t.forEach((t=>{Array.isArray(t)?e.push(...f(t)):e.push(t)})),e}async function l(t,e){if(!e)return t;return{type:"branch",id:await h([await h(t.id),await h(e.id),await h(d(t.maxByteRange))]),byteRange:t.maxByteRange,maxByteRange:e.maxByteRange,leftChild:t,rightChild:e}}async function h(t){return Array.isArray(t)&&(t=Tt.default.utils.concatBuffers(t)),new Uint8Array(await Tt.default.crypto.hash(t))}function d(t){const e=new Uint8Array(32);for(var r=e.length-1;r>=0;r--){var n=t%256;e[r]=n,t=(t-n)/256}return e}function p(t){let e=0;for(var r=0;r<t.length;r++)e*=256,e+=t[r];return e}e.chunkData=o,e.generateLeaves=i,e.computeRootHash=async function(t){return(await a(t)).id},e.generateTree=a,e.generateTransactionChunks=async function(t){const e=await o(t),r=await i(e),n=await s(r),a=await u(n),c=e.slice(-1)[0];return c.maxByteRange-c.minByteRange==0&&(e.splice(e.length-1,1),a.splice(a.length-1,1)),{data_root:n.id,chunks:e,proofs:a}},e.buildLayers=s,e.generateProofs=u,e.arrayFlatten=f,e.intToBuffer=d,e.bufferToInt=p,e.arrayCompare=(t,e)=>t.every(((t,r)=>e[r]===t)),e.validatePath=async function t(n,o,i,a,s){if(a<=0)return!1;if(o>=a)return t(n,0,a-1,a,s);if(o<0)return t(n,0,0,a,s);if(64==s.length){const t=s.slice(0,r),o=s.slice(t.length,t.length+32),u=await h([await h(t),await h(o)]);return!!e.arrayCompare(n,u)&&{offset:a-1,leftBound:i,rightBound:a,chunkSize:a-i}}const u=s.slice(0,r),c=s.slice(u.length,u.length+r),f=s.slice(u.length+c.length,u.length+c.length+32),l=p(f),d=s.slice(u.length+c.length+f.length),g=await h([await h(u),await h(c),await h(f)]);return!!e.arrayCompare(n,g)&&(o<l?await t(u,o,i,Math.min(a,l),d):await t(c,o,Math.max(i,l),a,d))},e.debug=async function t(e,o=""){if(e.byteLength<1)return o;const i=e.slice(0,r),a=e.slice(i.length,i.length+r),s=e.slice(i.length+a.length,i.length+a.length+32),u=p(s),c=e.slice(i.length+a.length+s.length),f=await h([await h(i),await h(a),await h(s)]);return t(c,`${o}\n${n.default.inspect(Buffer.from(i))},${n.default.inspect(Buffer.from(a))},${u} => ${n.default.inspect(f)}`)}})),wt=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Tag=void 0;class r{get(t,e){if(!Object.getOwnPropertyNames(this).includes(t))throw new Error(`Field "${t}" is not a property of the Arweave Transaction class.`);return this[t]instanceof Uint8Array?e&&e.decode&&e.string?dt.bufferToString(this[t]):e&&e.decode&&!e.string?this[t]:dt.bufferTob64Url(this[t]):e&&1==e.decode?e&&e.string?dt.b64UrlToString(this[t]):dt.b64UrlToBuffer(this[t]):this[t]}}class n extends r{constructor(t,e,r=!1){super(),this.name=t,this.value=e}}e.Tag=n;e.default=class extends r{constructor(t={}){super(),this.format=2,this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data_size="0",this.data=new Uint8Array,this.data_root="",this.reward="0",this.signature="",Object.assign(this,t),"string"==typeof this.data&&(this.data=dt.b64UrlToBuffer(this.data)),t.tags&&(this.tags=t.tags.map((t=>new n(t.name,t.value))))}addTag(t,e){this.tags.push(new n(dt.stringToB64Url(t),dt.stringToB64Url(e)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:dt.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setSignature({signature:t,id:e}){this.signature=t,this.id=e}async prepareChunks(t){!this.chunks&&t.byteLength>0&&(this.chunks=await gt.generateTransactionChunks(t),this.data_root=dt.bufferTob64Url(this.chunks.data_root)),this.chunks||0!==t.byteLength||(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(t,e){if(!this.chunks)throw new Error("Chunks have not been prepared");const r=this.chunks.proofs[t],n=this.chunks.chunks[t];return{data_root:this.data_root,data_size:this.data_size,data_path:dt.bufferTob64Url(r.proof),offset:r.offset.toString(),chunk:dt.bufferTob64Url(e.slice(n.minByteRange,n.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let t=this.tags.reduce(((t,e)=>dt.concatBuffers([t,e.get("name",{decode:!0,string:!1}),e.get("value",{decode:!0,string:!1})])),new Uint8Array);return dt.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),dt.stringToBuffer(this.quantity),dt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),t]);case 2:await this.prepareChunks(this.data);const e=this.tags.map((t=>[t.get("name",{decode:!0,string:!1}),t.get("value",{decode:!0,string:!1})]));return await pt.default([dt.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),dt.stringToBuffer(this.quantity),dt.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),e,dt.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error("Unexpected transaction format: "+this.format)}}}})),yt=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.TransactionUploader=void 0;const r=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"];class n{constructor(t,e){if(this.api=t,this.chunkIndex=0,this.txPosted=!1,this.lastRequestTimeEnd=0,this.totalErrors=0,this.lastResponseStatus=0,this.lastResponseError="",!e.id)throw new Error("Transaction is not signed");if(!e.chunks)throw new Error("Transaction chunks not prepared");this.data=e.data,this.transaction=new wt.default(Object.assign({},e,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(){if(this.isComplete)throw new Error("Upload is already complete");if(""!==this.lastResponseError?this.totalErrors++:this.totalErrors=0,100===this.totalErrors)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let t=""===this.lastResponseError?0:Math.max(this.lastRequestTimeEnd+4e4-Date.now(),4e4);if(t>0&&(t-=t*Math.random()*.3,await new Promise((e=>setTimeout(e,t)))),this.lastResponseError="",!this.txPosted)return void await this.postTransaction();const e=this.transaction.getChunk(this.chunkIndex,this.data);if(!await gt.validatePath(this.transaction.chunks.data_root,parseInt(e.offset),0,parseInt(e.data_size),dt.b64UrlToBuffer(e.data_path)))throw new Error("Unable to validate chunk "+this.chunkIndex);const n=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch((t=>(console.error(t.message),{status:-1,data:{error:t.message}})));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=n.status,200==this.lastResponseStatus)this.chunkIndex++;else if(this.lastResponseError=tt.getError(n),r.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(t,e,r){if(!e||"number"!=typeof e.chunkIndex||"object"!=typeof e.transaction)throw new Error("Serialized object does not match expected format.");const o=new n(t,new wt.default(e.transaction));if(o.chunkIndex=e.chunkIndex,o.lastRequestTimeEnd=e.lastRequestTimeEnd,o.lastResponseError=e.lastResponseError,o.lastResponseStatus=e.lastResponseStatus,o.txPosted=e.txPosted,o.data=r,await o.transaction.prepareChunks(r),o.transaction.data_root!==e.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return o}static async fromTransactionId(t,e){const r=await t.get("tx/"+e);if(200!==r.status)throw new Error(`Tx ${e} not found: ${r.status}`);const n=r.data;n.data=new Uint8Array(0);return{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:n}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=1){this.transaction.data=this.data;const t=await this.api.post("tx",this.transaction).catch((t=>(console.error(t),{status:-1,data:{error:t.message}})));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,this.transaction.data=new Uint8Array(0),t.status>=200&&t.status<300)return this.txPosted=!0,void(this.chunkIndex=1);throw this.lastResponseError=tt.getError(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`)}const t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=tt.getError(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}}e.TransactionUploader=n})),mt=u((function(t,e){var r=a&&a.__await||function(t){return this instanceof r?(this.v=t,this):new r(t)},n=a&&a.__asyncGenerator||function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,i=n.apply(t,e||[]),a=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(t){i[t]&&(o[t]=function(e){return new Promise((function(r,n){a.push([t,e,r,n])>1||u(t,e)}))})}function u(t,e){try{(n=i[t](e)).value instanceof r?Promise.resolve(n.value.v).then(c,f):l(a[0][2],n)}catch(t){l(a[0][3],t)}var n}function c(t){u("next",t)}function f(t){u("throw",t)}function l(t,e){t(e),a.shift(),a.length&&u(a[0][0],a[0][1])}};Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e,r){this.api=t,this.crypto=e,this.chunks=r}getTransactionAnchor(){return this.api.get("tx_anchor").then((t=>t.data))}getPrice(t,e){let r=e?`price/${t}/${e}`:"price/"+t;return this.api.get(r,{transformResponse:[function(t){return t}]}).then((t=>t.data))}async get(t){const e=await this.api.get("tx/"+t);if(200==e.status){const r=parseInt(e.data.data_size);if(e.data.format>=2&&r>0&&r<=12582912){const r=await this.getData(t);return new wt.default(Object.assign(Object.assign({},e.data),{data:r}))}return new wt.default(Object.assign(Object.assign({},e.data),{format:e.data.format||1}))}if(202==e.status)throw new tt.default("TX_PENDING");if(404==e.status)throw new tt.default("TX_NOT_FOUND");if(410==e.status)throw new tt.default("TX_FAILED");throw new tt.default("TX_INVALID")}fromRaw(t){return new wt.default(t)}async search(t,e){return this.api.post("arql",{op:"equals",expr1:t,expr2:e}).then((t=>t.data?t.data:[]))}getStatus(t){return this.api.get(`tx/${t}/status`).then((t=>200==t.status?{status:200,confirmed:t.data}:{status:t.status,confirmed:null}))}async getData(t,e){const r=await this.api.get(""+t,{responseType:"arraybuffer"});let n=void 0;if(200===r.status&&(n=new Uint8Array(r.data)),400===r.status&&"tx_data_too_big"===tt.getError(r)&&(n=await this.chunks.downloadChunkedData(t)),!n){if(202==r.status)throw new tt.default("TX_PENDING");if(404==r.status)throw new tt.default("TX_NOT_FOUND");if(410==r.status)throw new tt.default("TX_FAILED");throw new Error(`Unable to get data: ${r.status} - ${tt.getError(r)}`)}return e&&e.decode&&!e.string?n:e&&e.decode&&e.string?dt.bufferToString(n):dt.bufferTob64Url(n)}async sign(t,e,r){let n=await t.getSignatureData(),o=await this.crypto.sign(e,n,r),i=await this.crypto.hash(o);t.setSignature({signature:dt.bufferTob64Url(o),id:dt.bufferTob64Url(i)})}async verify(t){const e=await t.getSignatureData(),r=t.get("signature",{decode:!0,string:!1}),n=dt.bufferTob64Url(await this.crypto.hash(r));if(t.id!==n)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(t.owner,e,r)}async post(t){if("string"==typeof t?t=new wt.default(JSON.parse(t)):"function"==typeof t.readInt32BE?t=new wt.default(JSON.parse(t.toString())):"object"!=typeof t||t instanceof wt.default||(t=new wt.default(t)),!(t instanceof wt.default))throw new Error("Must be Transaction object");t.chunks||await t.prepareChunks(t.data);const e=await this.getUploader(t);try{for(;!e.isComplete;)await e.uploadChunk()}catch(t){if(e.lastResponseStatus>0)return{status:e.lastResponseStatus,statusText:e.lastResponseError,data:{error:e.lastResponseError}};throw t}return{status:200,statusText:"OK",data:{}}}async getUploader(t,e){let r;if(t instanceof wt.default)r=new yt.TransactionUploader(this.api,t);else{if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),!(e&&e instanceof Uint8Array))throw new Error("Must provide data when resuming upload");"string"==typeof t&&(t=await yt.TransactionUploader.fromTransactionId(this.api,t)),r=await yt.TransactionUploader.fromSerialized(this.api,t,e)}return r}upload(t,e){return n(this,arguments,(function*(){const n=yield r(this.getUploader(t,e));for(;!n.isComplete;)yield r(n.uploadChunk()),yield yield r(n);return yield r(n)}))}}})),vt=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t,e){this.api=t,this.crypto=e}getBalance(t){return this.api.get(`wallet/${t}/balance`,{transformResponse:[function(t){return t}]}).then((t=>t.data))}getLastTransactionID(t){return this.api.get(`wallet/${t}/last_tx`).then((t=>t.data))}generate(){return this.crypto.generateJWK()}async jwkToAddress(t){return this.ownerToAddress(t.n)}async ownerToAddress(t){return dt.bufferTob64Url(await this.crypto.hash(dt.b64UrlToBuffer(t)))}}})),bt=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SiloResource=void 0;e.default=class{constructor(t,e,r){this.api=t,this.crypto=e,this.transactions=r}async get(t){if(!t)throw new Error("No Silo URI specified");const e=await this.parseUri(t),r=await this.transactions.search("Silo-Name",e.getAccessKey());if(0==r.length)throw new Error("No data could be found for the Silo URI: "+t);const n=await this.transactions.get(r[0]);if(!n)throw new Error("No data could be found for the Silo URI: "+t);const o=n.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,e.getEncryptionKey())}async readTransactionData(t,e){if(!e)throw new Error("No Silo URI specified");const r=await this.parseUri(e),n=t.get("data",{decode:!0,string:!1});return this.crypto.decrypt(n,r.getEncryptionKey())}async parseUri(t){const e=t.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!e)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const n=e[1],o=Math.pow(2,parseInt(e[2])),i=await this.hash(dt.stringToBuffer(n),o),a=dt.bufferTob64(i.slice(0,15)),s=await this.hash(i.slice(16,31),1);return new r(t,a,s)}async hash(t,e){let r=await this.crypto.hash(t);for(let t=0;t<e-1;t++)r=await this.crypto.hash(r);return r}};class r{constructor(t,e,r){this.uri=t,this.accessKey=e,this.encryptionKey=r}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}e.SiloResource=r})),Et=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(t){this.api=t}async getTransactionOffset(t){const e=await this.api.get(`tx/${t}/offset`);if(200===e.status)return e.data;throw new Error("Unable to get transaction offset: "+tt.getError(e))}async getChunk(t){const e=await this.api.get("chunk/"+t);if(200===e.status)return e.data;throw new Error("Unable to get chunk: "+tt.getError(e))}async getChunkData(t){const e=await this.getChunk(t);return dt.b64UrlToBuffer(e.chunk)}firstChunkOffset(t){return parseInt(t.offset)-parseInt(t.size)+1}async downloadChunkedData(t){const e=await this.getTransactionOffset(t),r=parseInt(e.size),n=parseInt(e.offset),o=n-r+1,i=new Uint8Array(r);let a=0;for(;o+a<n;){const t=await this.getChunkData(o+a);i.set(t,a),a+=t.length}return i}}})),Tt=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r{constructor(t){this.api=new Y.default(t),this.wallets=new vt.default(this.api,r.crypto),this.chunks=new Et.default(this.api),this.transactions=new mt.default(this.api,r.crypto,this.chunks),this.silo=new bt.default(this.api,this.crypto,this.transactions),this.network=new Q.default(this.api),this.ar=new l.default}get crypto(){return r.crypto}get utils(){return r.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(t,e){const r={};if(Object.assign(r,t),!(t.data||t.target&&t.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(null==t.owner){if(!e||!e.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");r.owner=e.n}if(null==t.last_tx&&(r.last_tx=await this.transactions.getTransactionAnchor()),"string"==typeof t.data&&(t.data=dt.stringToBuffer(t.data)),t.data instanceof ArrayBuffer&&(t.data=new Uint8Array(t.data)),t.data&&!(t.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(null==t.reward){const e=t.data?t.data.byteLength:0;r.reward=await this.transactions.getPrice(e,r.target)}r.data_root="",r.data_size=t.data?t.data.byteLength.toString():"0",r.data=t.data||new Uint8Array(0);const n=new wt.default(r);return await n.getSignatureData(),n}async createSiloTransaction(t,e,r){const n={};if(Object.assign(n,t),!t.data)throw new Error("Silo transactions must have a 'data' value");if(!r)throw new Error("No Silo URI specified.");if(t.target||t.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(null==t.owner){if(!e||!e.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");n.owner=e.n}null==t.last_tx&&(n.last_tx=await this.transactions.getTransactionAnchor());const o=await this.silo.parseUri(r);if("string"==typeof t.data){const e=await this.crypto.encrypt(dt.stringToBuffer(t.data),o.getEncryptionKey());n.reward=await this.transactions.getPrice(e.byteLength),n.data=dt.bufferTob64Url(e)}if(t.data instanceof Uint8Array){const e=await this.crypto.encrypt(t.data,o.getEncryptionKey());n.reward=await this.transactions.getPrice(e.byteLength),n.data=dt.bufferTob64Url(e)}const i=new wt.default(n);return i.addTag("Silo-Name",o.getAccessKey()),i.addTag("Silo-Version","0.1.0"),i}arql(t){return this.api.post("/arql",t).then((t=>t.data||[]))}}e.default=r,r.utils=dt})),_t=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});e.default=class{constructor(){if(this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let t=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),e=await this.driver.exportKey("jwk",t.privateKey);return{kty:e.kty,e:e.e,n:e.n,d:e.d,p:e.p,q:e.q,dp:e.dp,dq:e.dq,qi:e.qi}}async sign(t,e,{saltLength:r}={}){let n=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(t),e);return new Uint8Array(n)}async hash(t,e="SHA-256"){let r=await this.driver.digest(e,t);return new Uint8Array(r)}async verify(t,e,r){const n={kty:"RSA",e:"AQAB",n:t},o=await this.jwkToPublicCryptoKey(n),i=this.driver.verify({name:"RSA-PSS",saltLength:32},o,r,e),a=this.driver.verify({name:"RSA-PSS",saltLength:0},o,r,e);return i||a}async jwkToCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if("undefined"==typeof crypto)return!1;const t=null===crypto||void 0===crypto?void 0:crypto.subtle;if(void 0===t)return!1;return["generateKey","importKey","exportKey","digest","sign"].every((e=>"function"==typeof t[e]))}async encrypt(t,e){const r=await this.driver.importKey("raw","string"==typeof e?dt.stringToBuffer(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),n=dt.stringToBuffer("salt"),o=await this.driver.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},r,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),i=new Uint8Array(16);crypto.getRandomValues(i);const a=await this.driver.encrypt({name:"AES-CBC",iv:i},o,t);return dt.concatBuffers([i,a])}async decrypt(t,e){const r=await this.driver.importKey("raw","string"==typeof e?dt.stringToBuffer(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),n=dt.stringToBuffer("salt"),o=await this.driver.deriveKey({name:"PBKDF2",salt:n,iterations:1e5,hash:"SHA-256"},r,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),i=t.slice(0,16),a=await this.driver.decrypt({name:"AES-CBC",iv:i},o,t.slice(16));return dt.concatBuffers([a])}}})),xt=s(u((function(t,e){var r=a&&a.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),n=a&&a.__exportStar||function(t,e){for(var n in t)"default"===n||e.hasOwnProperty(n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),Tt.default.crypto=new _t.default,Tt.default.init=function(t={}){const e=function(){const t={host:"arweave.net",port:443,protocol:"https"};if(!(window&&window.location&&window.location.protocol&&window.location.hostname))return t;const e=window.location.protocol.replace(":",""),r=window.location.hostname,n=window.location.port?parseInt(window.location.port):"https"==e?443:80;return["localhost","127.0.0.1"].includes(r)||"file"==e?t:{host:r,port:n,protocol:e}}(),r=t.protocol||e.protocol,n=t.host||e.host,o=t.port||e.port;return new Tt.default(Object.assign(Object.assign({},t),{host:n,protocol:r,port:o}))},window.Arweave=Tt.default,n(Tt,e),e.default=Tt.default})));function At(t,e){if(Number.isInteger(e)){let t=new Uint8Array(16);new DataView(t.buffer).setBigUint64(0,BigInt(e),!0),e=t}if(e instanceof Uint8Array)switch(t){case"keccak256":default:throw new Error("not implemented yet")}throw new TypeError}class Ot extends Error{constructor(t){super(t),Object.setPrototypeOf(this,Ot.prototype)}}class St extends Error{constructor(t){super(""),this.value=t,Object.setPrototypeOf(this,St.prototype)}}function Nt(t){return t instanceof St}function Ut(t){return t===Rt}function Bt(t){return!(t instanceof St)}function Ct(t){return t!==Rt}const Rt=null;function kt(t){return t}var Pt=Object.freeze({__proto__:null,SmartWeave:null,Panic:Ot,Err:St,requireVersion:function(t){},requireFeature:function(t){},add:function(...t){return t.reduce(((t,e)=>t+e),0)},sub:function(...t){return t.slice(1).reduce(((t,e)=>t-e),t[0])},mul:function(...t){return t.reduce(((t,e)=>t*e),1)},div:function(...t){return Math.trunc(t.slice(1).reduce(((t,e)=>t/e),t[0]))},lt:function(t,e){return t<e},le:function(t,e){return t<=e},gt:function(t,e){return t>e},ge:function(t,e){return t>=e},append:function(t,e){return[...t,e]},asContract:function(t){throw new Error("as-contract not supported")},asMaxLen:function(t,e){return t.length<=e?t:Rt},atBlock:function(t,e){throw new Error("not implemented yet")},blockHeight:function(){throw new Error("block-height not supported")},concat:function(t,e){if(t instanceof Array&&e instanceof Array)return[].concat(t,e);if(t instanceof Uint8Array&&e instanceof Uint8Array){const r=new Uint8Array(t.byteLength+e.byteLength);return r.set(t,0),r.set(e,t.byteLength),r}throw new TypeError},contractCall:function(t,e,...r){throw new Error("not implemented yet")},contractCaller:function(){throw new Error("contract-caller not supported")},contractOf:function(t){throw new Error("not implemented yet")},defaultTo:function(t,e){return null!=e?e:t},err:function(t){return new St(t)},filter:function(t,e){if(e instanceof Array)return e.filter(t);throw new TypeError},fold:function(t,e,r){if(e instanceof Array)return e.reduce(((e,r)=>t(r,e)),r);throw new TypeError},ftGetBalance:function(t,e){throw new Error("not implemented yet")},ftMint:function(t,e,r){throw new Error("not implemented yet")},ftTransfer:function(t,e,r,n){throw new Error("not implemented yet")},get:function(t,e){return Ut(e)?Rt:e.get(t)},getBlockInfo:function(t,e){throw new Error("not implemented yet")},hash160:function(t){if(Number.isInteger(t)){let e=new Uint8Array(16);new DataView(e.buffer).setBigUint64(0,BigInt(t),!0),t=e}if(t instanceof Uint8Array)throw new Error("not implemented yet");throw new TypeError},isEq:function(...t){if(t.length>0&&t.every((e=>typeof e==typeof t[0])))return t.every((e=>e===t[0]));throw new TypeError},isErr:Nt,isNone:Ut,isOk:Bt,isSome:Ct,keccak256:function(t){return At("keccak256",t)},len:function(t){return t.length},list:function(...t){if(t.length>0&&t.some((e=>typeof e!=typeof t[0])))throw new TypeError;return t},map:function(t,e){if(e instanceof Array)return e.map(t);throw new TypeError},mapDelete:function(t,e){return t.delete(e)},mapGet:function(t,e){const r=t.get(e);return r||Rt},mapInsert:function(t,e,r){return!t.has(e)&&(t.set(e,r),!0)},mapSet:function(t,e,r){return t.set(e,r),!0},match:function(t,e,r){return Ut(t)||Nt(t)?r(t):e(t)},mod:function(t,e){if(0===e)throw new RangeError("division by zero");return t%e},nftGetOwner:function(t,e){throw new Error("not implemented yet")},nftMint:function(t,e,r){throw new Error("not implemented yet")},nftTransfer:function(t,e,r,n){throw new Error("not implemented yet")},none:Rt,not:function(t){return!t},ok:function(t){return t},pow:function(t,e){return Math.pow(t,e)},print:function(t){return console.log(t),t},sha256:function(t){return At("sha256",t)},sha512:function(t){return At("sha512",t)},sha512_256:function(t){return At("sha512-256",t)},some:kt,toInt:function(t){return t},toUint:function(t){return t},tryUnwrap:function(t){return Ct(t)||Bt(t)?t:Nt(t)?t.value:Rt},tuple:function(...t){return t.reduce(((t,[e,r])=>t.set(e,r)),new Map)},txSender:function(){throw new Error("tx-sender not supported")},unwrap:function(t,e){return Ut(t)||Nt(t)?e:t},unwrapErr:function(t,e){return Nt(t)?t.value:e},unwrapErrPanic:function(t){if(Nt(t))return t.value;throw new Ot("unwrapErrPanic")},unwrapPanic:function(t){if(Ut(t)||Nt(t))throw new Ot("unwrapPanic");return t},xor:function(t,e){return t^e}}),It=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.log=e.arrayToHex=e.formatTags=e.unpackTags=e.getTag=void 0,e.getTag=function(t,e){const r=t.get("tags");for(const t of r)try{if(t.get("name",{decode:!0,string:!0})===e)return t.get("value",{decode:!0,string:!0})}catch(t){}return!1},e.unpackTags=function(t){const e=t.get("tags"),r={};for(const t of e)try{const e=t.get("name",{decode:!0,string:!0}),n=t.get("value",{decode:!0,string:!0});if(!r.hasOwnProperty(e)){r[e]=n;continue}r[e]=[...r[e],n]}catch(t){}return r},e.formatTags=function(t){const e={};for(const r of t){const{name:t,value:n}=r;e.hasOwnProperty(t)?e[t]=[...e[t],n]:e[t]=n}return e},e.arrayToHex=function(t){let e="";for(const r of t)e+=("0"+r.toString(16)).slice(-2);return e},e.log=function(t,...e){t&&t.getConfig().api.logging&&("function"==typeof t.getConfig().api.logger?t.getConfig().api.logger(...e):console.log(...e))}})),jt=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SmartWeaveGlobal=void 0;e.SmartWeaveGlobal=class{constructor(t,e){this.unsafeClient=t,this.arweave={ar:t.ar,utils:t.utils,wallets:t.wallets,crypto:t.crypto},this.contract=e,this.transaction=new r(this),this.block=new n(this),this.contracts={readContractState:(e,r)=>$t.readContract(t,e,r||(this._isDryRunning?Number.POSITIVE_INFINITY:this.block.height))}}get _isDryRunning(){return!this._activeTx}};class r{constructor(t){this.global=t}get id(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.id}get owner(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.owner.address}get target(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.recipient}get tags(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.tags}get quantity(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.quantity.winston}get reward(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.fee.winston}}class n{constructor(t){this.global=t}get height(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.block.height}get indep_hash(){if(!this.global._activeTx)throw new Error("No current Tx");return this.global._activeTx.block.id}}})),Dt=u((function(t){!function(e){var r,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,o=Math.ceil,i=Math.floor,a="[BigNumber Error] ",s=a+"Number primitive has more than 15 significant digits: ",u=1e14,c=14,f=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,d=1e9;function p(t){var e=0|t;return t>0||t===e?e:e-1}function g(t){for(var e,r,n=1,o=t.length,i=t[0]+"";n<o;){for(e=t[n++]+"",r=c-e.length;r--;e="0"+e);i+=e}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function w(t,e){var r,n,o=t.c,i=e.c,a=t.s,s=e.s,u=t.e,c=e.e;if(!a||!s)return null;if(r=o&&!o[0],n=i&&!i[0],r||n)return r?n?0:-s:a;if(a!=s)return a;if(r=a<0,n=u==c,!o||!i)return n?0:!o^r?1:-1;if(!n)return u>c^r?1:-1;for(s=(u=o.length)<(c=i.length)?u:c,a=0;a<s;a++)if(o[a]!=i[a])return o[a]>i[a]^r?1:-1;return u==c?0:u>c^r?1:-1}function y(t,e,r,n){if(t<e||t>r||t!==i(t))throw Error(a+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function m(t){var e=t.c.length-1;return p(t.e/c)==e&&t.c[e]%2!=0}function v(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function b(t,e,r){var n,o;if(e<0){for(o=r+".";++e;o+=r);t=o+t}else if(++e>(n=t.length)){for(o=r,e-=n;--e;o+=r);t+=o}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}(r=function t(e){var r,E,T,_,x,A,O,S,N,U,B=H.prototype={constructor:H,toString:null,valueOf:null},C=new H(1),R=20,k=4,P=-7,I=21,j=-1e7,D=1e7,L=!1,M=1,q=0,F={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},$="0123456789abcdefghijklmnopqrstuvwxyz";function H(t,e){var r,o,a,u,l,h,d,p,g=this;if(!(g instanceof H))return new H(t,e);if(null==e){if(t&&!0===t._isBigNumber)return g.s=t.s,void(!t.c||t.e>D?g.c=g.e=null:t.e<j?g.c=[g.e=0]:(g.e=t.e,g.c=t.c.slice()));if((h="number"==typeof t)&&0*t==0){if(g.s=1/t<0?(t=-t,-1):1,t===~~t){for(u=0,l=t;l>=10;l/=10,u++);return void(u>D?g.c=g.e=null:(g.e=u,g.c=[t]))}p=String(t)}else{if(!n.test(p=String(t)))return T(g,p,h);g.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(u=p.indexOf("."))>-1&&(p=p.replace(".","")),(l=p.search(/e/i))>0?(u<0&&(u=l),u+=+p.slice(l+1),p=p.substring(0,l)):u<0&&(u=p.length)}else{if(y(e,2,$.length,"Base"),10==e)return V(g=new H(t),R+g.e+1,k);if(p=String(t),h="number"==typeof t){if(0*t!=0)return T(g,p,h,e);if(g.s=1/t<0?(p=p.slice(1),-1):1,H.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(s+t)}else g.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(r=$.slice(0,e),u=l=0,d=p.length;l<d;l++)if(r.indexOf(o=p.charAt(l))<0){if("."==o){if(l>u){u=d;continue}}else if(!a&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){a=!0,l=-1,u=0;continue}return T(g,String(t),h,e)}h=!1,(u=(p=E(p,e,10,g.s)).indexOf("."))>-1?p=p.replace(".",""):u=p.length}for(l=0;48===p.charCodeAt(l);l++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(l,++d)){if(d-=l,h&&H.DEBUG&&d>15&&(t>f||t!==i(t)))throw Error(s+g.s*t);if((u=u-l-1)>D)g.c=g.e=null;else if(u<j)g.c=[g.e=0];else{if(g.e=u,g.c=[],l=(u+1)%c,u<0&&(l+=c),l<d){for(l&&g.c.push(+p.slice(0,l)),d-=c;l<d;)g.c.push(+p.slice(l,l+=c));l=c-(p=p.slice(l)).length}else l-=d;for(;l--;p+="0");g.c.push(+p)}}else g.c=[g.e=0]}function G(t,e,r,n){var o,i,a,s,u;if(null==r?r=k:y(r,0,8),!t.c)return t.toString();if(o=t.c[0],a=t.e,null==e)u=g(t.c),u=1==n||2==n&&(a<=P||a>=I)?v(u,a):b(u,a,"0");else if(i=(t=V(new H(t),e,r)).e,s=(u=g(t.c)).length,1==n||2==n&&(e<=i||i<=P)){for(;s<e;u+="0",s++);u=v(u,i)}else if(e-=a,u=b(u,i,"0"),i+1>s){if(--e>0)for(u+=".";e--;u+="0");}else if((e+=i-s)>0)for(i+1==s&&(u+=".");e--;u+="0");return t.s<0&&o?"-"+u:u}function K(t,e){for(var r,n=1,o=new H(t[0]);n<t.length;n++){if(!(r=new H(t[n])).s){o=r;break}e.call(o,r)&&(o=r)}return o}function z(t,e,r){for(var n=1,o=e.length;!e[--o];e.pop());for(o=e[0];o>=10;o/=10,n++);return(r=n+r*c-1)>D?t.c=t.e=null:r<j?t.c=[t.e=0]:(t.e=r,t.c=e),t}function V(t,e,r,n){var a,s,f,h,d,p,g,w=t.c,y=l;if(w){t:{for(a=1,h=w[0];h>=10;h/=10,a++);if((s=e-a)<0)s+=c,f=e,g=(d=w[p=0])/y[a-f-1]%10|0;else if((p=o((s+1)/c))>=w.length){if(!n)break t;for(;w.length<=p;w.push(0));d=g=0,a=1,f=(s%=c)-c+1}else{for(d=h=w[p],a=1;h>=10;h/=10,a++);g=(f=(s%=c)-c+a)<0?0:d/y[a-f-1]%10|0}if(n=n||e<0||null!=w[p+1]||(f<0?d:d%y[a-f-1]),n=r<4?(g||n)&&(0==r||r==(t.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(s>0?f>0?d/y[a-f]:0:w[p-1])%10&1||r==(t.s<0?8:7)),e<1||!w[0])return w.length=0,n?(e-=t.e+1,w[0]=y[(c-e%c)%c],t.e=-e||0):w[0]=t.e=0,t;if(0==s?(w.length=p,h=1,p--):(w.length=p+1,h=y[c-s],w[p]=f>0?i(d/y[a-f]%y[f])*h:0),n)for(;;){if(0==p){for(s=1,f=w[0];f>=10;f/=10,s++);for(f=w[0]+=h,h=1;f>=10;f/=10,h++);s!=h&&(t.e++,w[0]==u&&(w[0]=1));break}if(w[p]+=h,w[p]!=u)break;w[p--]=0,h=1}for(s=w.length;0===w[--s];w.pop());}t.e>D?t.c=t.e=null:t.e<j&&(t.c=[t.e=0])}return t}function W(t){var e,r=t.e;return null===r?t.toString():(e=g(t.c),e=r<=P||r>=I?v(e,r):b(e,r,"0"),t.s<0?"-"+e:e)}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(a+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(y(r=t[e],0,d,e),R=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(y(r=t[e],0,8,e),k=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(y(r[0],-d,0,e),y(r[1],0,d,e),P=r[0],I=r[1]):(y(r,-d,d,e),P=-(I=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if((r=t[e])&&r.pop)y(r[0],-d,-1,e),y(r[1],1,d,e),j=r[0],D=r[1];else{if(y(r,-d,d,e),!r)throw Error(a+e+" cannot be zero: "+r);j=-(D=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(a+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw L=!r,Error(a+"crypto unavailable");L=r}else L=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(y(r=t[e],0,9,e),M=r),t.hasOwnProperty(e="POW_PRECISION")&&(y(r=t[e],0,d,e),q=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(a+e+" not an object: "+r);F=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(a+e+" invalid: "+r);$=r}}return{DECIMAL_PLACES:R,ROUNDING_MODE:k,EXPONENTIAL_AT:[P,I],RANGE:[j,D],CRYPTO:L,MODULO_MODE:M,POW_PRECISION:q,FORMAT:F,ALPHABET:$}},H.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!H.DEBUG)return!0;var e,r,n=t.c,o=t.e,s=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&o>=-d&&o<=d&&o===i(o)){if(0===n[0]){if(0===o&&1===n.length)return!0;break t}if((e=(o+1)%c)<1&&(e+=c),String(n[0]).length==e){for(e=0;e<n.length;e++)if((r=n[e])<0||r>=u||r!==i(r))break t;if(0!==r)return!0}}}else if(null===n&&null===o&&(null===s||1===s||-1===s))return!0;throw Error(a+"Invalid BigNumber: "+t)},H.maximum=H.max=function(){return K(arguments,B.lt)},H.minimum=H.min=function(){return K(arguments,B.gt)},H.random=(_=9007199254740992,x=Math.random()*_&2097151?function(){return i(Math.random()*_)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,r,n,s,u,f=0,h=[],p=new H(C);if(null==t?t=R:y(t,0,d),s=o(t/c),L)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(s*=2));f<s;)(u=131072*e[f]+(e[f+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),e[f]=r[0],e[f+1]=r[1]):(h.push(u%1e14),f+=2);f=s/2}else{if(!crypto.randomBytes)throw L=!1,Error(a+"crypto unavailable");for(e=crypto.randomBytes(s*=7);f<s;)(u=281474976710656*(31&e[f])+1099511627776*e[f+1]+4294967296*e[f+2]+16777216*e[f+3]+(e[f+4]<<16)+(e[f+5]<<8)+e[f+6])>=9e15?crypto.randomBytes(7).copy(e,f):(h.push(u%1e14),f+=7);f=s/7}if(!L)for(;f<s;)(u=x())<9e15&&(h[f++]=u%1e14);for(s=h[--f],t%=c,s&&t&&(u=l[c-t],h[f]=i(s/u)*u);0===h[f];h.pop(),f--);if(f<0)h=[n=0];else{for(n=-1;0===h[0];h.splice(0,1),n-=c);for(f=1,u=h[0];u>=10;u/=10,f++);f<c&&(n-=c-f)}return p.e=n,p.c=h,p}),H.sum=function(){for(var t=1,e=arguments,r=new H(e[0]);t<e.length;)r=r.plus(e[t++]);return r},E=function(){var t="0123456789";function e(t,e,r,n){for(var o,i,a=[0],s=0,u=t.length;s<u;){for(i=a.length;i--;a[i]*=e);for(a[0]+=n.indexOf(t.charAt(s++)),o=0;o<a.length;o++)a[o]>r-1&&(null==a[o+1]&&(a[o+1]=0),a[o+1]+=a[o]/r|0,a[o]%=r)}return a.reverse()}return function(n,o,i,a,s){var u,c,f,l,h,d,p,w,y=n.indexOf("."),m=R,v=k;for(y>=0&&(l=q,q=0,n=n.replace(".",""),d=(w=new H(o)).pow(n.length-y),q=l,w.c=e(b(g(d.c),d.e,"0"),10,i,t),w.e=w.c.length),f=l=(p=e(n,o,i,s?(u=$,t):(u=t,$))).length;0==p[--l];p.pop());if(!p[0])return u.charAt(0);if(y<0?--f:(d.c=p,d.e=f,d.s=a,p=(d=r(d,w,m,v,i)).c,h=d.r,f=d.e),y=p[c=f+m+1],l=i/2,h=h||c<0||null!=p[c+1],h=v<4?(null!=y||h)&&(0==v||v==(d.s<0?3:2)):y>l||y==l&&(4==v||h||6==v&&1&p[c-1]||v==(d.s<0?8:7)),c<1||!p[0])n=h?b(u.charAt(1),-m,u.charAt(0)):u.charAt(0);else{if(p.length=c,h)for(--i;++p[--c]>i;)p[c]=0,c||(++f,p=[1].concat(p));for(l=p.length;!p[--l];);for(y=0,n="";y<=l;n+=u.charAt(p[y++]));n=b(n,f,u.charAt(0))}return n}}(),r=function(){function t(t,e,r){var n,o,i,a,s=0,u=t.length,c=e%h,f=e/h|0;for(t=t.slice();u--;)s=((o=c*(i=t[u]%h)+(n=f*i+(a=t[u]/h|0)*c)%h*h+s)/r|0)+(n/h|0)+f*a,t[u]=o%r;return s&&(t=[s].concat(t)),t}function e(t,e,r,n){var o,i;if(r!=n)i=r>n?1:-1;else for(o=i=0;o<r;o++)if(t[o]!=e[o]){i=t[o]>e[o]?1:-1;break}return i}function r(t,e,r,n){for(var o=0;r--;)t[r]-=o,o=t[r]<e[r]?1:0,t[r]=o*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,o,a,s,f){var l,h,d,g,w,y,m,v,b,E,T,_,x,A,O,S,N,U=n.s==o.s?1:-1,B=n.c,C=o.c;if(!(B&&B[0]&&C&&C[0]))return new H(n.s&&o.s&&(B?!C||B[0]!=C[0]:C)?B&&0==B[0]||!C?0*U:U/0:NaN);for(b=(v=new H(U)).c=[],U=a+(h=n.e-o.e)+1,f||(f=u,h=p(n.e/c)-p(o.e/c),U=U/c|0),d=0;C[d]==(B[d]||0);d++);if(C[d]>(B[d]||0)&&h--,U<0)b.push(1),g=!0;else{for(A=B.length,S=C.length,d=0,U+=2,(w=i(f/(C[0]+1)))>1&&(C=t(C,w,f),B=t(B,w,f),S=C.length,A=B.length),x=S,T=(E=B.slice(0,S)).length;T<S;E[T++]=0);N=C.slice(),N=[0].concat(N),O=C[0],C[1]>=f/2&&O++;do{if(w=0,(l=e(C,E,S,T))<0){if(_=E[0],S!=T&&(_=_*f+(E[1]||0)),(w=i(_/O))>1)for(w>=f&&(w=f-1),m=(y=t(C,w,f)).length,T=E.length;1==e(y,E,m,T);)w--,r(y,S<m?N:C,m,f),m=y.length,l=1;else 0==w&&(l=w=1),m=(y=C.slice()).length;if(m<T&&(y=[0].concat(y)),r(E,y,T,f),T=E.length,-1==l)for(;e(C,E,S,T)<1;)w++,r(E,S<T?N:C,T,f),T=E.length}else 0===l&&(w++,E=[0]);b[d++]=w,E[0]?E[T++]=B[x]||0:(E=[B[x]],T=1)}while((x++<A||null!=E[0])&&U--);g=null!=E[0],b[0]||b.splice(0,1)}if(f==u){for(d=1,U=b[0];U>=10;U/=10,d++);V(v,a+(v.e=d+h*c-1)+1,s,g)}else v.e=h,v.r=+g;return v}}(),A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,S=/^\.([^.]+)$/,N=/^-?(Infinity|NaN)$/,U=/^\s*\+(?=[\w.])|^\s+|\s+$/g,T=function(t,e,r,n){var o,i=r?e:e.replace(U,"");if(N.test(i))t.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(A,(function(t,e,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=o?t:e})),n&&(o=n,i=i.replace(O,"$1").replace(S,"0.$1")),e!=i))return new H(i,o);if(H.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+e);t.s=null}t.c=t.e=null},B.absoluteValue=B.abs=function(){var t=new H(this);return t.s<0&&(t.s=1),t},B.comparedTo=function(t,e){return w(this,new H(t,e))},B.decimalPlaces=B.dp=function(t,e){var r,n,o,i=this;if(null!=t)return y(t,0,d),null==e?e=k:y(e,0,8),V(new H(i),t+i.e+1,e);if(!(r=i.c))return null;if(n=((o=r.length-1)-p(this.e/c))*c,o=r[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},B.dividedBy=B.div=function(t,e){return r(this,new H(t,e),R,k)},B.dividedToIntegerBy=B.idiv=function(t,e){return r(this,new H(t,e),0,1)},B.exponentiatedBy=B.pow=function(t,e){var r,n,s,u,f,l,h,d,p=this;if((t=new H(t)).c&&!t.isInteger())throw Error(a+"Exponent not an integer: "+W(t));if(null!=e&&(e=new H(e)),f=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return d=new H(Math.pow(+W(p),f?2-m(t):+W(t))),e?d.mod(e):d;if(l=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new H(NaN);(n=!l&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||f&&p.c[1]>=24e7:p.c[0]<8e13||f&&p.c[0]<=9999975e7)))return u=p.s<0&&m(t)?-0:0,p.e>-1&&(u=1/u),new H(l?1/u:u);q&&(u=o(q/c+2))}for(f?(r=new H(.5),l&&(t.s=1),h=m(t)):h=(s=Math.abs(+W(t)))%2,d=new H(C);;){if(h){if(!(d=d.times(p)).c)break;u?d.c.length>u&&(d.c.length=u):n&&(d=d.mod(e))}if(s){if(0===(s=i(s/2)))break;h=s%2}else if(V(t=t.times(r),t.e+1,1),t.e>14)h=m(t);else{if(0===(s=+W(t)))break;h=s%2}p=p.times(p),u?p.c&&p.c.length>u&&(p.c.length=u):n&&(p=p.mod(e))}return n?d:(l&&(d=C.div(d)),e?d.mod(e):u?V(d,q,k,undefined):d)},B.integerValue=function(t){var e=new H(this);return null==t?t=k:y(t,0,8),V(e,e.e+1,t)},B.isEqualTo=B.eq=function(t,e){return 0===w(this,new H(t,e))},B.isFinite=function(){return!!this.c},B.isGreaterThan=B.gt=function(t,e){return w(this,new H(t,e))>0},B.isGreaterThanOrEqualTo=B.gte=function(t,e){return 1===(e=w(this,new H(t,e)))||0===e},B.isInteger=function(){return!!this.c&&p(this.e/c)>this.c.length-2},B.isLessThan=B.lt=function(t,e){return w(this,new H(t,e))<0},B.isLessThanOrEqualTo=B.lte=function(t,e){return-1===(e=w(this,new H(t,e)))||0===e},B.isNaN=function(){return!this.s},B.isNegative=function(){return this.s<0},B.isPositive=function(){return this.s>0},B.isZero=function(){return!!this.c&&0==this.c[0]},B.minus=function(t,e){var r,n,o,i,a=this,s=a.s;if(e=(t=new H(t,e)).s,!s||!e)return new H(NaN);if(s!=e)return t.s=-e,a.plus(t);var f=a.e/c,l=t.e/c,h=a.c,d=t.c;if(!f||!l){if(!h||!d)return h?(t.s=-e,t):new H(d?a:NaN);if(!h[0]||!d[0])return d[0]?(t.s=-e,t):new H(h[0]?a:3==k?-0:0)}if(f=p(f),l=p(l),h=h.slice(),s=f-l){for((i=s<0)?(s=-s,o=h):(l=f,o=d),o.reverse(),e=s;e--;o.push(0));o.reverse()}else for(n=(i=(s=h.length)<(e=d.length))?s:e,s=e=0;e<n;e++)if(h[e]!=d[e]){i=h[e]<d[e];break}if(i&&(o=h,h=d,d=o,t.s=-t.s),(e=(n=d.length)-(r=h.length))>0)for(;e--;h[r++]=0);for(e=u-1;n>s;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=e);--h[r],h[n]+=u}h[n]-=d[n]}for(;0==h[0];h.splice(0,1),--l);return h[0]?z(t,h,l):(t.s=3==k?-1:1,t.c=[t.e=0],t)},B.modulo=B.mod=function(t,e){var n,o,i=this;return t=new H(t,e),!i.c||!t.s||t.c&&!t.c[0]?new H(NaN):!t.c||i.c&&!i.c[0]?new H(i):(9==M?(o=t.s,t.s=1,n=r(i,t,0,3),t.s=o,n.s*=o):n=r(i,t,0,M),(t=i.minus(n.times(t))).c[0]||1!=M||(t.s=i.s),t)},B.multipliedBy=B.times=function(t,e){var r,n,o,i,a,s,f,l,d,g,w,y,m,v,b,E=this,T=E.c,_=(t=new H(t,e)).c;if(!(T&&_&&T[0]&&_[0]))return!E.s||!t.s||T&&!T[0]&&!_||_&&!_[0]&&!T?t.c=t.e=t.s=null:(t.s*=E.s,T&&_?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=p(E.e/c)+p(t.e/c),t.s*=E.s,(f=T.length)<(g=_.length)&&(m=T,T=_,_=m,o=f,f=g,g=o),o=f+g,m=[];o--;m.push(0));for(v=u,b=h,o=g;--o>=0;){for(r=0,w=_[o]%b,y=_[o]/b|0,i=o+(a=f);i>o;)r=((l=w*(l=T[--a]%b)+(s=y*l+(d=T[a]/b|0)*w)%b*b+m[i]+r)/v|0)+(s/b|0)+y*d,m[i--]=l%v;m[i]=r}return r?++n:m.splice(0,1),z(t,m,n)},B.negated=function(){var t=new H(this);return t.s=-t.s||null,t},B.plus=function(t,e){var r,n=this,o=n.s;if(e=(t=new H(t,e)).s,!o||!e)return new H(NaN);if(o!=e)return t.s=-e,n.minus(t);var i=n.e/c,a=t.e/c,s=n.c,f=t.c;if(!i||!a){if(!s||!f)return new H(o/0);if(!s[0]||!f[0])return f[0]?t:new H(s[0]?n:0*o)}if(i=p(i),a=p(a),s=s.slice(),o=i-a){for(o>0?(a=i,r=f):(o=-o,r=s),r.reverse();o--;r.push(0));r.reverse()}for((o=s.length)-(e=f.length)<0&&(r=f,f=s,s=r,e=o),o=0;e;)o=(s[--e]=s[e]+f[e]+o)/u|0,s[e]=u===s[e]?0:s[e]%u;return o&&(s=[o].concat(s),++a),z(t,s,a)},B.precision=B.sd=function(t,e){var r,n,o,i=this;if(null!=t&&t!==!!t)return y(t,1,d),null==e?e=k:y(e,0,8),V(new H(i),t,e);if(!(r=i.c))return null;if(n=(o=r.length-1)*c+1,o=r[o]){for(;o%10==0;o/=10,n--);for(o=r[0];o>=10;o/=10,n++);}return t&&i.e+1>n&&(n=i.e+1),n},B.shiftedBy=function(t){return y(t,-9007199254740991,f),this.times("1e"+t)},B.squareRoot=B.sqrt=function(){var t,e,n,o,i,a=this,s=a.c,u=a.s,c=a.e,f=R+4,l=new H("0.5");if(1!==u||!s||!s[0])return new H(!u||u<0&&(!s||s[0])?NaN:s?a:1/0);if(0==(u=Math.sqrt(+W(a)))||u==1/0?(((e=g(s)).length+c)%2==0&&(e+="0"),u=Math.sqrt(+e),c=p((c+1)/2)-(c<0||c%2),n=new H(e=u==1/0?"5e"+c:(e=u.toExponential()).slice(0,e.indexOf("e")+1)+c)):n=new H(u+""),n.c[0])for((u=(c=n.e)+f)<3&&(u=0);;)if(i=n,n=l.times(i.plus(r(a,i,f,1))),g(i.c).slice(0,u)===(e=g(n.c)).slice(0,u)){if(n.e<c&&--u,"9999"!=(e=e.slice(u-3,u+1))&&(o||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(V(n,n.e+R+2,1),t=!n.times(n).eq(a));break}if(!o&&(V(i,i.e+R+2,0),i.times(i).eq(a))){n=i;break}f+=4,u+=4,o=1}return V(n,n.e+R+1,k,t)},B.toExponential=function(t,e){return null!=t&&(y(t,0,d),t++),G(this,t,e,1)},B.toFixed=function(t,e){return null!=t&&(y(t,0,d),t=t+this.e+1),G(this,t,e)},B.toFormat=function(t,e,r){var n,o=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=F;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(n=o.toFixed(t,e),o.c){var i,s=n.split("."),u=+r.groupSize,c=+r.secondaryGroupSize,f=r.groupSeparator||"",l=s[0],h=s[1],d=o.s<0,p=d?l.slice(1):l,g=p.length;if(c&&(i=u,u=c,c=i,g-=i),u>0&&g>0){for(i=g%u||u,l=p.substr(0,i);i<g;i+=u)l+=f+p.substr(i,u);c>0&&(l+=f+p.slice(i)),d&&(l="-"+l)}n=h?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):l}return(r.prefix||"")+n+(r.suffix||"")},B.toFraction=function(t){var e,n,o,i,s,u,f,h,d,p,w,y,m=this,v=m.c;if(null!=t&&(!(f=new H(t)).isInteger()&&(f.c||1!==f.s)||f.lt(C)))throw Error(a+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+W(f));if(!v)return new H(m);for(e=new H(C),d=n=new H(C),o=h=new H(C),y=g(v),s=e.e=y.length-m.e-1,e.c[0]=l[(u=s%c)<0?c+u:u],t=!t||f.comparedTo(e)>0?s>0?e:d:f,u=D,D=1/0,f=new H(y),h.c[0]=0;p=r(f,e,0,1),1!=(i=n.plus(p.times(o))).comparedTo(t);)n=o,o=i,d=h.plus(p.times(i=d)),h=i,e=f.minus(p.times(i=e)),f=i;return i=r(t.minus(n),o,0,1),h=h.plus(i.times(d)),n=n.plus(i.times(o)),h.s=d.s=m.s,w=r(d,o,s*=2,k).minus(m).abs().comparedTo(r(h,n,s,k).minus(m).abs())<1?[d,o]:[h,n],D=u,w},B.toNumber=function(){return+W(this)},B.toPrecision=function(t,e){return null!=t&&y(t,1,d),G(this,t,e,2)},B.toString=function(t){var e,r=this,n=r.s,o=r.e;return null===o?n?(e="Infinity",n<0&&(e="-"+e)):e="NaN":(null==t?e=o<=P||o>=I?v(g(r.c),o):b(g(r.c),o,"0"):10===t?e=b(g((r=V(new H(r),R+o+1,k)).c),r.e,"0"):(y(t,2,$.length,"Base"),e=E(b(g(r.c),o,"0"),10,t,n,!0)),n<0&&r.c[0]&&(e="-"+e)),e},B.valueOf=B.toJSON=function(){return W(this)},B._isBigNumber=!0,null!=e&&H.set(e),H}()).default=r.BigNumber=r,t.exports?t.exports=r:(e||(e="undefined"!=typeof self&&self?self:window),e.BigNumber=r)}(a)})),Lt=c(Pt),Mt=u((function(t,e){var r=a&&a.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),n=a&&a.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=a&&a.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)"default"!==o&&Object.prototype.hasOwnProperty.call(t,o)&&r(e,t,o);return n(e,t),e},i=a&&a.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},s=a&&a.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.createContractExecutionEnvironment=e.loadContract=void 0;const u=o(Lt),c=s(Dt);function f(t,e,r){const n=`\n    const [SmartWeave, BigNumber, clarity] = arguments;\n    clarity.SmartWeave = SmartWeave;\n    class ContractError extends Error { constructor(message) { super(message); this.name = 'ContractError' } };\n    function ContractAssert(cond, message) { if (!cond) throw new ContractError(message) };\n    ${e=(e=e.replace(/export\s+async\s+function\s+handle/gmu,"async function handle")).replace(/export\s+function\s+handle/gmu,"function handle")};\n    return handle;\n  `,o=new jt.SmartWeaveGlobal(t,{id:r});return{handler:new Function(n)(o,c.default,u),swGlobal:o}}e.loadContract=function(t,e){return i(this,void 0,void 0,(function*(){const r=yield t.transactions.get(e),n=It.getTag(r,"Contract-Src"),o=It.getTag(r,"Min-Fee"),i=(yield t.transactions.get(n)).get("data",{decode:!0,string:!0}),a=r.get("data",{decode:!0,string:!0}),{handler:s,swGlobal:u}=f(t,i,e);return{id:e,contractSrc:i,initState:a,minFee:o,contractTX:r,handler:s,swGlobal:u}}))},e.createContractExecutionEnvironment=f})),qt=u((function(t,e){var r=a&&a.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.execute=void 0,e.execute=function(t,e,n){return r(this,void 0,void 0,(function*(){try{const r=JSON.parse(JSON.stringify(n)),o=yield t(r,e);if(o&&(o.state||o.result))return{type:"ok",result:o.result,state:o.state||n};throw new Error("Unexpected result from contract: "+JSON.stringify(o))}catch(t){return"ContractError"===t.name?{type:"error",result:t.message,state:n}:{type:"exception",result:""+(t&&t.stack||t&&t.message),state:n}}}))}})),Ft=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0});class r extends Error{constructor(t,e={}){e.message?super(e.message):super(),this.type=t,this.otherInfo=e}getType(){return this.type}}e.default=r})),$t=u((function(t,e){var r=a&&a.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,i){function a(t){try{u(n.next(t))}catch(t){i(t)}}function s(t){try{u(n.throw(t))}catch(t){i(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}u((n=n.apply(t,e||[])).next())}))},n=a&&a.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.readContract=void 0;const o=n(Ft);e.readContract=function(t,e,n,a){return r(this,void 0,void 0,(function*(){if(!n){const e=yield t.network.getInfo();n=e.height}const u=Mt.loadContract(t,e).catch((t=>{throw new o.default("CONTRACT_NOT_FOUND",{message:`Contract having txId: ${e} not found`,requestedTxId:e})})),c=function(t,e,n){return r(this,void 0,void 0,(function*(){let r={tags:[{name:"App-Name",values:["SmartWeaveAction"]},{name:"Contract",values:[e]}],blockFilter:{max:n},first:i},o=yield s(t,r);const a=o.edges.filter((t=>!t.node.parent||!t.node.parent.id));for(;o.pageInfo.hasNextPage;){const e=o.edges[99].cursor;r=Object.assign(Object.assign({},r),{after:e}),o=yield s(t,r),a.push(...o.edges.filter((t=>!t.node.parent||!t.node.parent.id)))}return a}))}(t,e,n).catch((t=>t)),[f,l]=yield Promise.all([u,c]);if(f instanceof Error)throw f;if(l instanceof Error)throw l;let h;try{h=JSON.parse(f.initState)}catch(t){throw new Error("Unable to parse initial state for contract: "+e)}It.log(t,`Replaying ${l.length} confirmed interactions`),yield function(t,e){return r(this,void 0,void 0,(function*(){const n=e.map((e=>function(t,e){return r(this,void 0,void 0,(function*(){const{node:r}=e,n=t.utils.b64UrlToBuffer(r.block.id),o=t.utils.b64UrlToBuffer(r.id),i=t.utils.concatBuffers([n,o]),a=It.arrayToHex(yield t.crypto.hash(i)),s=("000000"+r.block.height).slice(-12);e.sortKey=`${s},${a}`}))}(t,e)));yield Promise.all(n),e.sort(((t,e)=>t.sortKey.localeCompare(e.sortKey)))}))}(t,l);const{handler:d,swGlobal:p}=f,g={};for(const e of l){const r=It.formatTags(e.node.tags),n=Object.assign(Object.assign({},e.node),{tags:r});let o=n.tags.Input;if(Array.isArray(o)){console.warn("Skipping tx with multiple Input tags - "+n.id);continue}try{o=JSON.parse(o)}catch(e){It.log(t,e);continue}if(!o){It.log(t,"Skipping tx with missing or invalid Input tag - "+n.id);continue}const i={input:o,caller:n.owner.address};p._activeTx=n;const a=yield qt.execute(d,i,h);"exception"===a.type&&(It.log(t,""+a.result),It.log(t,`Executing of interaction: ${n.id} threw exception.`)),"error"===a.type&&(It.log(t,""+a.result),It.log(t,`Executing of interaction: ${n.id} returned error.`)),g[n.id]="ok"===a.type,h=a.state}return a?{state:h,validity:g}:h}))};const i=100;function s(t,e){return r(this,void 0,void 0,(function*(){const r=yield t.api.post("graphql",{query:"query Transactions($tags: [TagFilter!]!, $blockFilter: BlockFilter!, $first: Int!, $after: String) {\n    transactions(tags: $tags, block: $blockFilter, first: $first, sort: HEIGHT_ASC, after: $after) {\n      pageInfo {\n        hasNextPage\n      }\n      edges {\n        node {\n          id\n          owner { address }\n          recipient\n          tags {\n            name\n            value\n          }\n          block {\n            height\n            id\n          }\n          fee { winston }\n          quantity { winston }\n          parent { id }\n        }\n        cursor\n      }\n    }\n  }",variables:e});if(200!==r.status)throw new Error(`Unable to retrieve transactions. Arweave gateway responded with status ${r.status}.`);return r.data.data.transactions}))}})),Ht=u((function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.selectWeightedPstHolder=void 0,e.selectWeightedPstHolder=function(t){let e=0;for(const r of Object.keys(t))e+=t[r];const r={};for(const n of Object.keys(t))r[n]=t[n]/e;let n=0;const o=Math.random();for(const t of Object.keys(r))if(n+=r[t],o<=n&&r[t]>0)return t;throw new Error("Unable to select token holder")}})),Gt=xt.init({host:"arweave.net",port:443,protocol:"https",logging:!1}),Kt=$t.readContract(Gt,"-8A6RexFkpfWwuyVO98wzSFZh0d6VJuI-buTJvlwOJQ");return o(void 0,void 0,void 0,(function(){return i(this,(function(t){switch(t.label){case 0:return[4,Kt];case 1:return t.sent(),[2]}}))})),t.getPstFeePercentage=function(){return o(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,Kt];case 1:return t=e.sent(),[2,t.settings.find((function(t){return"fee"===t[0].toString().toLowerCase()}))[1]/100]}}))}))},t.getWeightedPstHolder=function(){return o(this,void 0,void 0,(function(){var t;return i(this,(function(e){switch(e.label){case 0:return[4,Kt];case 1:return t=e.sent(),[2,Ht.selectWeightedPstHolder(t.balances)]}}))}))},Object.defineProperty(t,"__esModule",{value:!0}),t}({});
