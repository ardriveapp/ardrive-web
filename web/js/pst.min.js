var pst=function(t,e){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var n=r(window);function o(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}u((n=n.apply(t,e||[])).next())}))}function a(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=i.trys,(o=o.length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(t){a=[6,t],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function s(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var u,c={},f={},l={},h={exports:{}};u=h,function(t){var e,r=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,n=Math.ceil,o=Math.floor,a="[BigNumber Error] ",i=a+"Number primitive has more than 15 significant digits: ",s=1e14,c=14,f=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],h=1e7,d=1e9;function p(t){var e=0|t;return t>0||t===e?e:e-1}function g(t){for(var e,r,n=1,o=t.length,a=t[0]+"";n<o;){for(e=t[n++]+"",r=c-e.length;r--;e="0"+e);a+=e}for(o=a.length;48===a.charCodeAt(--o););return a.slice(0,o+1||1)}function w(t,e){var r,n,o=t.c,a=e.c,i=t.s,s=e.s,u=t.e,c=e.e;if(!i||!s)return null;if(r=o&&!o[0],n=a&&!a[0],r||n)return r?n?0:-s:i;if(i!=s)return i;if(r=i<0,n=u==c,!o||!a)return n?0:!o^r?1:-1;if(!n)return u>c^r?1:-1;for(s=(u=o.length)<(c=a.length)?u:c,i=0;i<s;i++)if(o[i]!=a[i])return o[i]>a[i]^r?1:-1;return u==c?0:u>c^r?1:-1}function y(t,e,r,n){if(t<e||t>r||t!==o(t))throw Error(a+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function m(t){var e=t.c.length-1;return p(t.e/c)==e&&t.c[e]%2!=0}function v(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function b(t,e,r){var n,o;if(e<0){for(o=r+".";++e;o+=r);t=o+t}else if(++e>(n=t.length)){for(o=r,e-=n;--e;o+=r);t+=o}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}e=function t(e){var u,E,T,_,S,A,O,x,R,C,N=H.prototype={constructor:H,toString:null,valueOf:null},k=new H(1),B=20,U=4,P=-7,I=21,j=-1e7,D=1e7,L=!1,M=1,$=0,q={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"Â ",suffix:""},F="0123456789abcdefghijklmnopqrstuvwxyz",K=!0;function H(t,e){var n,a,s,u,l,h,d,p,g=this;if(!(g instanceof H))return new H(t,e);if(null==e){if(t&&!0===t._isBigNumber)return g.s=t.s,void(!t.c||t.e>D?g.c=g.e=null:t.e<j?g.c=[g.e=0]:(g.e=t.e,g.c=t.c.slice()));if((h="number"==typeof t)&&0*t==0){if(g.s=1/t<0?(t=-t,-1):1,t===~~t){for(u=0,l=t;l>=10;l/=10,u++);return void(u>D?g.c=g.e=null:(g.e=u,g.c=[t]))}p=String(t)}else{if(!r.test(p=String(t)))return T(g,p,h);g.s=45==p.charCodeAt(0)?(p=p.slice(1),-1):1}(u=p.indexOf("."))>-1&&(p=p.replace(".","")),(l=p.search(/e/i))>0?(u<0&&(u=l),u+=+p.slice(l+1),p=p.substring(0,l)):u<0&&(u=p.length)}else{if(y(e,2,F.length,"Base"),10==e&&K)return J(g=new H(t),B+g.e+1,U);if(p=String(t),h="number"==typeof t){if(0*t!=0)return T(g,p,h,e);if(g.s=1/t<0?(p=p.slice(1),-1):1,H.DEBUG&&p.replace(/^0\.0*|\./,"").length>15)throw Error(i+t)}else g.s=45===p.charCodeAt(0)?(p=p.slice(1),-1):1;for(n=F.slice(0,e),u=l=0,d=p.length;l<d;l++)if(n.indexOf(a=p.charAt(l))<0){if("."==a){if(l>u){u=d;continue}}else if(!s&&(p==p.toUpperCase()&&(p=p.toLowerCase())||p==p.toLowerCase()&&(p=p.toUpperCase()))){s=!0,l=-1,u=0;continue}return T(g,String(t),h,e)}h=!1,(u=(p=E(p,e,10,g.s)).indexOf("."))>-1?p=p.replace(".",""):u=p.length}for(l=0;48===p.charCodeAt(l);l++);for(d=p.length;48===p.charCodeAt(--d););if(p=p.slice(l,++d)){if(d-=l,h&&H.DEBUG&&d>15&&(t>f||t!==o(t)))throw Error(i+g.s*t);if((u=u-l-1)>D)g.c=g.e=null;else if(u<j)g.c=[g.e=0];else{if(g.e=u,g.c=[],l=(u+1)%c,u<0&&(l+=c),l<d){for(l&&g.c.push(+p.slice(0,l)),d-=c;l<d;)g.c.push(+p.slice(l,l+=c));l=c-(p=p.slice(l)).length}else l-=d;for(;l--;p+="0");g.c.push(+p)}}else g.c=[g.e=0]}function W(t,e,r,n){var o,a,i,s,u;if(null==r?r=U:y(r,0,8),!t.c)return t.toString();if(o=t.c[0],i=t.e,null==e)u=g(t.c),u=1==n||2==n&&(i<=P||i>=I)?v(u,i):b(u,i,"0");else if(a=(t=J(new H(t),e,r)).e,s=(u=g(t.c)).length,1==n||2==n&&(e<=a||a<=P)){for(;s<e;u+="0",s++);u=v(u,a)}else if(e-=i,u=b(u,a,"0"),a+1>s){if(--e>0)for(u+=".";e--;u+="0");}else if((e+=a-s)>0)for(a+1==s&&(u+=".");e--;u+="0");return t.s<0&&o?"-"+u:u}function G(t,e){for(var r,n=1,o=new H(t[0]);n<t.length;n++){if(!(r=new H(t[n])).s){o=r;break}e.call(o,r)&&(o=r)}return o}function z(t,e,r){for(var n=1,o=e.length;!e[--o];e.pop());for(o=e[0];o>=10;o/=10,n++);return(r=n+r*c-1)>D?t.c=t.e=null:r<j?t.c=[t.e=0]:(t.e=r,t.c=e),t}function J(t,e,r,a){var i,u,f,h,d,p,g,w=t.c,y=l;if(w){t:{for(i=1,h=w[0];h>=10;h/=10,i++);if((u=e-i)<0)u+=c,f=e,g=(d=w[p=0])/y[i-f-1]%10|0;else if((p=n((u+1)/c))>=w.length){if(!a)break t;for(;w.length<=p;w.push(0));d=g=0,i=1,f=(u%=c)-c+1}else{for(d=h=w[p],i=1;h>=10;h/=10,i++);g=(f=(u%=c)-c+i)<0?0:d/y[i-f-1]%10|0}if(a=a||e<0||null!=w[p+1]||(f<0?d:d%y[i-f-1]),a=r<4?(g||a)&&(0==r||r==(t.s<0?3:2)):g>5||5==g&&(4==r||a||6==r&&(u>0?f>0?d/y[i-f]:0:w[p-1])%10&1||r==(t.s<0?8:7)),e<1||!w[0])return w.length=0,a?(e-=t.e+1,w[0]=y[(c-e%c)%c],t.e=-e||0):w[0]=t.e=0,t;if(0==u?(w.length=p,h=1,p--):(w.length=p+1,h=y[c-u],w[p]=f>0?o(d/y[i-f]%y[f])*h:0),a)for(;;){if(0==p){for(u=1,f=w[0];f>=10;f/=10,u++);for(f=w[0]+=h,h=1;f>=10;f/=10,h++);u!=h&&(t.e++,w[0]==s&&(w[0]=1));break}if(w[p]+=h,w[p]!=s)break;w[p--]=0,h=1}for(u=w.length;0===w[--u];w.pop());}t.e>D?t.c=t.e=null:t.e<j&&(t.c=[t.e=0])}return t}function V(t){var e,r=t.e;return null===r?t.toString():(e=g(t.c),e=r<=P||r>=I?v(e,r):b(e,r,"0"),t.s<0?"-"+e:e)}return H.clone=t,H.ROUND_UP=0,H.ROUND_DOWN=1,H.ROUND_CEIL=2,H.ROUND_FLOOR=3,H.ROUND_HALF_UP=4,H.ROUND_HALF_DOWN=5,H.ROUND_HALF_EVEN=6,H.ROUND_HALF_CEIL=7,H.ROUND_HALF_FLOOR=8,H.EUCLID=9,H.config=H.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(a+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(y(r=t[e],0,d,e),B=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(y(r=t[e],0,8,e),U=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(y(r[0],-d,0,e),y(r[1],0,d,e),P=r[0],I=r[1]):(y(r,-d,d,e),P=-(I=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if((r=t[e])&&r.pop)y(r[0],-d,-1,e),y(r[1],1,d,e),j=r[0],D=r[1];else{if(y(r,-d,d,e),!r)throw Error(a+e+" cannot be zero: "+r);j=-(D=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(a+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw L=!r,Error(a+"crypto unavailable");L=r}else L=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(y(r=t[e],0,9,e),M=r),t.hasOwnProperty(e="POW_PRECISION")&&(y(r=t[e],0,d,e),$=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(a+e+" not an object: "+r);q=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(a+e+" invalid: "+r);K="0123456789"==r.slice(0,10),F=r}}return{DECIMAL_PLACES:B,ROUNDING_MODE:U,EXPONENTIAL_AT:[P,I],RANGE:[j,D],CRYPTO:L,MODULO_MODE:M,POW_PRECISION:$,FORMAT:q,ALPHABET:F}},H.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!H.DEBUG)return!0;var e,r,n=t.c,i=t.e,u=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===u||-1===u)&&i>=-d&&i<=d&&i===o(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break t}if((e=(i+1)%c)<1&&(e+=c),String(n[0]).length==e){for(e=0;e<n.length;e++)if((r=n[e])<0||r>=s||r!==o(r))break t;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===u||1===u||-1===u))return!0;throw Error(a+"Invalid BigNumber: "+t)},H.maximum=H.max=function(){return G(arguments,N.lt)},H.minimum=H.min=function(){return G(arguments,N.gt)},H.random=(_=9007199254740992,S=Math.random()*_&2097151?function(){return o(Math.random()*_)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,r,i,s,u,f=0,h=[],p=new H(k);if(null==t?t=B:y(t,0,d),s=n(t/c),L)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(s*=2));f<s;)(u=131072*e[f]+(e[f+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),e[f]=r[0],e[f+1]=r[1]):(h.push(u%1e14),f+=2);f=s/2}else{if(!crypto.randomBytes)throw L=!1,Error(a+"crypto unavailable");for(e=crypto.randomBytes(s*=7);f<s;)(u=281474976710656*(31&e[f])+1099511627776*e[f+1]+4294967296*e[f+2]+16777216*e[f+3]+(e[f+4]<<16)+(e[f+5]<<8)+e[f+6])>=9e15?crypto.randomBytes(7).copy(e,f):(h.push(u%1e14),f+=7);f=s/7}if(!L)for(;f<s;)(u=S())<9e15&&(h[f++]=u%1e14);for(s=h[--f],t%=c,s&&t&&(u=l[c-t],h[f]=o(s/u)*u);0===h[f];h.pop(),f--);if(f<0)h=[i=0];else{for(i=-1;0===h[0];h.splice(0,1),i-=c);for(f=1,u=h[0];u>=10;u/=10,f++);f<c&&(i-=c-f)}return p.e=i,p.c=h,p}),H.sum=function(){for(var t=1,e=arguments,r=new H(e[0]);t<e.length;)r=r.plus(e[t++]);return r},E=function(){var t="0123456789";function e(t,e,r,n){for(var o,a,i=[0],s=0,u=t.length;s<u;){for(a=i.length;a--;i[a]*=e);for(i[0]+=n.indexOf(t.charAt(s++)),o=0;o<i.length;o++)i[o]>r-1&&(null==i[o+1]&&(i[o+1]=0),i[o+1]+=i[o]/r|0,i[o]%=r)}return i.reverse()}return function(r,n,o,a,i){var s,c,f,l,h,d,p,w,y=r.indexOf("."),m=B,v=U;for(y>=0&&(l=$,$=0,r=r.replace(".",""),d=(w=new H(n)).pow(r.length-y),$=l,w.c=e(b(g(d.c),d.e,"0"),10,o,t),w.e=w.c.length),f=l=(p=e(r,n,o,i?(s=F,t):(s=t,F))).length;0==p[--l];p.pop());if(!p[0])return s.charAt(0);if(y<0?--f:(d.c=p,d.e=f,d.s=a,p=(d=u(d,w,m,v,o)).c,h=d.r,f=d.e),y=p[c=f+m+1],l=o/2,h=h||c<0||null!=p[c+1],h=v<4?(null!=y||h)&&(0==v||v==(d.s<0?3:2)):y>l||y==l&&(4==v||h||6==v&&1&p[c-1]||v==(d.s<0?8:7)),c<1||!p[0])r=h?b(s.charAt(1),-m,s.charAt(0)):s.charAt(0);else{if(p.length=c,h)for(--o;++p[--c]>o;)p[c]=0,c||(++f,p=[1].concat(p));for(l=p.length;!p[--l];);for(y=0,r="";y<=l;r+=s.charAt(p[y++]));r=b(r,f,s.charAt(0))}return r}}(),u=function(){function t(t,e,r){var n,o,a,i,s=0,u=t.length,c=e%h,f=e/h|0;for(t=t.slice();u--;)s=((o=c*(a=t[u]%h)+(n=f*a+(i=t[u]/h|0)*c)%h*h+s)/r|0)+(n/h|0)+f*i,t[u]=o%r;return s&&(t=[s].concat(t)),t}function e(t,e,r,n){var o,a;if(r!=n)a=r>n?1:-1;else for(o=a=0;o<r;o++)if(t[o]!=e[o]){a=t[o]>e[o]?1:-1;break}return a}function r(t,e,r,n){for(var o=0;r--;)t[r]-=o,o=t[r]<e[r]?1:0,t[r]=o*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,a,i,u,f){var l,h,d,g,w,y,m,v,b,E,T,_,S,A,O,x,R,C=n.s==a.s?1:-1,N=n.c,k=a.c;if(!(N&&N[0]&&k&&k[0]))return new H(n.s&&a.s&&(N?!k||N[0]!=k[0]:k)?N&&0==N[0]||!k?0*C:C/0:NaN);for(b=(v=new H(C)).c=[],C=i+(h=n.e-a.e)+1,f||(f=s,h=p(n.e/c)-p(a.e/c),C=C/c|0),d=0;k[d]==(N[d]||0);d++);if(k[d]>(N[d]||0)&&h--,C<0)b.push(1),g=!0;else{for(A=N.length,x=k.length,d=0,C+=2,(w=o(f/(k[0]+1)))>1&&(k=t(k,w,f),N=t(N,w,f),x=k.length,A=N.length),S=x,T=(E=N.slice(0,x)).length;T<x;E[T++]=0);R=k.slice(),R=[0].concat(R),O=k[0],k[1]>=f/2&&O++;do{if(w=0,(l=e(k,E,x,T))<0){if(_=E[0],x!=T&&(_=_*f+(E[1]||0)),(w=o(_/O))>1)for(w>=f&&(w=f-1),m=(y=t(k,w,f)).length,T=E.length;1==e(y,E,m,T);)w--,r(y,x<m?R:k,m,f),m=y.length,l=1;else 0==w&&(l=w=1),m=(y=k.slice()).length;if(m<T&&(y=[0].concat(y)),r(E,y,T,f),T=E.length,-1==l)for(;e(k,E,x,T)<1;)w++,r(E,x<T?R:k,T,f),T=E.length}else 0===l&&(w++,E=[0]);b[d++]=w,E[0]?E[T++]=N[S]||0:(E=[N[S]],T=1)}while((S++<A||null!=E[0])&&C--);g=null!=E[0],b[0]||b.splice(0,1)}if(f==s){for(d=1,C=b[0];C>=10;C/=10,d++);J(v,i+(v.e=d+h*c-1)+1,u,g)}else v.e=h,v.r=+g;return v}}(),A=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,x=/^\.([^.]+)$/,R=/^-?(Infinity|NaN)$/,C=/^\s*\+(?=[\w.])|^\s+|\s+$/g,T=function(t,e,r,n){var o,i=r?e:e.replace(C,"");if(R.test(i))t.s=isNaN(i)?null:i<0?-1:1;else{if(!r&&(i=i.replace(A,(function(t,e,r){return o="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=o?t:e})),n&&(o=n,i=i.replace(O,"$1").replace(x,"0.$1")),e!=i))return new H(i,o);if(H.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+e);t.s=null}t.c=t.e=null},N.absoluteValue=N.abs=function(){var t=new H(this);return t.s<0&&(t.s=1),t},N.comparedTo=function(t,e){return w(this,new H(t,e))},N.decimalPlaces=N.dp=function(t,e){var r,n,o,a=this;if(null!=t)return y(t,0,d),null==e?e=U:y(e,0,8),J(new H(a),t+a.e+1,e);if(!(r=a.c))return null;if(n=((o=r.length-1)-p(this.e/c))*c,o=r[o])for(;o%10==0;o/=10,n--);return n<0&&(n=0),n},N.dividedBy=N.div=function(t,e){return u(this,new H(t,e),B,U)},N.dividedToIntegerBy=N.idiv=function(t,e){return u(this,new H(t,e),0,1)},N.exponentiatedBy=N.pow=function(t,e){var r,i,s,u,f,l,h,d,p=this;if((t=new H(t)).c&&!t.isInteger())throw Error(a+"Exponent not an integer: "+V(t));if(null!=e&&(e=new H(e)),f=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return d=new H(Math.pow(+V(p),f?2-m(t):+V(t))),e?d.mod(e):d;if(l=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new H(NaN);(i=!l&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||f&&p.c[1]>=24e7:p.c[0]<8e13||f&&p.c[0]<=9999975e7)))return u=p.s<0&&m(t)?-0:0,p.e>-1&&(u=1/u),new H(l?1/u:u);$&&(u=n($/c+2))}for(f?(r=new H(.5),l&&(t.s=1),h=m(t)):h=(s=Math.abs(+V(t)))%2,d=new H(k);;){if(h){if(!(d=d.times(p)).c)break;u?d.c.length>u&&(d.c.length=u):i&&(d=d.mod(e))}if(s){if(0===(s=o(s/2)))break;h=s%2}else if(J(t=t.times(r),t.e+1,1),t.e>14)h=m(t);else{if(0==(s=+V(t)))break;h=s%2}p=p.times(p),u?p.c&&p.c.length>u&&(p.c.length=u):i&&(p=p.mod(e))}return i?d:(l&&(d=k.div(d)),e?d.mod(e):u?J(d,$,U,void 0):d)},N.integerValue=function(t){var e=new H(this);return null==t?t=U:y(t,0,8),J(e,e.e+1,t)},N.isEqualTo=N.eq=function(t,e){return 0===w(this,new H(t,e))},N.isFinite=function(){return!!this.c},N.isGreaterThan=N.gt=function(t,e){return w(this,new H(t,e))>0},N.isGreaterThanOrEqualTo=N.gte=function(t,e){return 1===(e=w(this,new H(t,e)))||0===e},N.isInteger=function(){return!!this.c&&p(this.e/c)>this.c.length-2},N.isLessThan=N.lt=function(t,e){return w(this,new H(t,e))<0},N.isLessThanOrEqualTo=N.lte=function(t,e){return-1===(e=w(this,new H(t,e)))||0===e},N.isNaN=function(){return!this.s},N.isNegative=function(){return this.s<0},N.isPositive=function(){return this.s>0},N.isZero=function(){return!!this.c&&0==this.c[0]},N.minus=function(t,e){var r,n,o,a,i=this,u=i.s;if(e=(t=new H(t,e)).s,!u||!e)return new H(NaN);if(u!=e)return t.s=-e,i.plus(t);var f=i.e/c,l=t.e/c,h=i.c,d=t.c;if(!f||!l){if(!h||!d)return h?(t.s=-e,t):new H(d?i:NaN);if(!h[0]||!d[0])return d[0]?(t.s=-e,t):new H(h[0]?i:3==U?-0:0)}if(f=p(f),l=p(l),h=h.slice(),u=f-l){for((a=u<0)?(u=-u,o=h):(l=f,o=d),o.reverse(),e=u;e--;o.push(0));o.reverse()}else for(n=(a=(u=h.length)<(e=d.length))?u:e,u=e=0;e<n;e++)if(h[e]!=d[e]){a=h[e]<d[e];break}if(a&&(o=h,h=d,d=o,t.s=-t.s),(e=(n=d.length)-(r=h.length))>0)for(;e--;h[r++]=0);for(e=s-1;n>u;){if(h[--n]<d[n]){for(r=n;r&&!h[--r];h[r]=e);--h[r],h[n]+=s}h[n]-=d[n]}for(;0==h[0];h.splice(0,1),--l);return h[0]?z(t,h,l):(t.s=3==U?-1:1,t.c=[t.e=0],t)},N.modulo=N.mod=function(t,e){var r,n,o=this;return t=new H(t,e),!o.c||!t.s||t.c&&!t.c[0]?new H(NaN):!t.c||o.c&&!o.c[0]?new H(o):(9==M?(n=t.s,t.s=1,r=u(o,t,0,3),t.s=n,r.s*=n):r=u(o,t,0,M),(t=o.minus(r.times(t))).c[0]||1!=M||(t.s=o.s),t)},N.multipliedBy=N.times=function(t,e){var r,n,o,a,i,u,f,l,d,g,w,y,m,v,b,E=this,T=E.c,_=(t=new H(t,e)).c;if(!(T&&_&&T[0]&&_[0]))return!E.s||!t.s||T&&!T[0]&&!_||_&&!_[0]&&!T?t.c=t.e=t.s=null:(t.s*=E.s,T&&_?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=p(E.e/c)+p(t.e/c),t.s*=E.s,(f=T.length)<(g=_.length)&&(m=T,T=_,_=m,o=f,f=g,g=o),o=f+g,m=[];o--;m.push(0));for(v=s,b=h,o=g;--o>=0;){for(r=0,w=_[o]%b,y=_[o]/b|0,a=o+(i=f);a>o;)r=((l=w*(l=T[--i]%b)+(u=y*l+(d=T[i]/b|0)*w)%b*b+m[a]+r)/v|0)+(u/b|0)+y*d,m[a--]=l%v;m[a]=r}return r?++n:m.splice(0,1),z(t,m,n)},N.negated=function(){var t=new H(this);return t.s=-t.s||null,t},N.plus=function(t,e){var r,n=this,o=n.s;if(e=(t=new H(t,e)).s,!o||!e)return new H(NaN);if(o!=e)return t.s=-e,n.minus(t);var a=n.e/c,i=t.e/c,u=n.c,f=t.c;if(!a||!i){if(!u||!f)return new H(o/0);if(!u[0]||!f[0])return f[0]?t:new H(u[0]?n:0*o)}if(a=p(a),i=p(i),u=u.slice(),o=a-i){for(o>0?(i=a,r=f):(o=-o,r=u),r.reverse();o--;r.push(0));r.reverse()}for((o=u.length)-(e=f.length)<0&&(r=f,f=u,u=r,e=o),o=0;e;)o=(u[--e]=u[e]+f[e]+o)/s|0,u[e]=s===u[e]?0:u[e]%s;return o&&(u=[o].concat(u),++i),z(t,u,i)},N.precision=N.sd=function(t,e){var r,n,o,a=this;if(null!=t&&t!==!!t)return y(t,1,d),null==e?e=U:y(e,0,8),J(new H(a),t,e);if(!(r=a.c))return null;if(n=(o=r.length-1)*c+1,o=r[o]){for(;o%10==0;o/=10,n--);for(o=r[0];o>=10;o/=10,n++);}return t&&a.e+1>n&&(n=a.e+1),n},N.shiftedBy=function(t){return y(t,-9007199254740991,f),this.times("1e"+t)},N.squareRoot=N.sqrt=function(){var t,e,r,n,o,a=this,i=a.c,s=a.s,c=a.e,f=B+4,l=new H("0.5");if(1!==s||!i||!i[0])return new H(!s||s<0&&(!i||i[0])?NaN:i?a:1/0);if(0==(s=Math.sqrt(+V(a)))||s==1/0?(((e=g(i)).length+c)%2==0&&(e+="0"),s=Math.sqrt(+e),c=p((c+1)/2)-(c<0||c%2),r=new H(e=s==1/0?"5e"+c:(e=s.toExponential()).slice(0,e.indexOf("e")+1)+c)):r=new H(s+""),r.c[0])for((s=(c=r.e)+f)<3&&(s=0);;)if(o=r,r=l.times(o.plus(u(a,o,f,1))),g(o.c).slice(0,s)===(e=g(r.c)).slice(0,s)){if(r.e<c&&--s,"9999"!=(e=e.slice(s-3,s+1))&&(n||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(J(r,r.e+B+2,1),t=!r.times(r).eq(a));break}if(!n&&(J(o,o.e+B+2,0),o.times(o).eq(a))){r=o;break}f+=4,s+=4,n=1}return J(r,r.e+B+1,U,t)},N.toExponential=function(t,e){return null!=t&&(y(t,0,d),t++),W(this,t,e,1)},N.toFixed=function(t,e){return null!=t&&(y(t,0,d),t=t+this.e+1),W(this,t,e)},N.toFormat=function(t,e,r){var n,o=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=q;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(n=o.toFixed(t,e),o.c){var i,s=n.split("."),u=+r.groupSize,c=+r.secondaryGroupSize,f=r.groupSeparator||"",l=s[0],h=s[1],d=o.s<0,p=d?l.slice(1):l,g=p.length;if(c&&(i=u,u=c,c=i,g-=i),u>0&&g>0){for(i=g%u||u,l=p.substr(0,i);i<g;i+=u)l+=f+p.substr(i,u);c>0&&(l+=f+p.slice(i)),d&&(l="-"+l)}n=h?l+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):l}return(r.prefix||"")+n+(r.suffix||"")},N.toFraction=function(t){var e,r,n,o,i,s,f,h,d,p,w,y,m=this,v=m.c;if(null!=t&&(!(f=new H(t)).isInteger()&&(f.c||1!==f.s)||f.lt(k)))throw Error(a+"Argument "+(f.isInteger()?"out of range: ":"not an integer: ")+V(f));if(!v)return new H(m);for(e=new H(k),d=r=new H(k),n=h=new H(k),y=g(v),i=e.e=y.length-m.e-1,e.c[0]=l[(s=i%c)<0?c+s:s],t=!t||f.comparedTo(e)>0?i>0?e:d:f,s=D,D=1/0,f=new H(y),h.c[0]=0;p=u(f,e,0,1),1!=(o=r.plus(p.times(n))).comparedTo(t);)r=n,n=o,d=h.plus(p.times(o=d)),h=o,e=f.minus(p.times(o=e)),f=o;return o=u(t.minus(r),n,0,1),h=h.plus(o.times(d)),r=r.plus(o.times(n)),h.s=d.s=m.s,w=u(d,n,i*=2,U).minus(m).abs().comparedTo(u(h,r,i,U).minus(m).abs())<1?[d,n]:[h,r],D=s,w},N.toNumber=function(){return+V(this)},N.toPrecision=function(t,e){return null!=t&&y(t,1,d),W(this,t,e,2)},N.toString=function(t){var e,r=this,n=r.s,o=r.e;return null===o?n?(e="Infinity",n<0&&(e="-"+e)):e="NaN":(null==t?e=o<=P||o>=I?v(g(r.c),o):b(g(r.c),o,"0"):10===t&&K?e=b(g((r=J(new H(r),B+o+1,U)).c),r.e,"0"):(y(t,2,F.length,"Base"),e=E(b(g(r.c),o,"0"),10,t,n,!0)),n<0&&r.c[0]&&(e="-"+e)),e},N.valueOf=N.toJSON=function(){return V(this)},N._isBigNumber=!0,null!=e&&H.set(e),H}(),e.default=e.BigNumber=e,u.exports?u.exports=e:(t||(t="undefined"!=typeof self&&self?self:window),t.BigNumber=e)}(i),Object.defineProperty(l,"__esModule",{value:!0});const d=h.exports;l.default=class{constructor(){this.BigNum=(t,e)=>new(d.BigNumber.clone({DECIMAL_PLACES:e}))(t)}winstonToAr(t,{formatted:e=!1,decimals:r=12,trim:n=!0}={}){let o=this.stringToBigNum(t,r).shiftedBy(-12);return e?o.toFormat(r):o.toFixed(r)}arToWinston(t,{formatted:e=!1}={}){let r=this.stringToBigNum(t).shiftedBy(12);return e?r.toFormat():r.toFixed(0)}compare(t,e){let r=this.stringToBigNum(t),n=this.stringToBigNum(e);return r.comparedTo(n)}isEqual(t,e){return 0===this.compare(t,e)}isLessThan(t,e){let r=this.stringToBigNum(t),n=this.stringToBigNum(e);return r.isLessThan(n)}isGreaterThan(t,e){let r=this.stringToBigNum(t),n=this.stringToBigNum(e);return r.isGreaterThan(n)}add(t,e){let r=this.stringToBigNum(t);return this.stringToBigNum(e),r.plus(e).toFixed(0)}sub(t,e){let r=this.stringToBigNum(t);return this.stringToBigNum(e),r.minus(e).toFixed(0)}stringToBigNum(t,e=12){return this.BigNum(t,e)}};var p,g={},w={exports:{}},y={exports:{}},m=function(t,e){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return t.apply(e,r)}},v=m,b=Object.prototype.toString,E=(p=Object.create(null),function(t){var e=b.call(t);return p[e]||(p[e]=e.slice(8,-1).toLowerCase())});function T(t){return t=t.toLowerCase(),function(e){return E(e)===t}}function _(t){return Array.isArray(t)}function S(t){return void 0===t}var A=T("ArrayBuffer");function O(t){return null!==t&&"object"==typeof t}function x(t){if("object"!==E(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}var R=T("Date"),C=T("File"),N=T("Blob"),k=T("FileList");function B(t){return"[object Function]"===b.call(t)}var U=T("URLSearchParams");function P(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),_(t))for(var r=0,n=t.length;r<n;r++)e.call(null,t[r],r,t);else for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.call(null,t[o],o,t)}var I,j=(I="undefined"!=typeof Uint8Array&&Object.getPrototypeOf(Uint8Array),function(t){return I&&t instanceof I}),D={isArray:_,isArrayBuffer:A,isBuffer:function(t){return null!==t&&!S(t)&&null!==t.constructor&&!S(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){var e="[object FormData]";return t&&("function"==typeof FormData&&t instanceof FormData||b.call(t)===e||B(t.toString)&&t.toString()===e)},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&A(t.buffer)},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:O,isPlainObject:x,isUndefined:S,isDate:R,isFile:C,isBlob:N,isFunction:B,isStream:function(t){return O(t)&&B(t.pipe)},isURLSearchParams:U,isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:P,merge:function t(){var e={};function r(r,n){x(e[n])&&x(r)?e[n]=t(e[n],r):x(r)?e[n]=t({},r):_(r)?e[n]=r.slice():e[n]=r}for(var n=0,o=arguments.length;n<o;n++)P(arguments[n],r);return e},extend:function(t,e,r){return P(e,(function(e,n){t[n]=r&&"function"==typeof e?v(e,r):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t},inherits:function(t,e,r,n){t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,r&&Object.assign(t.prototype,r)},toFlatObject:function(t,e,r){var n,o,a,i={};e=e||{};do{for(o=(n=Object.getOwnPropertyNames(t)).length;o-- >0;)i[a=n[o]]||(e[a]=t[a],i[a]=!0);t=Object.getPrototypeOf(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},kindOf:E,kindOfTest:T,endsWith:function(t,e,r){t=String(t),(void 0===r||r>t.length)&&(r=t.length),r-=e.length;var n=t.indexOf(e,r);return-1!==n&&n===r},toArray:function(t){if(!t)return null;var e=t.length;if(S(e))return null;for(var r=new Array(e);e-- >0;)r[e]=t[e];return r},isTypedArray:j,isFileList:k},L=D;function M(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var $=function(t,e,r){if(!e)return t;var n;if(r)n=r(e);else if(L.isURLSearchParams(e))n=e.toString();else{var o=[];L.forEach(e,(function(t,e){null!=t&&(L.isArray(t)?e+="[]":t=[t],L.forEach(t,(function(t){L.isDate(t)?t=t.toISOString():L.isObject(t)&&(t=JSON.stringify(t)),o.push(M(e)+"="+M(t))})))})),n=o.join("&")}if(n){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+n}return t},q=D;function F(){this.handlers=[]}F.prototype.use=function(t,e,r){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!r&&r.synchronous,runWhen:r?r.runWhen:null}),this.handlers.length-1},F.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},F.prototype.forEach=function(t){q.forEach(this.handlers,(function(e){null!==e&&t(e)}))};var K,H,W=F,G=D;function z(){if(H)return K;H=1;var t=D;function e(t,e,r,n,o){Error.call(this),this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),n&&(this.request=n),o&&(this.response=o)}t.inherits(e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var r=e.prototype,n={};return["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach((function(t){n[t]={value:t}})),Object.defineProperties(e,n),Object.defineProperty(r,"isAxiosError",{value:!0}),e.from=function(n,o,a,i,s,u){var c=Object.create(r);return t.toFlatObject(n,c,(function(t){return t!==Error.prototype})),e.call(c,n.message,o,a,i,s),c.name=n.name,u&&Object.assign(c,u),c},K=e}var J,V,X,Z,Q,Y,tt={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};function et(){if(V)return J;V=1;var t=D;return J=function(e,r){r=r||new FormData;var n=[];function o(e){return null===e?"":t.isDate(e)?e.toISOString():t.isArrayBuffer(e)||t.isTypedArray(e)?"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}return function e(a,i){if(t.isPlainObject(a)||t.isArray(a)){if(-1!==n.indexOf(a))throw Error("Circular reference detected in "+i);n.push(a),t.forEach(a,(function(n,a){if(!t.isUndefined(n)){var s,u=i?i+"."+a:a;if(n&&!i&&"object"==typeof n)if(t.endsWith(a,"{}"))n=JSON.stringify(n);else if(t.endsWith(a,"[]")&&(s=t.toArray(n)))return void s.forEach((function(e){!t.isUndefined(e)&&r.append(u,o(e))}));e(n,u)}})),n.pop()}else r.append(i,o(a))}(e),r},J}function rt(){if(Z)return X;Z=1;var t=z();return X=function(e,r,n){var o=n.config.validateStatus;n.status&&o&&!o(n.status)?r(new t("Request failed with status code "+n.status,[t.ERR_BAD_REQUEST,t.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}}function nt(){if(Y)return Q;Y=1;var t=D;return Q=t.isStandardBrowserEnv()?{write:function(e,r,n,o,a,i){var s=[];s.push(e+"="+encodeURIComponent(r)),t.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),t.isString(o)&&s.push("path="+o),t.isString(a)&&s.push("domain="+a),!0===i&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}}var ot,at,it,st,ut,ct,ft,lt,ht,dt,pt,gt,wt=function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)},yt=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t},mt=function(t,e){return t&&!wt(e)?yt(t,e):e};function vt(){if(at)return ot;at=1;var t=D,e=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return ot=function(r){var n,o,a,i={};return r?(t.forEach(r.split("\n"),(function(r){if(a=r.indexOf(":"),n=t.trim(r.substr(0,a)).toLowerCase(),o=t.trim(r.substr(a+1)),n){if(i[n]&&e.indexOf(n)>=0)return;i[n]="set-cookie"===n?(i[n]?i[n]:[]).concat([o]):i[n]?i[n]+", "+o:o}})),i):i},ot}function bt(){if(st)return it;st=1;var t=D;return it=t.isStandardBrowserEnv()?function(){var e,r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function o(t){var e=t;return r&&(n.setAttribute("href",e),e=n.href),n.setAttribute("href",e),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return e=o(window.location.href),function(r){var n=t.isString(r)?o(r):r;return n.protocol===e.protocol&&n.host===e.host}}():function(){return!0}}function Et(){if(ct)return ut;ct=1;var t=z();function e(e){t.call(this,null==e?"canceled":e,t.ERR_CANCELED),this.name="CanceledError"}return D.inherits(e,t,{__CANCEL__:!0}),ut=e}function Tt(){return lt?ft:(lt=1,ft=function(t){var e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""})}function _t(){if(dt)return ht;dt=1;var t=D,e=rt(),r=nt(),n=$,o=mt,a=vt(),i=bt(),s=tt,u=z(),c=Et(),f=Tt();return ht=function(l){return new Promise((function(h,d){var p,g=l.data,w=l.headers,y=l.responseType;function m(){l.cancelToken&&l.cancelToken.unsubscribe(p),l.signal&&l.signal.removeEventListener("abort",p)}t.isFormData(g)&&t.isStandardBrowserEnv()&&delete w["Content-Type"];var v=new XMLHttpRequest;if(l.auth){var b=l.auth.username||"",E=l.auth.password?unescape(encodeURIComponent(l.auth.password)):"";w.Authorization="Basic "+btoa(b+":"+E)}var T=o(l.baseURL,l.url);function _(){if(v){var t="getAllResponseHeaders"in v?a(v.getAllResponseHeaders()):null,r={data:y&&"text"!==y&&"json"!==y?v.response:v.responseText,status:v.status,statusText:v.statusText,headers:t,config:l,request:v};e((function(t){h(t),m()}),(function(t){d(t),m()}),r),v=null}}if(v.open(l.method.toUpperCase(),n(T,l.params,l.paramsSerializer),!0),v.timeout=l.timeout,"onloadend"in v?v.onloadend=_:v.onreadystatechange=function(){v&&4===v.readyState&&(0!==v.status||v.responseURL&&0===v.responseURL.indexOf("file:"))&&setTimeout(_)},v.onabort=function(){v&&(d(new u("Request aborted",u.ECONNABORTED,l,v)),v=null)},v.onerror=function(){d(new u("Network Error",u.ERR_NETWORK,l,v,v)),v=null},v.ontimeout=function(){var t=l.timeout?"timeout of "+l.timeout+"ms exceeded":"timeout exceeded",e=l.transitional||s;l.timeoutErrorMessage&&(t=l.timeoutErrorMessage),d(new u(t,e.clarifyTimeoutError?u.ETIMEDOUT:u.ECONNABORTED,l,v)),v=null},t.isStandardBrowserEnv()){var S=(l.withCredentials||i(T))&&l.xsrfCookieName?r.read(l.xsrfCookieName):void 0;S&&(w[l.xsrfHeaderName]=S)}"setRequestHeader"in v&&t.forEach(w,(function(t,e){void 0===g&&"content-type"===e.toLowerCase()?delete w[e]:v.setRequestHeader(e,t)})),t.isUndefined(l.withCredentials)||(v.withCredentials=!!l.withCredentials),y&&"json"!==y&&(v.responseType=l.responseType),"function"==typeof l.onDownloadProgress&&v.addEventListener("progress",l.onDownloadProgress),"function"==typeof l.onUploadProgress&&v.upload&&v.upload.addEventListener("progress",l.onUploadProgress),(l.cancelToken||l.signal)&&(p=function(t){v&&(d(!t||t&&t.type?new c:t),v.abort(),v=null)},l.cancelToken&&l.cancelToken.subscribe(p),l.signal&&(l.signal.aborted?p():l.signal.addEventListener("abort",p))),g||(g=null);var A=f(T);A&&-1===["http","https","file"].indexOf(A)?d(new u("Unsupported protocol "+A+":",u.ERR_BAD_REQUEST,l)):v.send(g)}))},ht}var St=D,At=function(t,e){G.forEach(t,(function(r,n){n!==e&&n.toUpperCase()===e.toUpperCase()&&(t[e]=r,delete t[n])}))},Ot=z(),xt=tt,Rt=et(),Ct={"Content-Type":"application/x-www-form-urlencoded"};function Nt(t,e){!St.isUndefined(t)&&St.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var kt,Bt={transitional:xt,adapter:(("undefined"!=typeof XMLHttpRequest||"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process))&&(kt=_t()),kt),transformRequest:[function(t,e){if(At(e,"Accept"),At(e,"Content-Type"),St.isFormData(t)||St.isArrayBuffer(t)||St.isBuffer(t)||St.isStream(t)||St.isFile(t)||St.isBlob(t))return t;if(St.isArrayBufferView(t))return t.buffer;if(St.isURLSearchParams(t))return Nt(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString();var r,n=St.isObject(t),o=e&&e["Content-Type"];if((r=St.isFileList(t))||n&&"multipart/form-data"===o){var a=this.env&&this.env.FormData;return Rt(r?{"files[]":t}:t,a&&new a)}return n||"application/json"===o?(Nt(e,"application/json"),function(t,e,r){if(St.isString(t))try{return(e||JSON.parse)(t),St.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional||Bt.transitional,r=e&&e.silentJSONParsing,n=e&&e.forcedJSONParsing,o=!r&&"json"===this.responseType;if(o||n&&St.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(o){if("SyntaxError"===t.name)throw Ot.from(t,Ot.ERR_BAD_RESPONSE,this,null,this.response);throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:gt?pt:(gt=1,pt=null)},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};St.forEach(["delete","get","head"],(function(t){Bt.headers[t]={}})),St.forEach(["post","put","patch"],(function(t){Bt.headers[t]=St.merge(Ct)}));var Ut,Pt,It=Bt,jt=D,Dt=It;function Lt(){return Pt?Ut:(Pt=1,Ut=function(t){return!(!t||!t.__CANCEL__)})}var Mt=D,$t=function(t,e,r){var n=this||Dt;return jt.forEach(r,(function(r){t=r.call(n,t,e)})),t},qt=Lt(),Ft=It,Kt=Et();function Ht(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Kt}var Wt,Gt,zt=D,Jt=function(t,e){e=e||{};var r={};function n(t,e){return zt.isPlainObject(t)&&zt.isPlainObject(e)?zt.merge(t,e):zt.isPlainObject(e)?zt.merge({},e):zt.isArray(e)?e.slice():e}function o(r){return zt.isUndefined(e[r])?zt.isUndefined(t[r])?void 0:n(void 0,t[r]):n(t[r],e[r])}function a(t){if(!zt.isUndefined(e[t]))return n(void 0,e[t])}function i(r){return zt.isUndefined(e[r])?zt.isUndefined(t[r])?void 0:n(void 0,t[r]):n(void 0,e[r])}function s(r){return r in e?n(t[r],e[r]):r in t?n(void 0,t[r]):void 0}var u={url:a,method:a,data:a,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:s};return zt.forEach(Object.keys(t).concat(Object.keys(e)),(function(t){var e=u[t]||o,n=e(t);zt.isUndefined(n)&&e!==s||(r[t]=n)})),r};function Vt(){return Gt?Wt:(Gt=1,Wt={version:"0.27.2"})}var Xt=Vt().version,Zt=z(),Qt={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){Qt[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}}));var Yt={};Qt.transitional=function(t,e,r){function n(t,e){return"[Axios v"+Xt+"] Transitional option '"+t+"'"+e+(r?". "+r:"")}return function(r,o,a){if(!1===t)throw new Zt(n(o," has been removed"+(e?" in "+e:"")),Zt.ERR_DEPRECATED);return e&&!Yt[o]&&(Yt[o]=!0,console.warn(n(o," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(r,o,a)}};var te,ee,re,ne,oe,ae,ie={assertOptions:function(t,e,r){if("object"!=typeof t)throw new Zt("options must be an object",Zt.ERR_BAD_OPTION_VALUE);for(var n=Object.keys(t),o=n.length;o-- >0;){var a=n[o],i=e[a];if(i){var s=t[a],u=void 0===s||i(s,a,t);if(!0!==u)throw new Zt("option "+a+" must be "+u,Zt.ERR_BAD_OPTION_VALUE)}else if(!0!==r)throw new Zt("Unknown option "+a,Zt.ERR_BAD_OPTION)}},validators:Qt},se=D,ue=$,ce=W,fe=function(t){return Ht(t),t.headers=t.headers||{},t.data=$t.call(t,t.data,t.headers,t.transformRequest),t.headers=Mt.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),Mt.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||Ft.adapter)(t).then((function(e){return Ht(t),e.data=$t.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return qt(e)||(Ht(t),e&&e.response&&(e.response.data=$t.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))},le=Jt,he=mt,de=ie,pe=de.validators;function ge(t){this.defaults=t,this.interceptors={request:new ce,response:new ce}}ge.prototype.request=function(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},(e=le(this.defaults,e)).method?e.method=e.method.toLowerCase():this.defaults.method?e.method=this.defaults.method.toLowerCase():e.method="get";var r=e.transitional;void 0!==r&&de.assertOptions(r,{silentJSONParsing:pe.transitional(pe.boolean),forcedJSONParsing:pe.transitional(pe.boolean),clarifyTimeoutError:pe.transitional(pe.boolean)},!1);var n=[],o=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(o=o&&t.synchronous,n.unshift(t.fulfilled,t.rejected))}));var a,i=[];if(this.interceptors.response.forEach((function(t){i.push(t.fulfilled,t.rejected)})),!o){var s=[fe,void 0];for(Array.prototype.unshift.apply(s,n),s=s.concat(i),a=Promise.resolve(e);s.length;)a=a.then(s.shift(),s.shift());return a}for(var u=e;n.length;){var c=n.shift(),f=n.shift();try{u=c(u)}catch(t){f(t);break}}try{a=fe(u)}catch(t){return Promise.reject(t)}for(;i.length;)a=a.then(i.shift(),i.shift());return a},ge.prototype.getUri=function(t){t=le(this.defaults,t);var e=he(t.baseURL,t.url);return ue(e,t.params,t.paramsSerializer)},se.forEach(["delete","get","head","options"],(function(t){ge.prototype[t]=function(e,r){return this.request(le(r||{},{method:t,url:e,data:(r||{}).data}))}})),se.forEach(["post","put","patch"],(function(t){function e(e){return function(r,n,o){return this.request(le(o||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:r,data:n}))}}ge.prototype[t]=e(),ge.prototype[t+"Form"]=e(!0)}));var we=D,ye=m,me=ge,ve=Jt;var be=function t(e){var r=new me(e),n=ye(me.prototype.request,r);return we.extend(n,me.prototype,r),we.extend(n,r),n.create=function(r){return t(ve(e,r))},n}(It);be.Axios=me,be.CanceledError=Et(),be.CancelToken=function(){if(ee)return te;ee=1;var t=Et();function e(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var r;this.promise=new Promise((function(t){r=t}));var n=this;this.promise.then((function(t){if(n._listeners){var e,r=n._listeners.length;for(e=0;e<r;e++)n._listeners[e](t);n._listeners=null}})),this.promise.then=function(t){var e,r=new Promise((function(t){n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},e((function(e){n.reason||(n.reason=new t(e),r(n.reason))}))}return e.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},e.prototype.subscribe=function(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]},e.prototype.unsubscribe=function(t){if(this._listeners){var e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}},e.source=function(){var t;return{token:new e((function(e){t=e})),cancel:t}},te=e}(),be.isCancel=Lt(),be.VERSION=Vt().version,be.toFormData=et(),be.AxiosError=z(),be.Cancel=be.CanceledError,be.all=function(t){return Promise.all(t)},be.spread=ne?re:(ne=1,re=function(t){return function(e){return t.apply(null,e)}}),be.isAxiosError=function(){if(ae)return oe;ae=1;var t=D;return oe=function(e){return t.isObject(e)&&!0===e.isAxiosError}}(),y.exports=be,y.exports.default=be,function(t){t.exports=y.exports}(w),Object.defineProperty(g,"__esModule",{value:!0});const Ee=w.exports;g.default=class{constructor(t){this.METHOD_GET="GET",this.METHOD_POST="POST",this.applyConfig(t)}applyConfig(t){this.config=this.mergeDefaults(t)}getConfig(){return this.config}mergeDefaults(t){const e=t.protocol||"http",r=t.port||("https"===e?443:80);return{host:t.host||"127.0.0.1",protocol:e,port:r,timeout:t.timeout||2e4,logging:t.logging||!1,logger:t.logger||console.log,network:t.network}}async get(t,e){try{return await this.request().get(t,e)}catch(t){if(t.response&&t.response.status)return t.response;throw t}}async post(t,e,r){try{return await this.request().post(t,e,r)}catch(t){if(t.response&&t.response.status)return t.response;throw t}}request(){const t={};this.config.network&&(t["x-network"]=this.config.network);let e=Ee.default.create({baseURL:`${this.config.protocol}://${this.config.host}:${this.config.port}`,timeout:this.config.timeout,maxContentLength:536870912,headers:t});return this.config.logging&&(e.interceptors.request.use((t=>(this.config.logger(`Requesting: ${t.baseURL}/${t.url}`),t))),e.interceptors.response.use((t=>(this.config.logger(`Response:   ${t.config.url} - ${t.status}`),t)))),e}};for(var Te={},_e={},Se={byteLength:function(t){var e=ke(t),r=e[0],n=e[1];return 3*(r+n)/4-n},toByteArray:function(t){var e,r,n=ke(t),o=n[0],a=n[1],i=new xe(function(t,e,r){return 3*(e+r)/4-r}(0,o,a)),s=0,u=a>0?o-4:o;for(r=0;r<u;r+=4)e=Oe[t.charCodeAt(r)]<<18|Oe[t.charCodeAt(r+1)]<<12|Oe[t.charCodeAt(r+2)]<<6|Oe[t.charCodeAt(r+3)],i[s++]=e>>16&255,i[s++]=e>>8&255,i[s++]=255&e;2===a&&(e=Oe[t.charCodeAt(r)]<<2|Oe[t.charCodeAt(r+1)]>>4,i[s++]=255&e);1===a&&(e=Oe[t.charCodeAt(r)]<<10|Oe[t.charCodeAt(r+1)]<<4|Oe[t.charCodeAt(r+2)]>>2,i[s++]=e>>8&255,i[s++]=255&e);return i},fromByteArray:function(t){for(var e,r=t.length,n=r%3,o=[],a=16383,i=0,s=r-n;i<s;i+=a)o.push(Be(t,i,i+a>s?s:i+a));1===n?(e=t[r-1],o.push(Ae[e>>2]+Ae[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],o.push(Ae[e>>10]+Ae[e>>4&63]+Ae[e<<2&63]+"="));return o.join("")}},Ae=[],Oe=[],xe="undefined"!=typeof Uint8Array?Uint8Array:Array,Re="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ce=0,Ne=Re.length;Ce<Ne;++Ce)Ae[Ce]=Re[Ce],Oe[Re.charCodeAt(Ce)]=Ce;function ke(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function Be(t,e,r){for(var n,o,a=[],i=e;i<r;i+=3)n=(t[i]<<16&16711680)+(t[i+1]<<8&65280)+(255&t[i+2]),a.push(Ae[(o=n)>>18&63]+Ae[o>>12&63]+Ae[o>>6&63]+Ae[63&o]);return a.join("")}Oe["-".charCodeAt(0)]=62,Oe["_".charCodeAt(0)]=63,Object.defineProperty(_e,"__esModule",{value:!0}),_e.b64UrlDecode=_e.b64UrlEncode=_e.bufferTob64Url=_e.bufferTob64=_e.b64UrlToBuffer=_e.stringToB64Url=_e.stringToBuffer=_e.bufferToString=_e.b64UrlToString=_e.concatBuffers=void 0;const Ue=Se;function Pe(t){if("undefined"==typeof TextDecoder){return new(0,n.default.TextDecoder)("utf-8",{fatal:!0}).decode(t)}return new TextDecoder("utf-8",{fatal:!0}).decode(t)}function Ie(t){if("undefined"==typeof TextEncoder){return(new(0,n.default.TextEncoder)).encode(t)}return(new TextEncoder).encode(t)}function je(t){return new Uint8Array(Ue.toByteArray($e(t)))}function De(t){return Ue.fromByteArray(new Uint8Array(t))}function Le(t){return Me(De(t))}function Me(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}function $e(t){let e;return e=(t=t.replace(/\-/g,"+").replace(/\_/g,"/")).length%4==0?0:4-t.length%4,t.concat("=".repeat(e))}_e.concatBuffers=function(t){let e=0;for(let r=0;r<t.length;r++)e+=t[r].byteLength;let r=new Uint8Array(e),n=0;r.set(new Uint8Array(t[0]),n),n+=t[0].byteLength;for(let e=1;e<t.length;e++)r.set(new Uint8Array(t[e]),n),n+=t[e].byteLength;return r},_e.b64UrlToString=function(t){return Pe(je(t))},_e.bufferToString=Pe,_e.stringToBuffer=Ie,_e.stringToB64Url=function(t){return Le(Ie(t))},_e.b64UrlToBuffer=je,_e.bufferTob64=De,_e.bufferTob64Url=Le,_e.b64UrlEncode=Me,_e.b64UrlDecode=$e,Object.defineProperty(Te,"__esModule",{value:!0});const qe=_e;Te.default=class{constructor(){if(this.keyLength=4096,this.publicExponent=65537,this.hashAlgorithm="sha256",!this.detectWebCrypto())throw new Error("SubtleCrypto not available!");this.driver=crypto.subtle}async generateJWK(){let t=await this.driver.generateKey({name:"RSA-PSS",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},!0,["sign"]),e=await this.driver.exportKey("jwk",t.privateKey);return{kty:e.kty,e:e.e,n:e.n,d:e.d,p:e.p,q:e.q,dp:e.dp,dq:e.dq,qi:e.qi}}async sign(t,e,{saltLength:r}={}){let n=await this.driver.sign({name:"RSA-PSS",saltLength:32},await this.jwkToCryptoKey(t),e);return new Uint8Array(n)}async hash(t,e="SHA-256"){let r=await this.driver.digest(e,t);return new Uint8Array(r)}async verify(t,e,r){const n={kty:"RSA",e:"AQAB",n:t},o=await this.jwkToPublicCryptoKey(n),a=this.driver.verify({name:"RSA-PSS",saltLength:32},o,r,e),i=this.driver.verify({name:"RSA-PSS",saltLength:0},o,r,e);return a||i}async jwkToCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["sign"])}async jwkToPublicCryptoKey(t){return this.driver.importKey("jwk",t,{name:"RSA-PSS",hash:{name:"SHA-256"}},!1,["verify"])}detectWebCrypto(){if("undefined"==typeof crypto)return!1;const t=null===crypto||void 0===crypto?void 0:crypto.subtle;if(void 0===t)return!1;return["generateKey","importKey","exportKey","digest","sign"].every((e=>"function"==typeof t[e]))}async encrypt(t,e,r){const n=await this.driver.importKey("raw","string"==typeof e?qe.stringToBuffer(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),o=await this.driver.deriveKey({name:"PBKDF2",salt:r?qe.stringToBuffer(r):qe.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},n,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=new Uint8Array(16);crypto.getRandomValues(a);const i=await this.driver.encrypt({name:"AES-CBC",iv:a},o,t);return qe.concatBuffers([a,i])}async decrypt(t,e,r){const n=await this.driver.importKey("raw","string"==typeof e?qe.stringToBuffer(e):e,{name:"PBKDF2",length:32},!1,["deriveKey"]),o=await this.driver.deriveKey({name:"PBKDF2",salt:r?qe.stringToBuffer(r):qe.stringToBuffer("salt"),iterations:1e5,hash:"SHA-256"},n,{name:"AES-CBC",length:256},!1,["encrypt","decrypt"]),a=t.slice(0,16),i=await this.driver.decrypt({name:"AES-CBC",iv:a},o,t.slice(16));return qe.concatBuffers([i])}};var Fe={};Object.defineProperty(Fe,"__esModule",{value:!0});Fe.default=class{constructor(t){this.api=t}getInfo(){return this.api.get("info").then((t=>t.data))}getPeers(){return this.api.get("peers").then((t=>t.data))}};var Ke={},He={};Object.defineProperty(He,"__esModule",{value:!0}),He.getError=void 0;class We extends Error{constructor(t,e={}){e.message?super(e.message):super(),this.type=t,this.response=e.response}getType(){return this.type}}He.default=We,He.getError=function(t){let e=t.data;if("string"==typeof t.data)try{e=JSON.parse(t.data)}catch(t){}if(t.data instanceof ArrayBuffer||t.data instanceof Uint8Array)try{e=JSON.parse(e.toString())}catch(t){}return e?e.error||e:t.statusText||"unknown"};var Ge,ze={},Je={};function Ve(){if(Ge)return Je;Ge=1,Object.defineProperty(Je,"__esModule",{value:!0});const t=yr();async function e(e){if(Array.isArray(e)){const n=t.default.utils.concatBuffers([t.default.utils.stringToBuffer("list"),t.default.utils.stringToBuffer(e.length.toString())]);return await r(e,await t.default.crypto.hash(n,"SHA-384"))}const n=t.default.utils.concatBuffers([t.default.utils.stringToBuffer("blob"),t.default.utils.stringToBuffer(e.byteLength.toString())]),o=t.default.utils.concatBuffers([await t.default.crypto.hash(n,"SHA-384"),await t.default.crypto.hash(e,"SHA-384")]);return await t.default.crypto.hash(o,"SHA-384")}async function r(n,o){if(n.length<1)return o;const a=t.default.utils.concatBuffers([o,await e(n[0])]),i=await t.default.crypto.hash(a,"SHA-384");return await r(n.slice(1),i)}return Je.default=e,Je}var Xe,Ze,Qe={};function Ye(){return Xe||(Xe=1,function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.validatePath=t.arrayCompare=t.bufferToInt=t.intToBuffer=t.arrayFlatten=t.generateProofs=t.buildLayers=t.generateTransactionChunks=t.generateTree=t.computeRootHash=t.generateLeaves=t.chunkData=t.MIN_CHUNK_SIZE=t.MAX_CHUNK_SIZE=void 0;const e=yr(),r=_e;t.MAX_CHUNK_SIZE=262144,t.MIN_CHUNK_SIZE=32768;const n=32;async function o(r){let n=[],o=r,a=0;for(;o.byteLength>=t.MAX_CHUNK_SIZE;){let r=t.MAX_CHUNK_SIZE,i=o.byteLength-t.MAX_CHUNK_SIZE;i>0&&i<t.MIN_CHUNK_SIZE&&(r=Math.ceil(o.byteLength/2));const s=o.slice(0,r),u=await e.default.crypto.hash(s);a+=s.byteLength,n.push({dataHash:u,minByteRange:a-s.byteLength,maxByteRange:a}),o=o.slice(r)}return n.push({dataHash:await e.default.crypto.hash(o),minByteRange:a,maxByteRange:a+o.byteLength}),n}async function a(t){return Promise.all(t.map((async({dataHash:t,minByteRange:e,maxByteRange:r})=>({type:"leaf",id:await h(await Promise.all([h(t),h(d(r))])),dataHash:t,minByteRange:e,maxByteRange:r}))))}async function i(t){return await s(await a(await o(t)))}async function s(t,e=0){if(t.length<2){return t[0]}const r=[];for(let e=0;e<t.length;e+=2)r.push(await l(t[e],t[e+1]));return s(r,e+1)}function u(t){const e=c(t);return Array.isArray(e)?f(e):[e]}function c(t,e=new Uint8Array,n=0){if("leaf"==t.type)return{offset:t.maxByteRange-1,proof:(0,r.concatBuffers)([e,t.dataHash,d(t.maxByteRange)])};if("branch"==t.type){const o=(0,r.concatBuffers)([e,t.leftChild.id,t.rightChild.id,d(t.byteRange)]);return[c(t.leftChild,o,n+1),c(t.rightChild,o,n+1)]}throw new Error("Unexpected node type")}function f(t){const e=[];return t.forEach((t=>{Array.isArray(t)?e.push(...f(t)):e.push(t)})),e}async function l(t,e){if(!e)return t;return{type:"branch",id:await h([await h(t.id),await h(e.id),await h(d(t.maxByteRange))]),byteRange:t.maxByteRange,maxByteRange:e.maxByteRange,leftChild:t,rightChild:e}}async function h(t){return Array.isArray(t)&&(t=e.default.utils.concatBuffers(t)),new Uint8Array(await e.default.crypto.hash(t))}function d(t){const e=new Uint8Array(32);for(var r=e.length-1;r>=0;r--){var n=t%256;e[r]=n,t=(t-n)/256}return e}function p(t){let e=0;for(var r=0;r<t.length;r++)e*=256,e+=t[r];return e}t.chunkData=o,t.generateLeaves=a,t.computeRootHash=async function(t){return(await i(t)).id},t.generateTree=i,t.generateTransactionChunks=async function(t){const e=await o(t),r=await a(e),n=await s(r),i=await u(n),c=e.slice(-1)[0];return c.maxByteRange-c.minByteRange==0&&(e.splice(e.length-1,1),i.splice(i.length-1,1)),{data_root:n.id,chunks:e,proofs:i}},t.buildLayers=s,t.generateProofs=u,t.arrayFlatten=f,t.intToBuffer=d,t.bufferToInt=p;t.arrayCompare=(t,e)=>t.every(((t,r)=>e[r]===t)),t.validatePath=async function e(r,o,a,i,s){if(i<=0)return!1;if(o>=i)return e(r,0,i-1,i,s);if(o<0)return e(r,0,0,i,s);if(64==s.length){const e=s.slice(0,n),o=s.slice(e.length,e.length+32),u=await h([await h(e),await h(o)]);return!!(0,t.arrayCompare)(r,u)&&{offset:i-1,leftBound:a,rightBound:i,chunkSize:i-a}}const u=s.slice(0,n),c=s.slice(u.length,u.length+n),f=s.slice(u.length+c.length,u.length+c.length+32),l=p(f),d=s.slice(u.length+c.length+f.length),g=await h([await h(u),await h(c),await h(f)]);return!!(0,t.arrayCompare)(r,g)&&(o<l?await e(u,o,a,Math.min(i,l),d):await e(c,o,Math.max(a,l),i,d))},t.debug=async function t(e,r=""){if(e.byteLength<1)return r;const o=e.slice(0,n),a=e.slice(o.length,o.length+n),i=e.slice(o.length+a.length,o.length+a.length+32),s=p(i),u=e.slice(o.length+a.length+i.length),c=await h([await h(o),await h(a),await h(i)]);return t(u,`${r}\n${JSON.stringify(Buffer.from(o))},${JSON.stringify(Buffer.from(a))},${s} => ${JSON.stringify(c)}`)}}(Qe)),Qe}function tr(){if(Ze)return ze;Ze=1,Object.defineProperty(ze,"__esModule",{value:!0}),ze.Tag=void 0;const t=_e,e=Ve(),r=Ye();class n{get(e,r){if(!Object.getOwnPropertyNames(this).includes(e))throw new Error(`Field "${e}" is not a property of the Arweave Transaction class.`);return this[e]instanceof Uint8Array?r&&r.decode&&r.string?t.bufferToString(this[e]):r&&r.decode&&!r.string?this[e]:t.bufferTob64Url(this[e]):r&&1==r.decode?r&&r.string?t.b64UrlToString(this[e]):t.b64UrlToBuffer(this[e]):this[e]}}class o extends n{constructor(t,e,r=!1){super(),this.name=t,this.value=e}}ze.Tag=o;return ze.default=class extends n{constructor(e={}){super(),this.format=2,this.id="",this.last_tx="",this.owner="",this.tags=[],this.target="",this.quantity="0",this.data_size="0",this.data=new Uint8Array,this.data_root="",this.reward="0",this.signature="",Object.assign(this,e),"string"==typeof this.data&&(this.data=t.b64UrlToBuffer(this.data)),e.tags&&(this.tags=e.tags.map((t=>new o(t.name,t.value))))}addTag(e,r){this.tags.push(new o(t.stringToB64Url(e),t.stringToB64Url(r)))}toJSON(){return{format:this.format,id:this.id,last_tx:this.last_tx,owner:this.owner,tags:this.tags,target:this.target,quantity:this.quantity,data:t.bufferTob64Url(this.data),data_size:this.data_size,data_root:this.data_root,data_tree:this.data_tree,reward:this.reward,signature:this.signature}}setOwner(t){this.owner=t}setSignature({id:t,owner:e,reward:r,tags:n,signature:o}){this.id=t,this.owner=e,r&&(this.reward=r),n&&(this.tags=n),this.signature=o}async prepareChunks(e){!this.chunks&&e.byteLength>0&&(this.chunks=await(0,r.generateTransactionChunks)(e),this.data_root=t.bufferTob64Url(this.chunks.data_root)),this.chunks||0!==e.byteLength||(this.chunks={chunks:[],data_root:new Uint8Array,proofs:[]},this.data_root="")}getChunk(e,r){if(!this.chunks)throw new Error("Chunks have not been prepared");const n=this.chunks.proofs[e],o=this.chunks.chunks[e];return{data_root:this.data_root,data_size:this.data_size,data_path:t.bufferTob64Url(n.proof),offset:n.offset.toString(),chunk:t.bufferTob64Url(r.slice(o.minByteRange,o.maxByteRange))}}async getSignatureData(){switch(this.format){case 1:let r=this.tags.reduce(((e,r)=>t.concatBuffers([e,r.get("name",{decode:!0,string:!1}),r.get("value",{decode:!0,string:!1})])),new Uint8Array);return t.concatBuffers([this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),this.get("data",{decode:!0,string:!1}),t.stringToBuffer(this.quantity),t.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),r]);case 2:this.data_root||await this.prepareChunks(this.data);const n=this.tags.map((t=>[t.get("name",{decode:!0,string:!1}),t.get("value",{decode:!0,string:!1})]));return await(0,e.default)([t.stringToBuffer(this.format.toString()),this.get("owner",{decode:!0,string:!1}),this.get("target",{decode:!0,string:!1}),t.stringToBuffer(this.quantity),t.stringToBuffer(this.reward),this.get("last_tx",{decode:!0,string:!1}),n,t.stringToBuffer(this.data_size),this.get("data_root",{decode:!0,string:!1})]);default:throw new Error(`Unexpected transaction format: ${this.format}`)}}},ze}var er,rr,nr={};function or(){if(rr)return Ke;rr=1;var t=i&&i.__await||function(e){return this instanceof t?(this.v=e,this):new t(e)},e=i&&i.__asyncGenerator||function(e,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,a=n.apply(e,r||[]),i=[];return o={},s("next"),s("throw"),s("return"),o[Symbol.asyncIterator]=function(){return this},o;function s(t){a[t]&&(o[t]=function(e){return new Promise((function(r,n){i.push([t,e,r,n])>1||u(t,e)}))})}function u(e,r){try{(n=a[e](r)).value instanceof t?Promise.resolve(n.value.v).then(c,f):l(i[0][2],n)}catch(t){l(i[0][3],t)}var n}function c(t){u("next",t)}function f(t){u("throw",t)}function l(t,e){t(e),i.shift(),i.length&&u(i[0][0],i[0][1])}};Object.defineProperty(Ke,"__esModule",{value:!0});const r=He,n=tr(),o=_e,a=function(){if(er)return nr;er=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.TransactionUploader=void 0;const t=tr(),e=_e,r=He,n=Ye(),o=["invalid_json","chunk_too_big","data_path_too_big","offset_too_big","data_size_too_big","chunk_proof_ratio_not_attractive","invalid_proof"];class a{constructor(e,r){if(this.api=e,this.chunkIndex=0,this.txPosted=!1,this.lastRequestTimeEnd=0,this.totalErrors=0,this.lastResponseStatus=0,this.lastResponseError="",!r.id)throw new Error("Transaction is not signed");if(!r.chunks)throw new Error("Transaction chunks not prepared");this.data=r.data,this.transaction=new t.default(Object.assign({},r,{data:new Uint8Array(0)}))}get isComplete(){return this.txPosted&&this.chunkIndex===this.transaction.chunks.chunks.length}get totalChunks(){return this.transaction.chunks.chunks.length}get uploadedChunks(){return this.chunkIndex}get pctComplete(){return Math.trunc(this.uploadedChunks/this.totalChunks*100)}async uploadChunk(t){if(this.isComplete)throw new Error("Upload is already complete");if(""!==this.lastResponseError?this.totalErrors++:this.totalErrors=0,100===this.totalErrors)throw new Error(`Unable to complete upload: ${this.lastResponseStatus}: ${this.lastResponseError}`);let a=""===this.lastResponseError?0:Math.max(this.lastRequestTimeEnd+4e4-Date.now(),4e4);if(a>0&&(a-=a*Math.random()*.3,await new Promise((t=>setTimeout(t,a)))),this.lastResponseError="",!this.txPosted)return void await this.postTransaction();t&&(this.chunkIndex=t);const i=this.transaction.getChunk(t||this.chunkIndex,this.data);if(!await(0,n.validatePath)(this.transaction.chunks.data_root,parseInt(i.offset),0,parseInt(i.data_size),e.b64UrlToBuffer(i.data_path)))throw new Error(`Unable to validate chunk ${this.chunkIndex}`);const s=await this.api.post("chunk",this.transaction.getChunk(this.chunkIndex,this.data)).catch((t=>(console.error(t.message),{status:-1,data:{error:t.message}})));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=s.status,200==this.lastResponseStatus)this.chunkIndex++;else if(this.lastResponseError=(0,r.getError)(s),o.includes(this.lastResponseError))throw new Error(`Fatal error uploading chunk ${this.chunkIndex}: ${this.lastResponseError}`)}static async fromSerialized(e,r,n){if(!r||"number"!=typeof r.chunkIndex||"object"!=typeof r.transaction)throw new Error("Serialized object does not match expected format.");var o=new t.default(r.transaction);o.chunks||await o.prepareChunks(n);const i=new a(e,o);if(i.chunkIndex=r.chunkIndex,i.lastRequestTimeEnd=r.lastRequestTimeEnd,i.lastResponseError=r.lastResponseError,i.lastResponseStatus=r.lastResponseStatus,i.txPosted=r.txPosted,i.data=n,i.transaction.data_root!==r.transaction.data_root)throw new Error("Data mismatch: Uploader doesn't match provided data.");return i}static async fromTransactionId(t,e){const r=await t.get(`tx/${e}`);if(200!==r.status)throw new Error(`Tx ${e} not found: ${r.status}`);const n=r.data;return n.data=new Uint8Array(0),{txPosted:!0,chunkIndex:0,lastResponseError:"",lastRequestTimeEnd:0,lastResponseStatus:0,transaction:n}}toJSON(){return{chunkIndex:this.chunkIndex,transaction:this.transaction,lastRequestTimeEnd:this.lastRequestTimeEnd,lastResponseStatus:this.lastResponseStatus,lastResponseError:this.lastResponseError,txPosted:this.txPosted}}async postTransaction(){if(this.totalChunks<=1){this.transaction.data=this.data;const t=await this.api.post("tx",this.transaction).catch((t=>(console.error(t),{status:-1,data:{error:t.message}})));if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,this.transaction.data=new Uint8Array(0),t.status>=200&&t.status<300)return this.txPosted=!0,void(this.chunkIndex=1);throw this.lastResponseError=(0,r.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`)}const t=await this.api.post("tx",this.transaction);if(this.lastRequestTimeEnd=Date.now(),this.lastResponseStatus=t.status,!(t.status>=200&&t.status<300))throw this.lastResponseError=(0,r.getError)(t),new Error(`Unable to upload transaction: ${t.status}, ${this.lastResponseError}`);this.txPosted=!0}}return nr.TransactionUploader=a,nr}();return Ke.default=class{constructor(t,e,r){this.api=t,this.crypto=e,this.chunks=r}getTransactionAnchor(){return this.api.get("tx_anchor",{transformResponse:[]}).then((t=>t.data))}getPrice(t,e){let r=e?`price/${t}/${e}`:`price/${t}`;return this.api.get(r,{transformResponse:[function(t){return t}]}).then((t=>t.data))}async get(t){const e=await this.api.get(`tx/${t}`);if(200==e.status){const r=parseInt(e.data.data_size);if(e.data.format>=2&&r>0&&r<=12582912){const r=await this.getData(t);return new n.default(Object.assign(Object.assign({},e.data),{data:r}))}return new n.default(Object.assign(Object.assign({},e.data),{format:e.data.format||1}))}if(404==e.status)throw new r.default("TX_NOT_FOUND");if(410==e.status)throw new r.default("TX_FAILED");throw new r.default("TX_INVALID")}fromRaw(t){return new n.default(t)}async search(t,e){return this.api.post("arql",{op:"equals",expr1:t,expr2:e}).then((t=>t.data?t.data:[]))}getStatus(t){return this.api.get(`tx/${t}/status`).then((t=>200==t.status?{status:200,confirmed:t.data}:{status:t.status,confirmed:null}))}async getData(t,e){let r;try{r=await this.chunks.downloadChunkedData(t)}catch(e){console.error(`Error while trying to download chunked data for ${t}`),console.error(e)}if(!r){console.warn(`Falling back to gateway cache for ${t}`);try{r=(await this.api.get(`/${t}`)).data}catch(e){console.error(`Error while trying to download contiguous data from gateway cache for ${t}`),console.error(e)}}if(!r)throw new Error(`${t} was not found!`);return e&&e.decode&&!e.string?r:e&&e.decode&&e.string?o.bufferToString(r):o.bufferTob64Url(r)}async sign(t,e,r){if(!(e||"undefined"!=typeof window&&window.arweaveWallet))throw new Error("A new Arweave transaction must provide the jwk parameter.");if(e&&"use_wallet"!==e){t.setOwner(e.n);let n=await t.getSignatureData(),a=await this.crypto.sign(e,n,r),i=await this.crypto.hash(a);t.setSignature({id:o.bufferTob64Url(i),owner:e.n,signature:o.bufferTob64Url(a)})}else{try{(await window.arweaveWallet.getPermissions()).includes("SIGN_TRANSACTION")||await window.arweaveWallet.connect(["SIGN_TRANSACTION"])}catch(t){}const e=await window.arweaveWallet.sign(t,r);t.setSignature({id:e.id,owner:e.owner,reward:e.reward,tags:e.tags,signature:e.signature})}}async verify(t){const e=await t.getSignatureData(),r=t.get("signature",{decode:!0,string:!1}),n=o.bufferTob64Url(await this.crypto.hash(r));if(t.id!==n)throw new Error("Invalid transaction signature or ID! The transaction ID doesn't match the expected SHA-256 hash of the signature.");return this.crypto.verify(t.owner,e,r)}async post(t){if("string"==typeof t?t=new n.default(JSON.parse(t)):"function"==typeof t.readInt32BE?t=new n.default(JSON.parse(t.toString())):"object"!=typeof t||t instanceof n.default||(t=new n.default(t)),!(t instanceof n.default))throw new Error("Must be Transaction object");t.chunks||await t.prepareChunks(t.data);const e=await this.getUploader(t,t.data);try{for(;!e.isComplete;)await e.uploadChunk()}catch(t){if(e.lastResponseStatus>0)return{status:e.lastResponseStatus,statusText:e.lastResponseError,data:{error:e.lastResponseError}};throw t}return{status:200,statusText:"OK",data:{}}}async getUploader(t,e){let r;if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),t instanceof n.default){if(e||(e=t.data),!(e instanceof Uint8Array))throw new Error("Data format is invalid");t.chunks||await t.prepareChunks(e),r=new a.TransactionUploader(this.api,t),r.data&&0!==r.data.length||(r.data=e)}else{if("string"==typeof t&&(t=await a.TransactionUploader.fromTransactionId(this.api,t)),!(e&&e instanceof Uint8Array))throw new Error("Must provide data when resuming upload");r=await a.TransactionUploader.fromSerialized(this.api,t,e)}return r}upload(r,n){return e(this,arguments,(function*(){const e=yield t(this.getUploader(r,n));for(;!e.isComplete;)yield t(e.uploadChunk()),yield yield t(e);return yield t(e)}))}},Ke}var ar={};Object.defineProperty(ar,"__esModule",{value:!0});const ir=_e;ar.default=class{constructor(t,e){this.api=t,this.crypto=e}getBalance(t){return this.api.get(`wallet/${t}/balance`,{transformResponse:[function(t){return t}]}).then((t=>t.data))}getLastTransactionID(t){return this.api.get(`wallet/${t}/last_tx`).then((t=>t.data))}generate(){return this.crypto.generateJWK()}async jwkToAddress(t){return t&&"use_wallet"!==t?this.getAddress(t):this.getAddress()}async getAddress(t){if(t&&"use_wallet"!==t)return this.ownerToAddress(t.n);try{await window.arweaveWallet.connect(["ACCESS_ADDRESS"])}catch(t){}return window.arweaveWallet.getActiveAddress()}async ownerToAddress(t){return ir.bufferTob64Url(await this.crypto.hash(ir.b64UrlToBuffer(t)))}};var sr={};Object.defineProperty(sr,"__esModule",{value:!0}),sr.SiloResource=void 0;const ur=_e;sr.default=class{constructor(t,e,r){this.api=t,this.crypto=e,this.transactions=r}async get(t){if(!t)throw new Error("No Silo URI specified");const e=await this.parseUri(t),r=await this.transactions.search("Silo-Name",e.getAccessKey());if(0==r.length)throw new Error(`No data could be found for the Silo URI: ${t}`);const n=await this.transactions.get(r[0]);if(!n)throw new Error(`No data could be found for the Silo URI: ${t}`);const o=n.get("data",{decode:!0,string:!1});return this.crypto.decrypt(o,e.getEncryptionKey())}async readTransactionData(t,e){if(!e)throw new Error("No Silo URI specified");const r=await this.parseUri(e),n=t.get("data",{decode:!0,string:!1});return this.crypto.decrypt(n,r.getEncryptionKey())}async parseUri(t){const e=t.match(/^([a-z0-9-_]+)\.([0-9]+)/i);if(!e)throw new Error("Invalid Silo name, must be a name in the format of [a-z0-9]+.[0-9]+, e.g. 'bubble.7'");const r=e[1],n=Math.pow(2,parseInt(e[2])),o=await this.hash(ur.stringToBuffer(r),n),a=ur.bufferTob64(o.slice(0,15)),i=await this.hash(o.slice(16,31),1);return new cr(t,a,i)}async hash(t,e){let r=await this.crypto.hash(t);for(let t=0;t<e-1;t++)r=await this.crypto.hash(r);return r}};class cr{constructor(t,e,r){this.uri=t,this.accessKey=e,this.encryptionKey=r}getUri(){return this.uri}getAccessKey(){return this.accessKey}getEncryptionKey(){return this.encryptionKey}}sr.SiloResource=cr;var fr={};Object.defineProperty(fr,"__esModule",{value:!0});const lr=He,hr=_e;fr.default=class{constructor(t){this.api=t}async getTransactionOffset(t){const e=await this.api.get(`tx/${t}/offset`);if(200===e.status)return e.data;throw new Error(`Unable to get transaction offset: ${(0,lr.getError)(e)}`)}async getChunk(t){const e=await this.api.get(`chunk/${t}`);if(200===e.status)return e.data;throw new Error(`Unable to get chunk: ${(0,lr.getError)(e)}`)}async getChunkData(t){const e=await this.getChunk(t);return hr.b64UrlToBuffer(e.chunk)}firstChunkOffset(t){return parseInt(t.offset)-parseInt(t.size)+1}async downloadChunkedData(t){const e=await this.getTransactionOffset(t),r=parseInt(e.size),n=parseInt(e.offset)-r+1,o=new Uint8Array(r);let a=0;for(;a<r;){let t;this.api.config.logging&&console.log(`[chunk] ${a}/${r}`);try{t=await this.getChunkData(n+a)}catch(t){console.error(`[chunk] Failed to fetch chunk at offset ${n+a}`),console.error("[chunk] This could indicate that the chunk wasn't uploaded or hasn't yet seeded properly to a particular gateway/node")}if(!t)throw new Error(`Couldn't complete data download at ${a}/${r}`);o.set(t,a),a+=t.length}return o}};var dr={};Object.defineProperty(dr,"__esModule",{value:!0});const pr=He;class gr{constructor(t,e){this.api=t,this.network=e}async get(t){const e=await this.api.get(`${gr.ENDPOINT}${t}`);if(200===e.status)return e.data;throw 404===e.status?new pr.default("BLOCK_NOT_FOUND"):new Error(`Error while loading block data: ${e}`)}async getCurrent(){const{current:t}=await this.network.getInfo();return await this.get(t)}}var wr;function yr(){if(wr)return f;wr=1,Object.defineProperty(f,"__esModule",{value:!0});const t=l,e=g,r=Te,n=Fe,o=or(),a=ar,i=tr(),s=_e,u=sr,c=fr,h=dr;class d{constructor(r){this.api=new e.default(r),this.wallets=new a.default(this.api,d.crypto),this.chunks=new c.default(this.api),this.transactions=new o.default(this.api,d.crypto,this.chunks),this.silo=new u.default(this.api,this.crypto,this.transactions),this.network=new n.default(this.api),this.blocks=new h.default(this.api,this.network),this.ar=new t.default}get crypto(){return d.crypto}get utils(){return d.utils}getConfig(){return{api:this.api.getConfig(),crypto:null}}async createTransaction(t,e){const r={};if(Object.assign(r,t),!(t.data||t.target&&t.quantity))throw new Error("A new Arweave transaction must have a 'data' value, or 'target' and 'quantity' values.");if(null==t.owner&&e&&"use_wallet"!==e&&(r.owner=e.n),null==t.last_tx&&(r.last_tx=await this.transactions.getTransactionAnchor()),"string"==typeof t.data&&(t.data=s.stringToBuffer(t.data)),t.data instanceof ArrayBuffer&&(t.data=new Uint8Array(t.data)),t.data&&!(t.data instanceof Uint8Array))throw new Error("Expected data to be a string, Uint8Array or ArrayBuffer");if(null==t.reward){const e=t.data?t.data.byteLength:0;r.reward=await this.transactions.getPrice(e,r.target)}r.data_root="",r.data_size=t.data?t.data.byteLength.toString():"0",r.data=t.data||new Uint8Array(0);const n=new i.default(r);return await n.getSignatureData(),n}async createSiloTransaction(t,e,r){const n={};if(Object.assign(n,t),!t.data)throw new Error("Silo transactions must have a 'data' value");if(!r)throw new Error("No Silo URI specified.");if(t.target||t.quantity)throw new Error("Silo transactions can only be used for storing data, sending AR to other wallets isn't supported.");if(null==t.owner){if(!e||!e.n)throw new Error("A new Arweave transaction must either have an 'owner' attribute, or you must provide the jwk parameter.");n.owner=e.n}null==t.last_tx&&(n.last_tx=await this.transactions.getTransactionAnchor());const o=await this.silo.parseUri(r);if("string"==typeof t.data){const e=await this.crypto.encrypt(s.stringToBuffer(t.data),o.getEncryptionKey());n.reward=await this.transactions.getPrice(e.byteLength),n.data=s.bufferTob64Url(e)}if(t.data instanceof Uint8Array){const e=await this.crypto.encrypt(t.data,o.getEncryptionKey());n.reward=await this.transactions.getPrice(e.byteLength),n.data=s.bufferTob64Url(e)}const a=new i.default(n);return a.addTag("Silo-Name",o.getAccessKey()),a.addTag("Silo-Version","0.1.0"),a}arql(t){return this.api.post("/arql",t).then((t=>t.data||[]))}}return f.default=d,d.crypto=new r.default,d.utils=s,f}dr.default=gr,gr.ENDPOINT="block/hash/",function(t){var e=i&&i.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),r=i&&i.__exportStar||function(t,r){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(r,n)||e(r,t,n)};Object.defineProperty(t,"__esModule",{value:!0});const n=yr();n.default.init=function(t={}){const e=function(){const t={host:"arweave.net",port:443,protocol:"https"};if(!(window&&window.location&&window.location.protocol&&window.location.hostname))return t;const e=window.location.protocol.replace(":",""),r=window.location.hostname,n=window.location.port?parseInt(window.location.port):"https"==e?443:80;return["localhost","127.0.0.1"].includes(r)||"file"==e?t:{host:r,port:n,protocol:e}}(),r=t.protocol||e.protocol,o=t.host||e.host,a=t.port||e.port;return new n.default(Object.assign(Object.assign({},t),{host:o,protocol:r,port:a}))},window.Arweave=n.default,r(yr(),t),t.default=n.default}(c);var mr=s(c),vr={},br={},Er={};!function(t){function e(t,e){if(Number.isInteger(e)){let t=new Uint8Array(16);new DataView(t.buffer).setBigUint64(0,BigInt(e),!0),e=t}if(e instanceof Uint8Array)throw new Error("not implemented yet");throw new TypeError}Object.defineProperty(t,"__esModule",{value:!0}),t.xor=t.unwrapPanic=t.unwrapErrPanic=t.unwrapErr=t.unwrap=t.txSender=t.tuple=t.tryUnwrap=t.toUint=t.toInt=t.some=t.sha512_256=t.sha512=t.sha256=t.print=t.pow=t.ok=t.not=t.none=t.nftTransfer=t.nftMint=t.nftGetOwner=t.mod=t.match=t.mapSet=t.mapInsert=t.mapGet=t.mapDelete=t.map=t.list=t.len=t.keccak256=t.isSome=t.isOk=t.isNone=t.isErr=t.isEq=t.hash160=t.getBlockInfo=t.get=t.ftTransfer=t.ftMint=t.ftGetBalance=t.fold=t.filter=t.err=t.defaultTo=t.contractOf=t.contractCaller=t.contractCall=t.concat=t.blockHeight=t.atBlock=t.asMaxLen=t.asContract=t.append=t.ge=t.gt=t.le=t.lt=t.div=t.mul=t.sub=t.add=t.requireFeature=t.requireVersion=t.Err=t.Panic=t.SmartWeave=void 0;const r=[];t.SmartWeave=null;class n extends Error{constructor(t){super(t),Object.setPrototypeOf(this,n.prototype)}}t.Panic=n;class o extends Error{constructor(t){super(""),this.value=t,Object.setPrototypeOf(this,o.prototype)}}function a(t){return t instanceof o}function i(e){return e===t.none}function s(t){return!(t instanceof o)}function u(e){return e!==t.none}function c(t){return t}function f(){if(t.SmartWeave)return r.length>0?r[0]:t.SmartWeave.transaction.owner;throw new Error("tx-sender not supported")}t.Err=o,t.requireVersion=function(t){},t.requireFeature=function(t){},t.add=function(...t){return t.reduce(((t,e)=>t+e),0)},t.sub=function(...t){return t.slice(1).reduce(((t,e)=>t-e),t[0])},t.mul=function(...t){return t.reduce(((t,e)=>t*e),1)},t.div=function(...t){return Math.trunc(t.slice(1).reduce(((t,e)=>t/e),t[0]))},t.lt=function(t,e){return t<e},t.le=function(t,e){return t<=e},t.gt=function(t,e){return t>e},t.ge=function(t,e){return t>=e},t.append=function(t,e){return[...t,e]},t.asContract=function(e){if(t.SmartWeave)try{return r.unshift(t.SmartWeave.contract.id),e()}finally{r.shift()}throw new Error("as-contract not supported")},t.asMaxLen=function(e,r){return e.length<=r?e:t.none},t.atBlock=function(e,r){if(t.SmartWeave)throw new Error("at-block not supported on SmartWeave");throw new Error("not implemented yet")},t.blockHeight=function(){if(t.SmartWeave)return t.SmartWeave.block.height;throw new Error("block-height not supported")},t.concat=function(t,e){if(t instanceof Array&&e instanceof Array)return[].concat(t,e);if(t instanceof Uint8Array&&e instanceof Uint8Array){const r=new Uint8Array(t.byteLength+e.byteLength);return r.set(t,0),r.set(e,t.byteLength),r}throw new TypeError},t.contractCall=function(e,r,...n){if(t.SmartWeave)throw new Error("contract-call? not supported on SmartWeave");throw new Error("not implemented yet")},t.contractCaller=function(){if(t.SmartWeave)return f();throw new Error("contract-caller not supported")},t.contractOf=function(e){if(t.SmartWeave)throw new Error("contract-of not supported on SmartWeave");throw new Error("not implemented yet")},t.defaultTo=function(t,e){return null!=e?e:t},t.err=function(t){return new o(t)},t.filter=function(t,e){if(e instanceof Array)return e.filter(t);throw new TypeError},t.fold=function(t,e,r){if(e instanceof Array)return e.reduce(((e,r)=>t(r,e)),r);throw new TypeError},t.ftGetBalance=function(t,e){throw new Error("not implemented yet")},t.ftMint=function(t,e,r){throw new Error("not implemented yet")},t.ftTransfer=function(t,e,r,n){throw new Error("not implemented yet")},t.get=function(e,r){return i(r)?t.none:r.get(e)},t.getBlockInfo=function(e,r){if(t.SmartWeave)throw new Error("get-block-info? not supported on SmartWeave");throw new Error("not implemented yet")},t.hash160=function(t){if(Number.isInteger(t)){let e=new Uint8Array(16);new DataView(e.buffer).setBigUint64(0,BigInt(t),!0),t=e}if(t instanceof Uint8Array)throw new Error("not implemented yet");throw new TypeError},t.isEq=function(...t){if(t.length>0&&t.every((e=>typeof e==typeof t[0])))return t.every((e=>e===t[0]));throw new TypeError},t.isErr=a,t.isNone=i,t.isOk=s,t.isSome=u,t.keccak256=function(t){return e(0,t)},t.len=function(t){return t.length},t.list=function(...t){if(t.length>0&&t.some((e=>typeof e!=typeof t[0])))throw new TypeError;return t},t.map=function(t,e){if(e instanceof Array)return e.map(t);throw new TypeError},t.mapDelete=function(t,e){return t.delete(e)},t.mapGet=function(e,r){const n=e.get(r);return n||t.none},t.mapInsert=function(t,e,r){return!t.has(e)&&(t.set(e,r),!0)},t.mapSet=function(t,e,r){return t.set(e,r),!0},t.match=function(t,e,r){return i(t)||a(t)?r(t):e(t)},t.mod=function(t,e){if(0===e)throw new RangeError("division by zero");return t%e},t.nftGetOwner=function(t,e){throw new Error("not implemented yet")},t.nftMint=function(t,e,r){throw new Error("not implemented yet")},t.nftTransfer=function(t,e,r,n){throw new Error("not implemented yet")},t.none=null,t.not=function(t){return!t},t.ok=function(t){return t},t.pow=function(t,e){return Math.pow(t,e)},t.print=function(t){return console.log(t),t},t.sha256=function(t){return e(0,t)},t.sha512=function(t){return e(0,t)},t.sha512_256=function(t){return e(0,t)},t.some=c,t.toInt=function(t){return t},t.toUint=function(t){return t},t.tryUnwrap=function(e){return u(e)||s(e)?e:a(e)?e.value:t.none},t.tuple=function(...t){return t.reduce(((t,[e,r])=>t.set(e,r)),new Map)},t.txSender=f,t.unwrap=function(t,e){return i(t)||a(t)?e:t},t.unwrapErr=function(t,e){return a(t)?t.value:e},t.unwrapErrPanic=function(t){if(a(t))return t.value;throw new n("unwrapErrPanic")},t.unwrapPanic=function(t){if(i(t)||a(t))throw new n("unwrapPanic");return t},t.xor=function(t,e){return t^e}}(Er);var Tr={};Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.hasMultipleinteractions=Tr.evalSettings=Tr.normalizeContractSource=Tr.log=Tr.arrayToHex=Tr.formatTags=Tr.unpackTags=Tr.getTag=void 0,Tr.getTag=function(t,e){const r=t.get("tags");for(const t of r)try{if(t.get("name",{decode:!0,string:!0})===e)return t.get("value",{decode:!0,string:!0})}catch(t){}return!1},Tr.unpackTags=function(t){const e=t.get("tags"),r={};for(const t of e)try{const e=t.get("name",{decode:!0,string:!0}),n=t.get("value",{decode:!0,string:!0});if(!r.hasOwnProperty(e)){r[e]=n;continue}r[e]=[...r[e],n]}catch(t){}return r},Tr.formatTags=function(t){const e={};for(const r of t){const{name:t,value:n}=r;e.hasOwnProperty(t)?e[t]=[...e[t],n]:e[t]=n}return e},Tr.arrayToHex=function(t){let e="";for(const r of t)e+=("0"+r.toString(16)).slice(-2);return e},Tr.log=function(t,...e){t&&t.getConfig().api.logging&&("function"==typeof t.getConfig().api.logger?t.getConfig().api.logger(...e):console.log(...e))},Tr.normalizeContractSource=function(t){return`\n    const [SmartWeave, BigNumber, clarity] = arguments;\n    clarity.SmartWeave = SmartWeave;\n    class ContractError extends Error { constructor(message) { super(message); this.name = 'ContractError' } };\n    function ContractAssert(cond, message) { if (!cond) throw new ContractError(message) };\n    ${t=t.replace(/export\s+async\s+function\s+handle/gmu,"async function handle").replace(/export\s+function\s+handle/gmu,"function handle").replace(/\(\s*\(\)\s*=>\s*{/g,"").replace(/\s*\(\s*function\s*\(\)\s*{/g,"").replace(/}\s*\)\s*\(\)\s*;/g,"")};\n    return handle;\n  `},Tr.evalSettings=function(t){let e=new Map;var r;return t.settings&&(!function(t){if(null==t)return!1;return"function"==typeof t[Symbol.iterator]}(t.settings)?"object"!=typeof(r=t.settings)||null===r||Array.isArray(r)||(e=new Map(Object.entries(t.settings))):e=new Map(t.settings)),e},Tr.hasMultipleinteractions=function(t){return t.node.tags.filter((t=>"Contract"===t.name)).length>1};var _r,Sr,Ar={};function Or(){if(Sr)return br;Sr=1;var t=i&&i.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(e,r);o&&!("get"in o?!e.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,o)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),e=i&&i.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),r=i&&i.__importStar||function(r){if(r&&r.__esModule)return r;var n={};if(null!=r)for(var o in r)"default"!==o&&Object.prototype.hasOwnProperty.call(r,o)&&t(n,r,o);return e(n,r),n},n=i&&i.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}u((n=n.apply(t,e||[])).next())}))},o=i&&i.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(br,"__esModule",{value:!0}),br.createContractExecutionEnvironment=br.loadContract=void 0;const a=r(Er),s=Tr,u=function(){if(_r)return Ar;_r=1,Object.defineProperty(Ar,"__esModule",{value:!0}),Ar.SmartWeaveGlobal=void 0;const t=Br();Ar.SmartWeaveGlobal=class{constructor(n,o){this.unsafeClient=n,this.arweave={ar:n.ar,utils:n.utils,wallets:n.wallets,crypto:n.crypto},this.contract=o,this.transaction=new e(this),this.block=new r(this),this.contracts={readContractState:(e,r,o)=>(0,t.readContract)(n,e,r||(this._isDryRunning?Number.POSITIVE_INFINITY:this.block.height),o)}}get _isDryRunning(){return!this._activeTx}};class e{constructor(t){this.global=t}get id(){if(!this.global._activeTx)throw new Error("No current Tx on id");return this.global._activeTx.id}get owner(){if(!this.global._activeTx)throw new Error("No current Tx on owner");return this.global._activeTx.owner.address}get target(){if(!this.global._activeTx)throw new Error("No current Tx on target");return this.global._activeTx.recipient}get tags(){if(!this.global._activeTx)throw new Error("No current Tx on tags");return this.global._activeTx.tags}get quantity(){if(!this.global._activeTx)throw new Error("No current Tx on quantity");return this.global._activeTx.quantity.winston}get reward(){if(!this.global._activeTx)throw new Error("No current Tx on reward");return this.global._activeTx.fee.winston}}class r{constructor(t){this.global=t}get height(){if(!this.global._activeTx)throw new Error("No current tx on block height");return this.global._activeTx.block.height}get indep_hash(){if(!this.global._activeTx)throw new Error("No current tx on block id");return this.global._activeTx.block.id}get timestamp(){if(!this.global._activeTx)throw new Error("No current tx on block timestamp");return this.global._activeTx.block.timestamp}}return Ar}(),c=o(h.exports);function f(t,e,r,n){const o=(0,s.normalizeContractSource)(e),i=new u.SmartWeaveGlobal(t,{id:r,owner:n});return{handler:new Function(o)(i,c.default,a),swGlobal:i}}return br.loadContract=function(t,e,r){return n(this,void 0,void 0,(function*(){const n=yield t.transactions.get(e),o=yield t.wallets.ownerToAddress(n.owner);r=r||(0,s.getTag)(n,"Contract-Src");const a=(0,s.getTag)(n,"Min-Fee"),i=(yield t.transactions.get(r)).get("data",{decode:!0,string:!0});let u;if((0,s.getTag)(n,"Init-State"))u=(0,s.getTag)(n,"Init-State");else if((0,s.getTag)(n,"Init-State-TX")){u=(yield t.transactions.get((0,s.getTag)(n,"Init-State-TX"))).get("data",{decode:!0,string:!0})}else u=n.get("data",{decode:!0,string:!0});const{handler:c,swGlobal:l}=f(t,i,e,o);return{id:e,contractSrcTXID:r,contractSrc:i,initState:u,minFee:a,contractTX:n,handler:c,swGlobal:l}}))},br.createContractExecutionEnvironment=f,br}var xr={},Rr=i&&i.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}u((n=n.apply(t,e||[])).next())}))};Object.defineProperty(xr,"__esModule",{value:!0}),xr.execute=void 0,xr.execute=function(t,e,r){return Rr(this,void 0,void 0,(function*(){try{const n=JSON.parse(JSON.stringify(r)),o=yield t(n,e);if(o&&(o.state||o.result))return{type:"ok",result:o.result,state:o.state||r};throw new Error(`Unexpected result from contract: ${JSON.stringify(o)}`)}catch(t){return"ContractError"===t.name?{type:"error",result:t.message,state:r}:{type:"exception",result:`${t&&t.stack||t&&t.message}`,state:r}}}))};var Cr,Nr={};Object.defineProperty(Nr,"__esModule",{value:!0});class kr extends Error{constructor(t,e={}){e.message?super(e.message):super(),this.type=t,this.otherInfo=e}getType(){return this.type}}function Br(){if(Cr)return vr;Cr=1;var t=i&&i.__awaiter||function(t,e,r,n){return new(r||(r=Promise))((function(o,a){function i(t){try{u(n.next(t))}catch(t){a(t)}}function s(t){try{u(n.throw(t))}catch(t){a(t)}}function u(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(i,s)}u((n=n.apply(t,e||[])).next())}))},e=i&&i.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vr,"__esModule",{value:!0}),vr.readContract=void 0;const r=e(c),n=Or(),o=Tr,a=xr,s=e(Nr);vr.readContract=function(e,i,c,l){return t(this,void 0,void 0,(function*(){if(!c){const t=yield e.network.getInfo();c=t.height}const h=(0,n.loadContract)(e,i).catch((t=>{throw new s.default("CONTRACT_NOT_FOUND",{message:`Contract having txId: ${i} not found`,requestedTxId:i})})),d=function(e,r,n){return t(this,void 0,void 0,(function*(){let t={tags:[{name:"App-Name",values:["SmartWeaveAction"]},{name:"Contract",values:[r]}],blockFilter:{max:n},first:u},o=yield f(e,t);const a=o.edges.filter((t=>{var e,r;return!(t.node.bundledIn&&(null===(e=t.node.bundledIn)||void 0===e?void 0:e.id)&&t.node.parent&&(null===(r=t.node.parent)||void 0===r?void 0:r.id))}));for(;o.pageInfo.hasNextPage;){const r=o.edges[99].cursor;t=Object.assign(Object.assign({},t),{after:r}),o=yield f(e,t),a.push(...o.edges.filter((t=>{var e,r;return!(t.node.bundledIn&&(null===(e=t.node.bundledIn)||void 0===e?void 0:e.id)&&t.node.parent&&(null===(r=t.node.parent)||void 0===r?void 0:r.id))})))}return a}))}(e,i,c).catch((t=>t));let p,[g,w]=yield Promise.all([h,d]);if(g instanceof Error)throw g;if(w instanceof Error)throw w;let y=g.contractSrcTXID;try{p=JSON.parse(g.initState)}catch(t){throw new Error(`Unable to parse initial state for contract: ${i}`)}(0,o.log)(e,`Replaying ${w.length} confirmed interactions`),yield function(e,n){return t(this,void 0,void 0,(function*(){const a=n.map((n=>function(e,n){return t(this,void 0,void 0,(function*(){const{node:t}=n,a=e.utils.b64UrlToBuffer(t.block.id),i=e.utils.b64UrlToBuffer(t.id),s=e.utils.concatBuffers([a,i]),u=(0,o.arrayToHex)(yield r.default.crypto.hash(s)),c=`000000${t.block.height}`.slice(-12);n.sortKey=`${c},${u}`}))}(e,n)));yield Promise.all(a),n.sort(((t,e)=>t.sortKey.localeCompare(e.sortKey)))}))}(e,w);let{handler:m,swGlobal:v}=g;const b={};for(const t of w){const r=t.node;let u=t.node.tags[t.node.tags.findIndex((t=>"Input"===t.name))].value;if((0,o.hasMultipleinteractions)(t)){const n=t.node.tags.findIndex((t=>"Contract"===t.name&&t.value===i)),a=t.node.tags[n+1];if(!a||"Input"!==a.name){(0,o.log)(e,`Skipping tx with missing or invalid Input tag - ${r.id}`);continue}u=a.value}try{u=JSON.parse(u)}catch(t){(0,o.log)(e,t);continue}if(!u){(0,o.log)(e,`Skipping tx with missing or invalid Input tag - ${r.id}`);continue}const c={input:u,caller:r.owner.address};v._activeTx=r;const f=yield(0,a.execute)(m,c,p);"exception"===f.type&&((0,o.log)(e,`${f.result}`),(0,o.log)(e,`Executing of interaction: ${r.id} threw exception.`)),"error"===f.type&&((0,o.log)(e,`${f.result}`),(0,o.log)(e,`Executing of interaction: ${r.id} returned error.`)),b[r.id]="ok"===f.type,p=f.state;const l=(0,o.evalSettings)(p),h=p.evolve||l.get("evolve");let d=p.canEvolve||l.get("canEvolve");if(null==d&&(d=!0),h&&/[a-z0-9_-]{43}/i.test(h)&&d&&y!==h)try{g=yield(0,n.loadContract)(e,i,h),v=g.swGlobal,m=g.handler,y=h}catch(t){const e=new s.default("CONTRACT_NOT_FOUND",{message:`Contract having txId: ${i} not found`,requestedTxId:i});console.log(e)}}return l?{state:p,validity:b}:p}))};const u=100;function f(e,r){return t(this,void 0,void 0,(function*(){const t=yield e.api.post("graphql",{query:"query Transactions($tags: [TagFilter!]!, $blockFilter: BlockFilter!, $first: Int!, $after: String) {\n    transactions(tags: $tags, block: $blockFilter, first: $first, sort: HEIGHT_ASC, after: $after) {\n      pageInfo {\n        hasNextPage\n      }\n      edges {\n        node {\n          id\n          owner { address }\n          recipient\n          tags {\n            name\n            value\n          }\n          block {\n            height\n            id\n            timestamp\n          }\n          fee { winston }\n          quantity { winston }\n          parent { id }\n        }\n        cursor\n      }\n    }\n  }",variables:r});if(200!==t.status)throw new Error(`Unable to retrieve transactions. Arweave gateway responded with status ${t.status}.`);return t.data.data.transactions}))}return vr}Nr.default=kr;var Ur=Br(),Pr=mr.init({host:"arweave.net",port:443,protocol:"https",logging:!1});return t.readContractAsStringPromise=function(t){return o(this,void 0,void 0,(function(){var e;return a(this,(function(r){switch(r.label){case 0:return[4,Ur.readContract(Pr,t)];case 1:return e=r.sent(),[2,JSON.stringify(e)]}}))}))},Object.defineProperty(t,"__esModule",{value:!0}),t}({});
